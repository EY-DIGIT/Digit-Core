var e,t=require("@egovernments/digit-ui-react-components"),n=require("react"),l=(e=n)&&"object"==typeof e&&"default"in e?e.default:e,a=require("react-i18next"),i=require("react-router-dom"),o=require("react-hook-form"),r=require("react-query");require("react-time-picker");var u=require("recharts");function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var n,l,a={},i=Object.keys(e);for(l=0;l<i.length;l++)t.indexOf(n=i[l])>=0||(a[n]=e[n]);return a}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,l=new Array(t);n<t;n++)l[n]=e[n];return l}function m(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}function v(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function E(e){v(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function f(e){v(1,arguments);var t=E(e);return t.setHours(0,0,0,0),t}function p(e,t){v(2,arguments);var n=f(e),l=f(t);return n.getTime()===l.getTime()}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var g,h=function(e,t){return e.name.toUpperCase()<t.name.toUpperCase()?-1:e.name.toUpperCase()>t.name.toUpperCase()?1:0},S=function(e,t){var n,l;return!(!e||!t)&&(null==e||null===(n=e.trim())||void 0===n?void 0:n.toLowerCase())===(null==t||null===(l=t.trim())||void 0===l?void 0:l.toLowerCase())},y=function(e){return Promise.resolve(m(function(){return Promise.resolve(Digit.UploadServices.Filefetch([e],Digit.ULBService.getStateId())).then(function(e){var t,n;if((null==e||null===(t=e.data)||void 0===t||null===(n=t.fileStoreIds)||void 0===n?void 0:n.length)>0){var l,a,i=null===(l=e.data.fileStoreIds[0])||void 0===l?void 0:l.url;return i.includes(".jpg")||i.includes(".png")?i.split(",")[0]:null===(a=e.data.fileStoreIds[0])||void 0===a?void 0:a.url}})},function(){}))},C=function(e,t){try{if(!e||!e.length)return alert("No Document exists!"),Promise.resolve();var n=window.open("","_blank");return Promise.resolve(y(e)).then(function(e){window.mSewaApp&&window.mSewaApp.isMsewaApp()?(window.open(e,"_blank"),setTimeout(function(){window.location.href=e},1e3)):(n.location=e,n.document.title=t)})}catch(e){return Promise.reject(e)}},T=function(e,t){if(e&&e.length)if(window.mSewaApp&&window.mSewaApp.isMsewaApp())window.open(e,"_blank"),setTimeout(function(){window.location.href=e},1e3);else{var n=window.open("","_blank");n.location=e,n.document.title=t}else alert("No Document Link exists!")},D=function(e,t){try{return e&&e.length?Promise.resolve(y(e)).then(function(e){e&&Digit.Utils.downloadPDFFromLink(e)}):(alert("No Document exists!"),Promise.resolve())}catch(e){return Promise.reject(e)}},b=function(e){if(0===e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][t]},N=function(e,t,n){var l;return t?n?null!=t&&null!==(l=t.fileStoreId)&&void 0!==l&&l.length?"1 "+e("CS_ACTION_FILEUPLOADED"):e("CS_ACTION_NO_FILEUPLOADED"):t?"1 "+e("CS_ACTION_FILEUPLOADED"):e("CS_ACTION_NO_FILEUPLOADED"):e("CS_ACTION_NO_FILEUPLOADED")},A=function(e){var t=new Date(e);if(function(e){return v(1,arguments),p(e,Date.now())}(t)){var n=new Date;t=new Date(n.getFullYear(),n.getMonth(),n.getDate(),23,59)}return t.getTime()},O=function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59)},w=[{head:"",body:[{type:"form",withoutLabel:!0,component:"EventForm",nextStep:"",route:"",key:"eventData"},{type:"text",label:"EVENTS_DESCRIPTION_LABEL",isMandatory:!0,description:"EVENTS_DESCRIPTION_TEXT",populators:{name:"description",className:"fullWidth",validation:{required:!0,maxLength:500},error:"EVENTS_DESCRIPTION_ERROR_REQUIRED"}},{type:"date",label:"EVENTS_FROM_DATE_LABEL",isMandatory:!0,populators:{name:"fromDate",className:"fullWidth",validation:{required:!0},shouldUpdate:!0,error:"EVENTS_FROM_DATE_ERROR_INVALID"}},(g={type:"form",key:"SelectToDate",withoutLabel:!0,component:"SelectToDate"},g.key="toDate",g),{type:"time",label:"EVENTS_FROM_TIME_LABEL",isMandatory:!0,populators:{name:"fromTime",className:"fullWidth",validation:{required:!0},error:"EVENTS_FROM_TIME_ERROR_REQUIRED"}},{type:"time",label:"EVENTS_TO_TIME_LABEL",isMandatory:!0,populators:{name:"toTime",className:"fullWidth",validation:{required:!0},error:"EVENTS_TO_TIME_ERROR_REQUIRED"}},{type:"text",label:"EVENTS_ADDRESS_LABEL",isMandatory:!0,populators:{name:"address",className:"fullWidth",validation:{required:!0},error:"EVENTS_ADDRESS_ERROR_REQUIRED"}},{type:"component",component:"SelectEventGeolocation",withoutLabel:!0,key:"geoLocation"},{type:"text",label:"EVENTS_ORGANIZER_NAME_LABEL",populators:{name:"organizer",className:"fullWidth",validation:{pattern:/^[A-Za-z ]*$/},error:"EVENTS_ORGANIZER_ERROR"}},{type:"number",label:"EVENTS_ENTRY_FEE_INR_LABEL",populators:{name:"fees",className:"fullWidth",error:"EVENTS_ENTRY_ERROR_REQUIRED"}}]}],L=function(){var e=a.useTranslation().t,o=i.useHistory(),r=Digit.Hooks.useSessionStorage("EMPLOYEE_EVENT_MUTATION_HAPPENED",!1)[1],u=Digit.Hooks.useSessionStorage("EMPLOYEE_EVENT_ERROR_DATA",!1)[2],s=Digit.Hooks.useSessionStorage("EMPLOYEE_EVENT_MUTATION_SUCCESS_DATA",!1)[2];return n.useEffect(function(){r(!1),s(),u()},[]),l.createElement(n.Fragment,null,l.createElement(t.Header,null,e("ES_TITLE_NEW_EVENTS")),l.createElement(t.FormComposer,{config:w,onSubmit:function(e){var t,n,l,a=e.toDate,i=e.fromTime,r=e.toTime,u=e.address,s=e.organizer,d=e.fees,m=e.geoLocation,v=void 0===m?{}:m,E={events:[{source:"WEBAPP",eventType:"EVENTSONGROUND",tenantId:null==e||null===(t=e.tenantId)||void 0===t?void 0:t.code,description:null==e?void 0:e.description,name:null==e?void 0:e.name,eventcategory:null==e||null===(n=e.eventCategory)||void 0===n?void 0:n.code,eventDetails:c({fromDate:new Date(e.fromDate+" "+i).getTime(),toDate:new Date(a+" "+r).getTime(),fromTime:i,toTime:r,address:u,organizer:s,fees:d},v)}]};o.push("/"+(null===(l=window)||void 0===l?void 0:l.contextPath)+"/employee/engagement/event/response",E)},label:e("EVENTS_CREATE_EVENT")}))};function I(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function R(e,t){v(2,arguments);var n=E(e).getTime(),l=I(t);return new Date(n+l)}function x(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function M(e,t){v(2,arguments);var n=E(e),l=E(t),a=n.getTime()-l.getTime();return a<0?-1:a>0?1:a}function P(e){return v(1,arguments),e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function F(e){if(v(1,arguments),!P(e)&&"number"!=typeof e)return!1;var t=E(e);return!isNaN(Number(t))}function U(e,t){v(2,arguments);var n=E(e),l=E(t),a=n.getFullYear()-l.getFullYear(),i=n.getMonth()-l.getMonth();return 12*a+i}function B(e,t){return v(2,arguments),E(e).getTime()-E(t).getTime()}var k={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}};function V(e){return e?k[e]:k.trunc}function H(e){v(1,arguments);var t=E(e);return t.setHours(23,59,59,999),t}function W(e){v(1,arguments);var t=E(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function j(e){v(1,arguments);var t=E(e);return H(t).getTime()===W(t).getTime()}function z(e,t){v(2,arguments);var n,l=E(e),a=E(t),i=M(l,a),o=Math.abs(U(l,a));if(o<1)n=0;else{1===l.getMonth()&&l.getDate()>27&&l.setDate(30),l.setMonth(l.getMonth()-i*o);var r=M(l,a)===-i;j(E(e))&&1===o&&1===M(e,a)&&(r=!1),n=i*(o-Number(r))}return 0===n?0:n}function G(e,t,n){v(2,arguments);var l=B(e,t)/1e3;return V(null==n?void 0:n.roundingMethod)(l)}var Y={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function q(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,l=e.formats[n]||e.formats[e.defaultWidth];return l}}var K={date:q({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:q({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:q({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},X={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Q(e){return function(t,n){var l,a=n||{};if("formatting"===(a.context?String(a.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=a.width?String(a.width):i;l=e.formattingValues[o]||e.formattingValues[i]}else{var r=e.defaultWidth,u=a.width?String(a.width):e.defaultWidth;l=e.values[u]||e.values[r]}return l[e.argumentCallback?e.argumentCallback(t):t]}}function J(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=n.width,a=l&&e.matchPatterns[l]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;var o,r=i[0],u=l&&e.parsePatterns[l]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(u)?$(u,function(e){return e.test(r)}):Z(u,function(e){return e.test(r)});o=e.valueCallback?e.valueCallback(c):c,o=n.valueCallback?n.valueCallback(o):o;var s=t.slice(r.length);return{value:o,rest:s}}}function Z(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function $(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}var ee,te={code:"en-US",formatDistance:function(e,t,n){var l,a=Y[e];return l="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+l:l+" ago":l},formatLong:K,formatRelative:function(e,t,n,l){return X[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),l=n%100;if(l>20||l<10)switch(l%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Q({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Q({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Q({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Q({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Q({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(ee={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(ee.matchPattern);if(!n)return null;var l=n[0],a=e.match(ee.parsePattern);if(!a)return null;var i=ee.valueCallback?ee.valueCallback(a[0]):a[0];i=t.valueCallback?t.valueCallback(i):i;var o=e.slice(l.length);return{value:i,rest:o}}),era:J({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:J({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:J({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:J({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:J({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function ne(e,t){v(2,arguments);var n=I(t);return R(e,-n)}function le(e){v(1,arguments);var t=1,n=E(e),l=n.getUTCDay(),a=(l<t?7:0)+l-t;return n.setUTCDate(n.getUTCDate()-a),n.setUTCHours(0,0,0,0),n}function ae(e){v(1,arguments);var t=E(e),n=t.getUTCFullYear(),l=new Date(0);l.setUTCFullYear(n+1,0,4),l.setUTCHours(0,0,0,0);var a=le(l),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var o=le(i);return t.getTime()>=a.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function ie(e){v(1,arguments);var t=ae(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var l=le(n);return l}function oe(e,t){v(1,arguments);var n=t||{},l=n.locale,a=l&&l.options&&l.options.weekStartsOn,i=null==a?0:I(a),o=null==n.weekStartsOn?i:I(n.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var r=E(e),u=r.getUTCDay(),c=(u<o?7:0)+u-o;return r.setUTCDate(r.getUTCDate()-c),r.setUTCHours(0,0,0,0),r}function re(e,t){v(1,arguments);var n=E(e),l=n.getUTCFullYear(),a=t||{},i=a.locale,o=i&&i.options&&i.options.firstWeekContainsDate,r=null==o?1:I(o),u=null==a.firstWeekContainsDate?r:I(a.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=new Date(0);c.setUTCFullYear(l+1,0,u),c.setUTCHours(0,0,0,0);var s=oe(c,t),d=new Date(0);d.setUTCFullYear(l,0,u),d.setUTCHours(0,0,0,0);var m=oe(d,t);return n.getTime()>=s.getTime()?l+1:n.getTime()>=m.getTime()?l:l-1}function ue(e,t){v(1,arguments);var n=t||{},l=n.locale,a=l&&l.options&&l.options.firstWeekContainsDate,i=null==a?1:I(a),o=null==n.firstWeekContainsDate?i:I(n.firstWeekContainsDate),r=re(e,t),u=new Date(0);u.setUTCFullYear(r,0,o),u.setUTCHours(0,0,0,0);var c=oe(u,t);return c}function ce(e,t){for(var n=e<0?"-":"",l=Math.abs(e).toString();l.length<t;)l="0"+l;return n+l}var se={G:function(e,t,n){var l=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(l,{width:"abbreviated"});case"GGGGG":return n.era(l,{width:"narrow"});case"GGGG":default:return n.era(l,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var l=e.getUTCFullYear();return n.ordinalNumber(l>0?l:1-l,{unit:"year"})}return function(e,t){var n=e.getUTCFullYear(),l=n>0?n:1-n;return ce("yy"===t?l%100:l,t.length)}(e,t)},Y:function(e,t,n,l){var a=re(e,l),i=a>0?a:1-a;return"YY"===t?ce(i%100,2):"Yo"===t?n.ordinalNumber(i,{unit:"year"}):ce(i,t.length)},R:function(e,t){return ce(ae(e),t.length)},u:function(e,t){return ce(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var l=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(l);case"QQ":return ce(l,2);case"Qo":return n.ordinalNumber(l,{unit:"quarter"});case"QQQ":return n.quarter(l,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(l,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(l,{width:"wide",context:"formatting"})}},q:function(e,t,n){var l=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(l);case"qq":return ce(l,2);case"qo":return n.ordinalNumber(l,{unit:"quarter"});case"qqq":return n.quarter(l,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(l,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(l,{width:"wide",context:"standalone"})}},M:function(e,t,n){var l=e.getUTCMonth();switch(t){case"M":case"MM":return function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):ce(n+1,2)}(e,t);case"Mo":return n.ordinalNumber(l+1,{unit:"month"});case"MMM":return n.month(l,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(l,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(l,{width:"wide",context:"formatting"})}},L:function(e,t,n){var l=e.getUTCMonth();switch(t){case"L":return String(l+1);case"LL":return ce(l+1,2);case"Lo":return n.ordinalNumber(l+1,{unit:"month"});case"LLL":return n.month(l,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(l,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(l,{width:"wide",context:"standalone"})}},w:function(e,t,n,l){var a=function(e,t){v(1,arguments);var n=E(e),l=oe(n,t).getTime()-ue(n,t).getTime();return Math.round(l/6048e5)+1}(e,l);return"wo"===t?n.ordinalNumber(a,{unit:"week"}):ce(a,t.length)},I:function(e,t,n){var l=function(e){v(1,arguments);var t=E(e),n=le(t).getTime()-ie(t).getTime();return Math.round(n/6048e5)+1}(e);return"Io"===t?n.ordinalNumber(l,{unit:"week"}):ce(l,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):function(e,t){return ce(e.getUTCDate(),t.length)}(e,t)},D:function(e,t,n){var l=function(e){v(1,arguments);var t=E(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var l=t.getTime(),a=n-l;return Math.floor(a/864e5)+1}(e);return"Do"===t?n.ordinalNumber(l,{unit:"dayOfYear"}):ce(l,t.length)},E:function(e,t,n){var l=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(l,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(l,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(l,{width:"short",context:"formatting"});case"EEEE":default:return n.day(l,{width:"wide",context:"formatting"})}},e:function(e,t,n,l){var a=e.getUTCDay(),i=(a-l.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return ce(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,l){var a=e.getUTCDay(),i=(a-l.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return ce(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){var l=e.getUTCDay(),a=0===l?7:l;switch(t){case"i":return String(a);case"ii":return ce(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(l,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(l,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(l,{width:"short",context:"formatting"});case"iiii":default:return n.day(l,{width:"wide",context:"formatting"})}},a:function(e,t,n){var l=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(l,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(l,{width:"wide",context:"formatting"})}},b:function(e,t,n){var l,a=e.getUTCHours();switch(l=12===a?"noon":0===a?"midnight":a/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(l,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(l,{width:"wide",context:"formatting"})}},B:function(e,t,n){var l,a=e.getUTCHours();switch(l=a>=17?"evening":a>=12?"afternoon":a>=4?"morning":"night",t){case"B":case"BB":case"BBB":return n.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(l,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(l,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var l=e.getUTCHours()%12;return 0===l&&(l=12),n.ordinalNumber(l,{unit:"hour"})}return function(e,t){return ce(e.getUTCHours()%12||12,t.length)}(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):function(e,t){return ce(e.getUTCHours(),t.length)}(e,t)},K:function(e,t,n){var l=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(l,{unit:"hour"}):ce(l,t.length)},k:function(e,t,n){var l=e.getUTCHours();return 0===l&&(l=24),"ko"===t?n.ordinalNumber(l,{unit:"hour"}):ce(l,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):function(e,t){return ce(e.getUTCMinutes(),t.length)}(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):function(e,t){return ce(e.getUTCSeconds(),t.length)}(e,t)},S:function(e,t){return function(e,t){var n=t.length,l=e.getUTCMilliseconds();return ce(Math.floor(l*Math.pow(10,n-3)),t.length)}(e,t)},X:function(e,t,n,l){var a=(l._originalDate||e).getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return me(a);case"XXXX":case"XX":return ve(a);case"XXXXX":case"XXX":default:return ve(a,":")}},x:function(e,t,n,l){var a=(l._originalDate||e).getTimezoneOffset();switch(t){case"x":return me(a);case"xxxx":case"xx":return ve(a);case"xxxxx":case"xxx":default:return ve(a,":")}},O:function(e,t,n,l){var a=(l._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+de(a,":");case"OOOO":default:return"GMT"+ve(a,":")}},z:function(e,t,n,l){var a=(l._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+de(a,":");case"zzzz":default:return"GMT"+ve(a,":")}},t:function(e,t,n,l){return ce(Math.floor((l._originalDate||e).getTime()/1e3),t.length)},T:function(e,t,n,l){return ce((l._originalDate||e).getTime(),t.length)}};function de(e,t){var n=e>0?"-":"+",l=Math.abs(e),a=Math.floor(l/60),i=l%60;if(0===i)return n+String(a);var o=t||"";return n+String(a)+o+ce(i,2)}function me(e,t){return e%60==0?(e>0?"-":"+")+ce(Math.abs(e)/60,2):ve(e,t)}function ve(e,t){var n=t||"",l=e>0?"-":"+",a=Math.abs(e);return l+ce(Math.floor(a/60),2)+n+ce(a%60,2)}function Ee(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}}function fe(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}}var pe={p:fe,P:function(e,t){var n,l=e.match(/(P+)(p+)?/)||[],a=l[1],i=l[2];if(!i)return Ee(e,t);switch(a){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;case"PPPP":default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",Ee(a,t)).replace("{{time}}",fe(i,t))}},ge=["D","DD"],he=["YY","YYYY"];function _e(e){return-1!==ge.indexOf(e)}function Se(e){return-1!==he.indexOf(e)}function ye(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}var Ce=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Te=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,De=/^'([^]*?)'?$/,be=/''/g,Ne=/[a-zA-Z]/;function Ae(e,t,n){v(2,arguments);var l=String(t),a=n||{},i=a.locale||te,o=i.options&&i.options.firstWeekContainsDate,r=null==o?1:I(o),u=null==a.firstWeekContainsDate?r:I(a.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=i.options&&i.options.weekStartsOn,s=null==c?0:I(c),d=null==a.weekStartsOn?s:I(a.weekStartsOn);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!i.localize)throw new RangeError("locale must contain localize property");if(!i.formatLong)throw new RangeError("locale must contain formatLong property");var m=E(e);if(!F(m))throw new RangeError("Invalid time value");var f=x(m),p=ne(m,f),g={firstWeekContainsDate:u,weekStartsOn:d,locale:i,_originalDate:m},h=l.match(Te).map(function(e){var t=e[0];return"p"===t||"P"===t?(0,pe[t])(e,i.formatLong,g):e}).join("").match(Ce).map(function(n){if("''"===n)return"'";var l=n[0];if("'"===l)return Oe(n);var o=se[l];if(o)return!a.useAdditionalWeekYearTokens&&Se(n)&&ye(n,t,e),!a.useAdditionalDayOfYearTokens&&_e(n)&&ye(n,t,e),o(p,n,i.localize,g);if(l.match(Ne))throw new RangeError("Format string contains an unescaped latin alphabet character `"+l+"`");return n}).join("");return h}function Oe(e){return e.match(De)[1].replace(be,"'")}function we(e){return function(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t=t||{})Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}({},e)}function Le(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};v(2,arguments);var l=n.locale||te;if(!l.formatDistance)throw new RangeError("locale must contain formatDistance property");var a=M(e,t);if(isNaN(a))throw new RangeError("Invalid time value");var i,o,r=we(n);r.addSuffix=Boolean(n.addSuffix),r.comparison=a,a>0?(i=E(t),o=E(e)):(i=E(e),o=E(t));var u,c=G(o,i),s=(x(o)-x(i))/1e3,d=Math.round((c-s)/60);if(d<2)return n.includeSeconds?c<5?l.formatDistance("lessThanXSeconds",5,r):c<10?l.formatDistance("lessThanXSeconds",10,r):c<20?l.formatDistance("lessThanXSeconds",20,r):c<40?l.formatDistance("halfAMinute",null,r):l.formatDistance(c<60?"lessThanXMinutes":"xMinutes",1,r):0===d?l.formatDistance("lessThanXMinutes",1,r):l.formatDistance("xMinutes",d,r);if(d<45)return l.formatDistance("xMinutes",d,r);if(d<90)return l.formatDistance("aboutXHours",1,r);if(d<1440){var m=Math.round(d/60);return l.formatDistance("aboutXHours",m,r)}if(d<2520)return l.formatDistance("xDays",1,r);if(d<43200){var f=Math.round(d/1440);return l.formatDistance("xDays",f,r)}if(d<86400)return u=Math.round(d/43200),l.formatDistance("aboutXMonths",u,r);if((u=z(o,i))<12){var p=Math.round(d/43200);return l.formatDistance("xMonths",p,r)}var g=u%12,h=Math.floor(u/12);return g<3?l.formatDistance("aboutXYears",h,r):g<9?l.formatDistance("overXYears",h,r):l.formatDistance("almostXYears",h+1,r)}var Ie=function(){var e,o,r,u,s,d,m,v,E,f=a.useTranslation().t,p=i.useHistory(),g=i.useParams().id,h=Digit.ULBService.getCurrentTenantId(),_=Digit.Hooks.events.useInbox(h,{},{eventTypes:"EVENTSONGROUND",ids:g},{select:function(e){var t;return null==e||null===(t=e.events)||void 0===t?void 0:t[0]}}),S=_.isLoading,y=_.data,C=Digit.Hooks.useSessionStorage("EMPLOYEE_EVENT_MUTATION_HAPPENED",!1)[1],T=Digit.Hooks.useSessionStorage("EMPLOYEE_EVENT_ERROR_DATA",!1)[2],D=Digit.Hooks.useSessionStorage("EMPLOYEE_EVENT_MUTATION_SUCCESS_DATA",!1)[2];if(n.useEffect(function(){C(!1),D(),T()},[]),S)return l.createElement(t.Loader,null);var b={defaultTenantId:null==y?void 0:y.tenantId,name:null==y?void 0:y.name,fromDate:Ae(new Date(null==y||null===(e=y.eventDetails)||void 0===e?void 0:e.fromDate),"yyyy-MM-dd"),toDate:Ae(new Date(null==y||null===(o=y.eventDetails)||void 0===o?void 0:o.toDate),"yyyy-MM-dd"),organizer:null==y||null===(r=y.eventDetails)||void 0===r?void 0:r.organizer,fees:null==y||null===(u=y.eventDetails)||void 0===u?void 0:u.fees,description:null==y?void 0:y.description,address:null==y||null===(s=y.eventDetails)||void 0===s?void 0:s.address,category:null==y?void 0:y.eventCategory,fromTime:Ae(new Date(null==y||null===(d=y.eventDetails)||void 0===d?void 0:d.fromDate),"HH:mm"),toTime:Ae(new Date(null==y||null===(m=y.eventDetails)||void 0===m?void 0:m.toDate),"HH:mm"),geoLocation:{latitude:null==y||null===(v=y.eventDetails)||void 0===v?void 0:v.latitude,longitude:null==y||null===(E=y.eventDetails)||void 0===E?void 0:E.longitude}};return l.createElement(n.Fragment,null,l.createElement(t.Header,null,f("ES_TITLE_EDIT_EVENTS")),l.createElement(t.FormComposer,{defaultValues:b,config:w,onSubmit:function(e){var t,n,l,a=e.toDate,i=e.fromTime,o=e.toTime,r=e.address,u=e.organizer,s=e.fees,d=e.geoLocation,m={events:[c({},y,{source:"WEBAPP",status:"ACTIVE",eventType:"EVENTSONGROUND",tenantId:null==e||null===(t=e.tenantId)||void 0===t?void 0:t.code,description:null==e?void 0:e.description,name:null==e?void 0:e.name,eventcategory:null==e||null===(n=e.eventCategory)||void 0===n?void 0:n.code,eventDetails:c({},null==y?void 0:y.eventDetails,{fromDate:new Date(e.fromDate+" "+i).getTime(),toDate:new Date(a+" "+o).getTime(),fromTime:i,toTime:o,address:r,organizer:u,fees:s,latitude:null==d?void 0:d.latitude,longitude:null==d?void 0:d.longitude})})]};p.push("/"+(null===(l=window)||void 0===l?void 0:l.contextPath)+"/employee/engagement/event/response?update=true",m)},label:f("EVENTS_SAVE_CHANGES")}))},Re=function(e){var n,i,o,r=a.useTranslation().t;return l.createElement(t.Banner,{message:r(e.message),applicationNumber:null==e||null===(n=e.data)||void 0===n||null===(i=n.events)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.name,info:r("ENGAGEMENT_EVENT_NAME"),successful:e.isSuccess})},xe=function(e){var o,u,c,s,d,m,v,E,f,p=r.useQueryClient(),g=a.useTranslation().t,h=Digit.Hooks.useQueryParams(),_=(Digit.ULBService.getCurrentTenantId(),Digit.Hooks.events.useCreateEvent()),S=Digit.Hooks.events.useUpdateEvent(),y=(n.useState(!1),e.location.state),C=Digit.Hooks.useSessionStorage("EMPLOYEE_EVENT_MUTATION_HAPPENED",!1),T=C[0],D=C[1],b=Digit.Hooks.useSessionStorage("EMPLOYEE_EVENT_MUTATION_SUCCESS_DATA",!1),N=b[0],A=b[1],O=Digit.Hooks.useSessionStorage("EMPLOYEE_EVENT_ERROR_DATA",!1)[1],w=function(e,t){var n,l,a;O((null==e||null===(n=e.response)||void 0===n||null===(l=n.data)||void 0===l||null===(a=l.Errors[0])||void 0===a?void 0:a.code)||"ERROR"),D(!0)};if(n.useEffect(function(){_.data&&A(_.data)},[_.data]),n.useEffect(function(){S.data&&A(S.data)},[S.data]),n.useEffect(function(){var e=function(){D(!0),p.clear()};return T?function(){p.clear()}:Boolean(null==h?void 0:h.delete)||Boolean(null==h?void 0:h.update)?void S.mutate(y,{onError:w,onSuccess:e}):void _.mutate(y,{onError:w,onSuccess:e})},[]),null!=h&&h.delete||null!=h&&h.update)return S.isLoading||S.isIdle&&!T?l.createElement(t.Loader,null):l.createElement(t.Card,null,l.createElement(Re,{t:g,message:null!=h&&h.update?S.isSuccess||N?"ENGAGEMENT_EVENT_UPDATED":"ENGAGEMENT_EVENT_UPDATED_FAILED":S.isSuccess||N?"ENGAGEMENT_EVENT_DELETED":"ENGAGEMENT_EVENT_DELETED_FAILED",data:S.data||N,isSuccess:(null==S?void 0:S.isSuccess)||N,isLoading:S.isIdle&&!T||S.isLoading}),l.createElement(t.CardText,null,g(null!=h&&h.update?S.isSuccess||N?"ENGAGEMENT_EVENT_UPDATED":"ENGAGEMENT_EVENT_UPDATED_FAILED":S.isSuccess||N?"ENGAGEMENT_EVENT_DELETED":"ENGAGEMENT_EVENT_DELETED_FAILED")),l.createElement(t.ActionBar,null,l.createElement(i.Link,{to:"/"+(null===(f=window)||void 0===f?void 0:f.contextPath)+"/employee"},l.createElement(t.SubmitBar,{label:g("CORE_COMMON_GO_TO_HOME")}))));if(_.isLoading||_.isIdle&&!T)return l.createElement(t.Loader,null);var L=(null==_||null===(o=_.data)||void 0===o||null===(u=o.events)||void 0===u?void 0:u[0])||(null==N||null===(c=N.events)||void 0===c?void 0:c[0])||{};return l.createElement(t.Card,null,l.createElement(Re,{t:g,message:_.isSuccess||N?"ENGAGEMENT_EVENT_CREATED_MESSAGE":"ENGAGEMENT_EVENT_FAILED_MESSAGES",data:_.data||N,isSuccess:_.isSuccess||N,isLoading:_.isIdle&&!T||_.isLoading}),l.createElement(t.CardText,null,_.isSuccess||N?g("ENGAGEMENT_EVENT_CREATED_MESSAGES",{eventName:null==L?void 0:L.name,fromDate:Digit.DateUtils.ConvertTimestampToDate(null==L||null===(s=L.eventDetails)||void 0===s?void 0:s.fromDate),toDate:Digit.DateUtils.ConvertTimestampToDate(null==L||null===(d=L.eventDetails)||void 0===d?void 0:d.toDate),fromTime:_.isSuccess?Ae(new Date(null==L||null===(m=L.eventDetails)||void 0===m?void 0:m.fromDate),"HH:mm"):null,toTime:_.isSuccess?Ae(new Date(null==L||null===(v=L.eventDetails)||void 0===v?void 0:v.toDate),"HH:mm"):null}):null),l.createElement(t.ActionBar,null,l.createElement(i.Link,{to:"/"+(null===(E=window)||void 0===E?void 0:E.contextPath)+"/employee"},l.createElement(t.SubmitBar,{label:g("CORE_COMMON_GO_TO_HOME")}))))},Me=function(e){return l.createElement(t.Table,{t:e.t,data:e.data,columns:e.columns,onSearch:e.onSearch,globalSearch:e.globalSearch,manualGlobalFilter:!0,manualPagination:!0,pageSizeLimit:e.pageSizeLimit,getCellProps:e.getCellProps,totalRecords:e.totalRecords,currentPage:e.currentPage,onNextPage:e.onNextPage,onPrevPage:e.onPrevPage,onPageSizeChange:e.onPageSizeChange})},Pe=function(e){return l.createElement(t.Dropdown,{option:e.ulb,optionKey:"code",selected:e.value,select:e.onAssignmentChange,t:e.t})},Fe=function(e){var n=e.onSearch,a=e.searchFields,i=e.type,r=e.onClose,u=e.isInboxPage,s=e.t,d=o.useForm({defaultValues:e.searchParams}),m=d.handleSubmit,v=d.formState,E=d.reset,f=d.control,p=innerWidth<=640,g=Digit.SessionStorage.get("ENGAGEMENT_TENANTS"),_=(Digit.ULBService.getCurrentTenantId(),Digit.UserService.getUser().info),S=g.filter(function(e){var t;return null==_||null===(t=_.roles)||void 0===t?void 0:t.some(function(t){return(null==t?void 0:t.tenantId)===(null==e?void 0:e.code)})}).sort(h),y=function(){E({ulb:null,eventName:""}),n({ulb:null,eventName:""})},C=function(e){return l.createElement(t.LinkLabel,{style:c({display:"inline"},e?{margin:0}:{}),onClick:y},s("ES_COMMON_CLEAR_SEARCH"))};return l.createElement("form",{onSubmit:m(function(e){n(e),"mobile"===i&&r()})},l.createElement("div",{className:"search-container",style:{width:"auto",marginLeft:u?"24px":"revert"}},l.createElement("div",{className:"search-complaint-container"},("mobile"===i||p)&&l.createElement("div",{className:"complaint-header"},l.createElement("h2",null,s("ES_COMMON_SEARCH_BY")),l.createElement("span",{onClick:r},l.createElement(t.CloseSvg,null))),l.createElement("div",{className:"complaint-input-container for-pt "+(u?"":"for-search"),style:{width:"100%"}},null==a?void 0:a.map(function(e,n){var a,i,r;return l.createElement("div",{key:e.name,className:"input-fields"},l.createElement("span",{className:"mobile-input"},l.createElement(t.Label,null,s(e.label)+" "+(e.isMendatory?"*":"")),function(e){switch(e.type){case"ulb":return l.createElement(o.Controller,{rules:{required:!0},render:function(e){return l.createElement(Pe,{onAssignmentChange:e.onChange,value:e.value,ulb:S,t:s})},name:e.name,control:f,defaultValue:null});default:return l.createElement(o.Controller,{render:function(e){return l.createElement(t.TextInput,{onChange:e.onChange,value:e.value})},name:e.name,control:f,defaultValue:null})}}(e)),null!=v&&null!==(a=v.dirtyFields)&&void 0!==a&&a[e.name]?l.createElement("span",{style:{fontWeight:"700",color:"rgba(212, 53, 28)",paddingLeft:"8px",marginTop:"-20px",fontSize:"12px"},className:"inbox-search-form-error"},null==v||null===(i=v.errors)||void 0===i||null===(r=i[e.name])||void 0===r?void 0:r.message):null)}),"desktop"===i&&!p&&l.createElement("div",{style:{maxWidth:"unset",marginLeft:"unset",marginTop:"55px"},className:"search-submit-wrapper"},l.createElement(t.SubmitBar,{className:"submit-bar-search",label:s("ES_COMMON_SEARCH"),submit:!0}),l.createElement("div",null,C()))))),("mobile"===i||p)&&l.createElement(t.ActionBar,{className:"clear-search-container"},l.createElement("button",{className:"clear-search",style:{flex:1}},C(p)),l.createElement(t.SubmitBar,{disabled:!!Object.keys(v.errors).length,label:s("ES_COMMON_SEARCH"),style:{flex:1},submit:!0})))},Ue=function(e){var n=e.title,o=void 0===n?"EVENTS_EVENTS_HEADER":n,r=e.links,u=e.icon,c=void 0===u?"calender":u,s=a.useTranslation().t;return l.createElement(t.Card,{className:"employeeCard filter inboxLinks"},l.createElement("div",{className:"complaint-links-container"},l.createElement("div",{className:"header",style:{justifyContent:"flex-start"}},l.createElement("span",{className:"logo",style:{backgroundColor:"#fff"}},"calender"===c?l.createElement(t.EventCalendar,null):"survey"===c?"surveyIcon":l.createElement(t.DocumentIcon,null))," ",l.createElement("span",{className:"text"},s(o))),l.createElement("div",{className:"body"},r.map(function(e,t){var n=e.link,a=e.text,o=e.hyperlink;return l.createElement("span",{className:"link",key:t},void 0!==o&&o?l.createElement("a",{href:n},a):l.createElement(i.Link,{to:n},a))}))))},Be=function(e){var n,i,o=e.status,r=e.onAssignmentChange,u=e.searchParams,c=a.useTranslation().t;return l.createElement(t.CheckBox,{onChange:function(e){return r(e,o)},checked:(null==u||null===(n=u.eventStatus)||void 0===n||null===(i=n.filter(function(e){return e===o}))||void 0===i?void 0:i.length)>0,label:c(o),pageType:"employee"})},ke=["ACTIVE","INACTIVE"],Ve=function(e){var t=e.onAssignmentChange,n=e.searchParams,i=a.useTranslation();return l.createElement("div",{className:"status-container"},l.createElement("div",{className:"filter-label"},(0,i.t)("ES_INBOX_STATUS")),null==ke?void 0:ke.map(function(e,a){return l.createElement(Be,{key:a,status:e,onAssignmentChange:t,searchParams:n})}))},He=function(e){var i,o=e.type,r=void 0===o?"desktop":o,u=e.onClose,s=e.onFilterChange,d=e.searchParams,m=a.useTranslation().t,v=n.useState(function(){return c({},d)}),E=v[0],f=v[1],p=Digit.ULBService.getCurrentTenantId(),g=null==p?void 0:p.split(".")[0],h=Digit.Hooks.useCommonMDMS(g,"mseva",["EventCategories"]),_=h.data,S=function(){f({eventCategory:null,eventStatus:[],range:{startDate:null,endDate:new Date(""),title:""}}),s({eventCategory:null,eventStatus:[],range:{startDate:null,endDate:new Date(""),title:""}}),null==u||u()},y=function(e){f(c({},E,e))};return h.isLoading?l.createElement(t.Loader,null):l.createElement("div",{className:"filter"},l.createElement("div",{className:"filter-card"},l.createElement("div",{className:"heading"},l.createElement("div",{className:"filter-label"},m("ES_COMMON_FILTER_BY"),":"),l.createElement("div",{className:"clearAll",onClick:S},m("ES_COMMON_CLEAR_ALL")),"desktop"===r&&l.createElement("span",{className:"clear-search",onClick:S},l.createElement(t.RefreshIcon,null)),"mobile"===r&&l.createElement("span",{onClick:u},l.createElement(t.CloseSvg,null))),l.createElement("div",{className:"filter-label"},""+m("EVENTS_CATEGORY_LABEL")),l.createElement(t.Dropdown,{option:null==_||null===(i=_.mseva)||void 0===i?void 0:i.EventCategories,optionKey:"code",t:m,selected:null==E?void 0:E.eventCategory,select:function(e){return y({eventCategory:e})}}),l.createElement(t.DateRange,{t:m,values:null==E?void 0:E.range,onFilterChange:y,labelClass:"filter-label"}),l.createElement("div",null,l.createElement(Ve,{onAssignmentChange:function(e,t){var n;y(e.target.checked?{eventStatus:[].concat((null==E?void 0:E.eventStatus)||[],[t])}:{eventStatus:null==E||null===(n=E.eventStatus)||void 0===n?void 0:n.filter(function(e){return e!==t})})},searchParams:E})),l.createElement("div",null,l.createElement(t.SubmitBar,{style:{width:"100%"},onSubmit:function(){return s(E),void(null==u||u())},label:m("ES_COMMON_APPLY")}))))},We=function(e){return l.createElement("span",{className:""},e)},je=function(e){var n,a=e.isLoading,o=e.data,r=e.t,u=e.onSearch,c=e.parentRoute,s=e.title,d=e.iconName,m=e.links,v=e.globalSearch,E=e.searchFields,f=e.searchParams,p=e.onFilterChange,g=e.pageSizeLimit,h=e.totalRecords,_=e.currentPage,S=e.onNextPage,y=e.onPrevPage,C=e.onPageSizeChange,T=l.useMemo(function(){return[{Header:r("EVENTS_EVENT_NAME_LABEL"),accessor:"name",Cell:function(e){var t=e.row;return l.createElement("div",null,l.createElement("span",{className:"link"},l.createElement(i.Link,{to:c+"/event/inbox/event-details/"+t.original.id},t.original.name)))}},{Header:r("EVENTS_EVENT_CATEGORY_LABEL"),accessor:function(e){return We(null!=e&&e.eventCategory?r("MSEVA_EVENTCATEGORIES_"+(null==e?void 0:e.eventCategory)):"")}},{Header:r("EVENTS_START_DATE_LABEL"),accessor:function(e){var t,n;return null!=e&&null!==(t=e.eventDetails)&&void 0!==t&&t.fromDate?We(Ae(new Date(null==e||null===(n=e.eventDetails)||void 0===n?void 0:n.fromDate),"dd/MM/yyyy")):""}},{Header:r("EVENTS_END_DATE_LABEL"),accessor:function(e){var t,n;return null!=e&&null!==(t=e.eventDetails)&&void 0!==t&&t.toDate?We(Ae(new Date(null==e||null===(n=e.eventDetails)||void 0===n?void 0:n.toDate),"dd/MM/yyyy")):""}},{Header:r("EVENTS_POSTEDBY_LABEL"),accessor:function(e){var t;return We((null==e||null===(t=e.user)||void 0===t?void 0:t.name)||"")}},{Header:r("EVENTS_STATUS_LABEL"),accessor:function(e){return t=r(null==e?void 0:e.status),l.createElement("span","Active"===t?{className:"sla-cell-success"}:{className:"sla-cell-error"},t);var t}}]});return a?n=l.createElement(t.Loader,null):(null==o?void 0:o.length)>0&&(n=l.createElement(Me,{t:r,data:o,columns:T,globalSearch:v,onSearch:f,pageSizeLimit:g,totalRecords:h,currentPage:_,onNextPage:S,onPrevPage:y,onPageSizeChange:C,getCellProps:function(e){return{style:{minWidth:e.column.Header===r("ES_INBOX_APPLICATION_NO")?"240px":"",padding:"20px 18px",fontSize:"16px"}}}})),l.createElement("div",{className:"inbox-container"},l.createElement("div",{className:"filters-container"},l.createElement(Ue,{title:s,icon:d,links:m}),l.createElement("div",null,l.createElement(He,{onFilterChange:p,searchParams:f}))),l.createElement("div",{style:{flex:1}},l.createElement(Fe,{t:r,onSearch:u,type:"desktop",searchFields:E,isInboxPage:!0,searchParams:f}),l.createElement("div",{className:"result",style:{marginLeft:"24px",flex:1}},n)))},ze=function(e){var a=e.searchFields,o=e.searchParams,r=e.onFilterChange,u=e.onSearch,c=e.t,s=e.data,d=e.serviceRequestIdKey,m=n.useState(""),v=m[0],E=m[1],f=n.useState(!1),p=f[0],g=f[1],h=n.useState(o),_=h[0],S=h[1];Digit.ULBService.getCurrentTenantId(),i.useHistory(),n.useEffect(function(){v&&g(!0)},[v]);var y,C=function(){g(!1),S(o)};if(0===(null==s?void 0:s.length))y=l.createElement(t.Card,{style:{marginTop:20}},c("ES_NO_EVENTS").split("\\n").map(function(e,t){return l.createElement("p",{key:t,style:{textAlign:"center"}},e)}));else if(s&&(null==s?void 0:s.length)>0){var T;y=l.createElement(t.DetailsCard,{data:s,linkPrefix:"/"+(null===(T=window)||void 0===T?void 0:T.contextPath)+"/employee/engagement/event/inbox/event-details/",serviceRequestIdKey:d})}return l.createElement(l.Fragment,null,l.createElement("div",{className:"searchBox"},u&&l.createElement(t.SearchAction,{text:"SEARCH",handleActionClick:function(){E("SEARCH"),g(!0)}}),l.createElement(t.FilterAction,{text:"FILTER",handleActionClick:function(){E("FILTER"),g(!0)}})),y,p&&l.createElement(t.PopUp,null,"FILTER"===v&&l.createElement("div",{className:"popup-module"},l.createElement(He,{onFilterChange:r,onClose:C,onSearch:u,type:"mobile",searchParams:_})),"SEARCH"===v&&l.createElement("div",{className:"popup-module"},l.createElement(Fe,{t:c,type:"mobile",onClose:C,onSearch:u,searchParams:o,searchFields:a}))))},Ge=function(e){var t=e.data,n=e.t,a=e.searchFields,i=e.searchParams,o=e.onFilterChange,r=e.onSearch,u=e.isLoading;return l.createElement("div",{style:{padding:0}},l.createElement("div",{className:"inbox-container"},l.createElement("div",{className:"filters-container"},l.createElement(Ue,{title:e.title,icon:e.iconName,links:e.links}),l.createElement(ze,{t:n,data:null==t?void 0:t.filter(function(e){var t,n,l,a,o,r,u,c,s,d,m,v,E;return(!((null==i||null===(t=i.eventStatus)||void 0===t?void 0:t.length)>0)||(null==i||null===(n=i.eventStatus)||void 0===n?void 0:n.includes(e.status)))&&(null==i||!i.eventName||(null===(l=e.name)||void 0===l?void 0:l.toUpperCase().startsWith(null==i||null===(a=i.eventName)||void 0===a?void 0:a.toUpperCase())))&&(null==i||null===(o=i.ulb)||void 0===o||!o.code||e.tenantId===(null==i||null===(r=i.ulb)||void 0===r?void 0:r.code))&&(null==i||!i.eventCategory||e.eventCategory===(null==i||null===(u=i.eventCategory)||void 0===u?void 0:u.code))&&(!F(null==i||null===(c=i.range)||void 0===c?void 0:c.startDate)||(null===(s=e.eventDetails)||void 0===s?void 0:s.fromDate)>=new Date(null==i||null===(d=i.range)||void 0===d?void 0:d.startDate).getTime())&&(!F(null==i||null===(m=i.range)||void 0===m?void 0:m.endDate)||(null===(v=e.eventDetails)||void 0===v?void 0:v.toDate)<=new Date(null==i||null===(E=i.range)||void 0===E?void 0:E.endDate).getTime())}).map(function(e){var t,a,i,o,r;return(o={}).applicationNo=null==e?void 0:e.id,o[n("EVENTS_EVENT_NAME_LABEL")]=null==e?void 0:e.name,o[n("EVENTS_EVENT_CATEGORY_LABEL")]=n("MSEVA_EVENTCATEGORIES_"+(null==e?void 0:e.eventCategory)),o[n("EVENTS_START_DATE_LABEL")]=Ae(new Date(null==e||null===(t=e.eventDetails)||void 0===t?void 0:t.fromDate),"dd/MM/yyyy"),o[n("EVENTS_END_DATE_LABEL")]=Ae(new Date(null==e||null===(a=e.eventDetails)||void 0===a?void 0:a.toDate),"dd/MM/yyyy"),o[n("EVENTS_POSTEDBY_LABEL")]=null==e||null===(i=e.user)||void 0===i?void 0:i.name,o[n("EVENTS_STATUS_LABEL")]=(r=n(null==e?void 0:e.status),l.createElement("span","Active"===r?{className:"sla-cell-success"}:{className:"sla-cell-error"},r)),o}),onFilterChange:o,isLoading:u,onSearch:r,searchParams:i,searchFields:a,serviceRequestIdKey:"applicationNo"}))))},Ye=function(e){var i,o,r,u=e.tenants,s=e.parentRoute,d=a.useTranslation().t;Digit.SessionStorage.set("ENGAGEMENT_TENANTS",u);var m=Digit.ULBService.getCurrentTenantId(),v=n.useState(10),E=v[0],f=v[1],p=n.useState(0),g=p[0],h=p[1],_=n.useState({eventStatus:[],range:{startDate:null,endDate:new Date(""),title:""},ulb:null==u?void 0:u.find(function(e){return(null==e?void 0:e.code)===m})}),S=_[0],y=_[1],C=window.Digit.Utils.browser.isMobile(),T=function(){return[{label:d("EVENTS_ULB_LABEL"),name:"ulb",type:"ulb"},{label:d("EVENTS_NAME_LABEL"),name:"eventName"}]},D=[{text:d("ES_TITLE_NEW_EVENTS"),link:"/"+(null===(i=window)||void 0===i?void 0:i.contextPath)+"/employee/engagement/event/inbox/new-event"}],b=Digit.Hooks.events.useInbox(null==S||null===(o=S.ulb)||void 0===o?void 0:o.code,{},{eventTypes:"EVENTSONGROUND",limit:E,offset:g},{select:function(e){return{events:null==e?void 0:e.events,totalCount:null==e?void 0:e.totalCount}}}),N=b.data,A=b.isLoading,O=function(e){var t=c({},e);null!=e&&e.ulb||(t=c({},e,{ulb:{code:m}})),y(c({},S,t))},w=function(e){y(c({},S,e))},L=n.useCallback(function(){h(function(e){return parseInt(e)+parseInt(E)})},[E]),I=n.useCallback(function(){h(function(e){return parseInt(e)-parseInt(E)})},[E]);return C?l.createElement(Ge,{data:null==N?void 0:N.events,searchParams:S,searchFields:T(),t:d,onFilterChange:w,onSearch:O,isLoading:A,title:"EVENTS_EVENTS_HEADER",iconName:"calender",links:D}):l.createElement("div",null,l.createElement(t.Header,null,d("EVENTS_EVENTS_HEADER"),Number(null==N?void 0:N.totalCount)?l.createElement("p",{className:"inbox-count"},Number(null==N?void 0:N.totalCount)):null),l.createElement(je,((r={t:d,data:null==N?void 0:N.events,links:D,parentRoute:s,searchParams:S,onSearch:O,globalSearch:function(e,t){return null==e?void 0:e.filter(function(e){var t,n,l,a,i,o,r,u,c,s,d,m,v,E;return(!((null==S||null===(t=S.eventStatus)||void 0===t?void 0:t.length)>0)||(null==S||null===(n=S.eventStatus)||void 0===n?void 0:n.includes(null===(l=e.original)||void 0===l?void 0:l.status)))&&(null==S||!S.eventName||(null===(a=e.original)||void 0===a||null===(i=a.name)||void 0===i?void 0:i.toUpperCase().startsWith(null==S?void 0:S.eventName.toUpperCase())))&&(null==S||null===(o=S.ulb)||void 0===o||!o.code||e.original.tenantId===(null==S||null===(r=S.ulb)||void 0===r?void 0:r.code))&&(null==S||!S.eventCategory||e.original.eventCategory===(null==S||null===(u=S.eventCategory)||void 0===u?void 0:u.code))&&(!F(null==S||null===(c=S.range)||void 0===c?void 0:c.startDate)||(null===(s=e.original.eventDetails)||void 0===s?void 0:s.fromDate)>=new Date(null==S||null===(d=S.range)||void 0===d?void 0:d.startDate).getTime())&&(!F(null==S||null===(m=S.range)||void 0===m?void 0:m.endDate)||(null===(v=e.original.eventDetails)||void 0===v?void 0:v.toDate)<=new Date(null==S||null===(E=S.range)||void 0===E?void 0:E.endDate).getTime())})},searchFields:T(),onFilterChange:w,pageSizeLimit:E,totalRecords:null==N?void 0:N.totalCount,title:"EVENTS_EVENTS_HEADER",iconName:"calender"}).links=D,r.currentPage=parseInt(g/E),r.onNextPage=L,r.onPrevPage=I,r.onPageSizeChange=function(e){f(function(t){return e.target.value})},r)))},qe=function(e){return l.createElement(t.Table,{t:e.t,data:e.data,columns:e.columns,onSearch:e.onSearch,globalSearch:e.globalSearch,manualGlobalFilter:!0,manualPagination:!0,pageSizeLimit:e.pageSizeLimit,getCellProps:e.getCellProps,totalRecords:e.totalRecords,currentPage:e.currentPage,onNextPage:e.onNextPage,onPrevPage:e.onPrevPage,onPageSizeChange:e.onPageSizeChange})},Ke=function(e){return l.createElement(t.Dropdown,{option:e.ulb,optionKey:"code",selected:e.value,select:e.onAssignmentChange,t:e.t})},Xe=function(e){var n=e.onSearch,a=e.searchFields,i=e.type,r=e.onClose,u=e.isInboxPage,s=e.t,d=o.useForm({defaultValues:e.searchParams}),m=d.handleSubmit,v=d.formState,E=d.reset,f=d.control,p=innerWidth<=640,g=Digit.SessionStorage.get("ENGAGEMENT_TENANTS"),_=Digit.UserService.getUser().info,S=g.filter(function(e){var t;return null==_||null===(t=_.roles)||void 0===t?void 0:t.some(function(t){return(null==t?void 0:t.tenantId)===(null==e?void 0:e.code)})}).sort(h),y=function(){E({ulb:null,name:""}),n({ulb:null,name:""})},C=function(e){return l.createElement(t.LinkLabel,{style:c({display:"inline"},e?{margin:0}:{}),onClick:y},s("ES_COMMON_CLEAR_SEARCH"))};return l.createElement("form",{onSubmit:m(function(e){n(e),"mobile"===i&&r()})},l.createElement("div",{className:"search-container",style:{width:"auto",marginLeft:u?"24px":"revert"}},l.createElement("div",{className:"search-complaint-container"},("mobile"===i||p)&&l.createElement("div",{className:"complaint-header"},l.createElement("h2",null,s("ES_COMMON_SEARCH_BY")),l.createElement("span",{onClick:r},l.createElement(t.CloseSvg,null))),l.createElement("div",{className:"complaint-input-container for-pt "+(u?"":"for-search"),style:{width:"100%"}},null==a?void 0:a.map(function(e,n){var a,i,r;return l.createElement("div",{key:e.name,className:"input-fields"},l.createElement("span",{className:"mobile-input"},l.createElement(t.Label,null,s(e.label)+" "+(e.isMendatory?"*":"")),function(e){switch(e.type){case"ulb":return l.createElement(o.Controller,{rules:{required:!0},render:function(e){return l.createElement(Ke,{onAssignmentChange:e.onChange,value:e.value,ulb:S,t:s})},name:e.name,control:f,defaultValue:null});case"range":return l.createElement(o.Controller,{render:function(e){var n=e.onChange;return l.createElement(t.DateRange,{t:s,values:e.value,onFilterChange:function(e){return n(e.range)},labelClass:"filter-label"})},name:e.name,control:f,defaultValue:null});default:return l.createElement(o.Controller,{render:function(e){return l.createElement(t.TextInput,{onChange:e.onChange,value:e.value})},name:e.name,control:f,defaultValue:null})}}(e)),null!=v&&null!==(a=v.dirtyFields)&&void 0!==a&&a[e.name]?l.createElement("span",{style:{fontWeight:"700",color:"rgba(212, 53, 28)",paddingLeft:"8px",marginTop:"-20px",fontSize:"12px"},className:"inbox-search-form-error"},null==v||null===(i=v.errors)||void 0===i||null===(r=i[e.name])||void 0===r?void 0:r.message):null)}),"desktop"===i&&!p&&l.createElement("div",{style:{maxWidth:"unset",marginLeft:"unset",marginTop:"55px"},className:"search-submit-wrapper"},l.createElement(t.SubmitBar,{className:"submit-bar-search",label:s("ES_COMMON_SEARCH"),submit:!0}),l.createElement("div",null,C()))))),("mobile"===i||p)&&l.createElement(t.ActionBar,{className:"clear-search-container"},l.createElement("button",{className:"clear-search",style:{flex:1}},C(p)),l.createElement(t.SubmitBar,{disabled:!!Object.keys(v.errors).length,label:s("ES_COMMON_SEARCH"),style:{flex:1},submit:!0})))},Qe=function(e){var n=e.title,o=void 0===n?"CS_HEADER_PUBLIC_BRDCST":n,r=e.links,u=a.useTranslation().t;return l.createElement(t.Card,{className:"employeeCard filter inboxLinks"},l.createElement("div",{className:"complaint-links-container"},l.createElement("div",{className:"header",style:{justifyContent:"flex-start"}},l.createElement("span",{className:"logo",style:{backgroundColor:"#fff"}},l.createElement(t.PMBIcon,null))," ",l.createElement("span",{className:"text"},u(o))),l.createElement("div",{className:"body"},r.map(function(e,t){var n=e.link,a=e.text,o=e.hyperlink;return l.createElement("span",{className:"link",key:t},void 0!==o&&o?l.createElement("a",{href:n},a):l.createElement(i.Link,{to:n},a))}))))},Je=function(e){var n,i,o=e.status,r=e.onAssignmentChange,u=e.searchParams,c=a.useTranslation().t;return l.createElement(t.CheckBox,{onChange:function(e){return r(e,o)},checked:(null==u||null===(n=u.eventStatus)||void 0===n||null===(i=n.filter(function(e){return e===o}))||void 0===i?void 0:i.length)>0,label:c(o),pageType:"employee"})},Ze=["ACTIVE","INACTIVE"],$e=function(e){var t=e.onAssignmentChange,n=e.searchParams,i=a.useTranslation();return l.createElement("div",{className:"status-container"},l.createElement("div",{className:"filter-label"},(0,i.t)("ES_INBOX_STATUS")),null==Ze?void 0:Ze.map(function(e,a){return l.createElement(Je,{key:a,status:e,onAssignmentChange:t,searchParams:n})}))},et=function(e){var i=e.type,o=void 0===i?"desktop":i,r=e.onClose,u=e.onFilterChange,s=e.searchParams,d=a.useTranslation().t,m=n.useState(function(){return c({},s)}),v=m[0],E=m[1],f=Digit.ULBService.getCurrentTenantId(),p=null==f?void 0:f.split(".")[0],g=Digit.Hooks.useCommonMDMS(p,"mseva",["EventCategories"]).isLoading,h=function(){E({eventCategory:null,eventStatus:[],range:{startDate:null,endDate:new Date(""),title:""}}),u({eventCategory:null,eventStatus:[],range:{startDate:null,endDate:new Date(""),title:""}}),null==r||r()},_=n.useCallback(function(e){E(function(t){return c({},t,e)})},[]);return g?l.createElement(t.Loader,null):l.createElement("div",{className:"filter"},l.createElement("div",{className:"filter-card"},l.createElement("div",{className:"heading"},l.createElement("div",{className:"filter-label"},d("ES_COMMON_FILTER_BY"),":"),l.createElement("div",{className:"clearAll",onClick:h},d("ES_COMMON_CLEAR_ALL")),"desktop"===o&&l.createElement("span",{className:"clear-search",onClick:h},l.createElement(t.RefreshIcon,null)),"mobile"===o&&l.createElement("span",{onClick:r},l.createElement(t.CloseSvg,null))),l.createElement(t.DateRange,{t:d,values:null==v?void 0:v.range,onFilterChange:_,labelClass:"filter-label"}),l.createElement("div",null,l.createElement($e,{onAssignmentChange:function(e,t){var n;_(e.target.checked?{eventStatus:[].concat((null==v?void 0:v.eventStatus)||[],[t])}:{eventStatus:null==v||null===(n=v.eventStatus)||void 0===n?void 0:n.filter(function(e){return e!==t})})},searchParams:v})),l.createElement("div",null,l.createElement(t.SubmitBar,{style:{width:"100%"},onSubmit:function(){return u(v),void(null==r||r())},label:d("ES_COMMON_APPLY")}))))},tt=function(e){return l.createElement("span",{className:""},e)},nt=function(e){var n,a=e.isLoading,o=e.data,r=e.t,u=e.onSearch,c=e.parentRoute,s=e.title,d=e.iconName,m=e.links,v=e.globalSearch,E=e.searchFields,f=e.searchParams,p=e.onFilterChange,g=e.pageSizeLimit,h=e.totalRecords,_=e.currentPage,S=e.onNextPage,y=e.onPrevPage,C=e.onPageSizeChange,T=l.useMemo(function(){return[{Header:r("EVENTS_MESSAGE_LABEL"),accessor:"name",Cell:function(e){var t=e.row;return l.createElement("div",null,l.createElement("span",{className:"link"},l.createElement(i.Link,{to:c+"/messages/inbox/details/"+t.original.id},t.original.name)))}},{Header:r("EVENTS_POSTING_DATE_LABEL"),accessor:function(e){var t,n;return null!=e&&null!==(t=e.auditDetails)&&void 0!==t&&t.createdTime?tt(Ae(new Date(null==e||null===(n=e.auditDetails)||void 0===n?void 0:n.createdTime),"dd/MM/yyyy")):""}},{Header:r("EVENTS_START_DATE_LABEL"),accessor:function(e){var t,n;return null!=e&&null!==(t=e.eventDetails)&&void 0!==t&&t.fromDate?tt(Ae(new Date(null==e||null===(n=e.eventDetails)||void 0===n?void 0:n.fromDate),"dd/MM/yyyy")):""}},{Header:r("EVENTS_END_DATE_LABEL"),accessor:function(e){var t,n;return null!=e&&null!==(t=e.eventDetails)&&void 0!==t&&t.toDate?tt(Ae(new Date(null==e||null===(n=e.eventDetails)||void 0===n?void 0:n.toDate),"dd/MM/yyyy")):""}},{Header:r("EVENTS_POSTEDBY_LABEL"),accessor:function(e){var t;return tt((null==e||null===(t=e.user)||void 0===t?void 0:t.name)||"")}},{Header:r("EVENTS_STATUS_LABEL"),accessor:function(e){return t=r(null==e?void 0:e.status),l.createElement("span","Active"===t?{className:"sla-cell-success"}:{className:"sla-cell-error"},t);var t}}]});return a?n=l.createElement(t.Loader,null):(null==o?void 0:o.length)>0&&(n=l.createElement(qe,{t:r,data:o,columns:T,globalSearch:v,onSearch:f,pageSizeLimit:g,totalRecords:h,currentPage:_,onNextPage:S,onPrevPage:y,onPageSizeChange:C,getCellProps:function(e){return{style:{minWidth:e.column.Header===r("ES_INBOX_APPLICATION_NO")?"240px":"",padding:"20px 18px",fontSize:"16px"}}}})),l.createElement("div",{className:"inbox-container"},l.createElement("div",{className:"filters-container"},l.createElement(Qe,{title:s,icon:d,links:m}),l.createElement("div",null,l.createElement(et,{onFilterChange:p,searchParams:f}))),l.createElement("div",{style:{flex:1}},l.createElement(Xe,{t:r,onSearch:u,type:"desktop",searchFields:E,isInboxPage:!0,searchParams:f}),l.createElement("div",{className:"result",style:{marginLeft:"24px",flex:1}},n)))},lt=function(e){var a=e.searchFields,o=e.searchParams,r=e.onFilterChange,u=e.onSearch,c=e.t,s=e.data,d=e.responseData,m=n.useState(""),v=m[0],E=m[1],f=n.useState(!1),p=f[0],g=f[1],h=n.useState(o),_=h[0],y=h[1],C=(Digit.ULBService.getCurrentTenantId(),i.useHistory());n.useEffect(function(){v&&g(!0)},[v]);var T,D=function(){g(!1),y(o)};return 0===(null==s?void 0:s.length)?T=l.createElement(t.Card,{style:{marginTop:20}},c("ES_NO_PUBLIC_MESSAGES").split("\\n").map(function(e,t){return l.createElement("p",{key:t,style:{textAlign:"center"}},e)})):s&&(null==s?void 0:s.length)>0&&(T=l.createElement(t.DetailsCard,{data:s,handleSelect:function(){},handleDetailCardClick:function(e){var t,n=null==d?void 0:d.find(function(t){var n;return S(null==t||null===(n=t.user)||void 0===n?void 0:n.name,e["Posted By"])&&S(t.name,e.Title)});n&&C.push("/"+(null===(t=window)||void 0===t?void 0:t.contextPath)+"/employee/engagement/messages/inbox/details/"+(null==n?void 0:n.id))}})),l.createElement(l.Fragment,null,l.createElement("div",{className:"searchBox"},u&&l.createElement(t.SearchAction,{text:"SEARCH",handleActionClick:function(){E("SEARCH"),g(!0)}}),l.createElement(t.FilterAction,{text:"FILTER",handleActionClick:function(){E("FILTER"),g(!0)}})),T,p&&l.createElement(t.PopUp,null,"FILTER"===v&&l.createElement("div",{className:"popup-module"},l.createElement(et,{onFilterChange:r,onClose:D,onSearch:u,type:"mobile",searchParams:_})),"SEARCH"===v&&l.createElement("div",{className:"popup-module"},l.createElement(Xe,{t:c,type:"mobile",onClose:D,onSearch:u,searchParams:o,searchFields:a}))))},at=function(e){var t=e.data,n=e.t,a=e.searchFields,i=e.searchParams,o=e.onFilterChange,r=e.onSearch,u=e.isLoading;return l.createElement("div",{style:{padding:0}},l.createElement("div",{className:"inbox-container"},l.createElement("div",{className:"filters-container"},l.createElement(Qe,{title:e.title,icon:e.iconName,links:e.links}),l.createElement(lt,{t:n,data:null==t?void 0:t.filter(function(e){var t,n,l,a,o,r,u,c,s,d,m,v,E;return(!((null==i||null===(t=i.eventStatus)||void 0===t?void 0:t.length)>0)||(null==i||null===(n=i.eventStatus)||void 0===n?void 0:n.includes(e.status)))&&(null==i||!i.eventName||(null===(l=e.name)||void 0===l?void 0:l.toUpperCase().startsWith(null==i||null===(a=i.eventName)||void 0===a?void 0:a.toUpperCase())))&&(null==i||null===(o=i.ulb)||void 0===o||!o.code||e.tenantId===(null==i||null===(r=i.ulb)||void 0===r?void 0:r.code))&&(null==i||!i.eventCategory||e.eventCategory===(null==i||null===(u=i.eventCategory)||void 0===u?void 0:u.code))&&(!F(null==i||null===(c=i.range)||void 0===c?void 0:c.startDate)||(null===(s=e.eventDetails)||void 0===s?void 0:s.fromDate)>=new Date(null==i||null===(d=i.range)||void 0===d?void 0:d.startDate).getTime())&&(!F(null==i||null===(m=i.range)||void 0===m?void 0:m.endDate)||(null===(v=e.eventDetails)||void 0===v?void 0:v.toDate)<=new Date(null==i||null===(E=i.range)||void 0===E?void 0:E.endDate).getTime())}).map(function(e){var t,a,i,o,r,u;return(r={})[n("PUBLIC_BRDCST_TITLE_LABEL")]=null==e?void 0:e.name,r[n("EVENTS_POSTING_DATE_LABEL")]=Ae(new Date(null==e||null===(t=e.auditDetails)||void 0===t?void 0:t.createdTime),"dd/MM/yyyy"),r[n("EVENTS_START_DATE_LABEL")]=Ae(new Date(null==e||null===(a=e.eventDetails)||void 0===a?void 0:a.fromDate),"dd/MM/yyyy"),r[n("EVENTS_END_DATE_LABEL")]=Ae(new Date(null==e||null===(i=e.eventDetails)||void 0===i?void 0:i.toDate),"dd/MM/yyyy"),r[n("EVENTS_POSTEDBY_LABEL")]=null==e||null===(o=e.user)||void 0===o?void 0:o.name,r[n("EVENTS_STATUS_LABEL")]=(u=n(null==e?void 0:e.status),l.createElement("span","Active"===u?{className:"sla-cell-success"}:{className:"sla-cell-error"},u)),r}),onFilterChange:o,isLoading:u,onSearch:r,searchParams:i,searchFields:a,responseData:t}))))},it=function(e){var i,o,r,u=e.tenants,s=e.parentRoute,d=a.useTranslation().t;Digit.SessionStorage.set("ENGAGEMENT_TENANTS",u);var m=Digit.ULBService.getCurrentTenantId(),v=n.useState(10),E=v[0],f=v[1],p=n.useState(0),g=p[0],h=p[1],_=n.useState({eventStatus:[],name:"",range:{startDate:null,endDate:new Date(""),title:""},ulb:null==u?void 0:u.find(function(e){return(null==e?void 0:e.code)===m})}),S=_[0],y=_[1],C=window.Digit.Utils.browser.isMobile(),T=Digit.Hooks.events.useInbox(null==S||null===(i=S.ulb)||void 0===i?void 0:i.code,{},{status:"ACTIVE,INACTIVE",eventTypes:"BROADCAST",limit:E,offset:g},{select:function(e){return{events:null==e?void 0:e.events,totalCount:null==e?void 0:e.totalCount}}}),D=T.data,b=T.isLoading,N=function(e){var t=c({},e);null!=e&&e.ulb||(t=c({},e,{ulb:{code:m}})),y(function(e){return c({},e,t)})},A=function(e){y(function(t){return c({},t,e)})},O=function(){return[{label:d("EVENTS_ULB_LABEL"),name:"ulb",type:"ulb"},{label:d("EVENTS_MESSAGE_LABEL"),name:"name"}]},w=[{text:d("NEW_PUBLIC_MESSAGE_BUTTON_LABEL"),link:"/"+(null===(o=window)||void 0===o?void 0:o.contextPath)+"/employee/engagement/messages/inbox/create"}],L=n.useCallback(function(){h(function(e){return parseInt(e)+parseInt(E)})},[E]),I=n.useCallback(function(){h(function(e){return parseInt(e)-parseInt(E)})},[E]);return C?l.createElement(at,{data:null==D?void 0:D.events,searchParams:S,searchFields:O(),t:d,onFilterChange:A,onSearch:N,isLoading:b,title:"EVENTS_PUBLIC_MESSAGE_NOTICE_HEADER",iconName:"calender",links:w}):l.createElement("div",null,l.createElement(t.Header,null,d("EVENTS_PUBLIC_MESSAGE_NOTICE_HEADER"),Number(null==D?void 0:D.length)?l.createElement("p",{className:"inbox-count"},Number(null==D?void 0:D.length)):null),l.createElement(nt,((r={t:d,data:null==D?void 0:D.events,links:w,parentRoute:s,searchParams:S,onSearch:N,globalSearch:function(e,t){return null==e?void 0:e.filter(function(e){var t,n,l,a,i,o,r,u,c,s,d,m,v,E;return(!((null==S||null===(t=S.eventStatus)||void 0===t?void 0:t.length)>0)||(null==S||null===(n=S.eventStatus)||void 0===n?void 0:n.includes(null===(l=e.original)||void 0===l?void 0:l.status)))&&(null==S||!S.name||(null===(a=e.original)||void 0===a||null===(i=a.name)||void 0===i?void 0:i.toUpperCase().startsWith(null==S?void 0:S.name.toUpperCase())))&&(null==S||null===(o=S.ulb)||void 0===o||!o.code||e.original.tenantId===(null==S||null===(r=S.ulb)||void 0===r?void 0:r.code))&&(null==S||!S.eventCategory||e.original.eventCategory===(null==S||null===(u=S.eventCategory)||void 0===u?void 0:u.code))&&(!F(null==S||null===(c=S.range)||void 0===c?void 0:c.startDate)||(null===(s=e.original.eventDetails)||void 0===s?void 0:s.fromDate)>=new Date(null==S||null===(d=S.range)||void 0===d?void 0:d.startDate).getTime())&&(!F(null==S||null===(m=S.range)||void 0===m?void 0:m.endDate)||(null===(v=e.original.eventDetails)||void 0===v?void 0:v.toDate)<=new Date(null==S||null===(E=S.range)||void 0===E?void 0:E.endDate).getTime())})},searchFields:O(),onFilterChange:A,pageSizeLimit:E,totalRecords:null==D?void 0:D.totalCount,currentPage:parseInt(g/E),onNextPage:L,onPrevPage:I,onPageSizeChange:function(e){f(function(t){return e.target.value})},title:"EVENTS_PUBLIC_MESSAGE_NOTICE_HEADER"}).links=w,r.isLoading=b,r)))},ot=[{head:"",body:[{type:"form",withoutLabel:!0,component:"MessageForm",nextStep:"",route:"",key:"messageData"}]}],rt=function(){var e=a.useTranslation().t,o=i.useHistory(),r=Digit.Hooks.useSessionStorage("EMPLOYEE_MSG_MUTATION_HAPPENED",!1)[1],u=Digit.Hooks.useSessionStorage("EMPLOYEE_MSG_ERROR_DATA",!1)[2],c=Digit.Hooks.useSessionStorage("EMPLOYEE_MSG_MUTATION_SUCCESS_DATA",!1)[2];return n.useEffect(function(){r(!1),c(),u()},[]),l.createElement(n.Fragment,null,l.createElement(t.Header,null,e("ADD_NEW_PUBLIC_MESSAGE")),l.createElement(t.FormComposer,{config:ot,onSubmit:function(e){var t,n,l,a,i=e.toDate,r={events:[{recepient:null,source:"WEBAPP",eventType:"BROADCAST",tenantId:null==e||null===(t=e.tenantId)||void 0===t?void 0:t.code,description:e.description,name:e.name,eventDetails:{documents:e.documents,fromDate:null===(n=O(new Date(""+e.fromDate)))||void 0===n?void 0:n.getTime(),toDate:null===(l=O(new Date(""+i)))||void 0===l?void 0:l.getTime()}}]};o.push("/"+(null===(a=window)||void 0===a?void 0:a.contextPath)+"/employee/engagement/messages/response",r)},label:e("ACTION_ADD_NEW_MESSAGE")}))},ut=function(e){var n,i,o,r=a.useTranslation();return l.createElement(t.Banner,{message:(0,r.t)(e.message),applicationNumber:null==e||null===(n=e.data)||void 0===n||null===(i=n.events)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.name,successful:e.isSuccess})},ct=function(e){var o,u=r.useQueryClient(),c=a.useTranslation().t,s=Digit.Hooks.useQueryParams(),d=(Digit.ULBService.getCurrentTenantId(),Digit.Hooks.events.useCreateEvent()),m=Digit.Hooks.events.useUpdateEvent(),v=e.location.state,E=Digit.Hooks.useSessionStorage("EMPLOYEE_MSG_MUTATION_HAPPENED",!1),f=E[0],p=E[1],g=Digit.Hooks.useSessionStorage("EMPLOYEE_MSG_MUTATION_SUCCESS_DATA",!1),h=g[0],_=g[1],S=Digit.Hooks.useSessionStorage("EMPLOYEE_MSG_ERROR_DATA",!1)[1];n.useEffect(function(){m.data&&_(m.data)},[m.data]),n.useEffect(function(){d.data&&_(d.data)},[d.data]);var y,C=function(e,t){var n,l,a;S((null==e||null===(n=e.response)||void 0===n||null===(l=n.data)||void 0===l||null===(a=l.Errors[0])||void 0===a?void 0:a.code)||"ERROR"),p(!0)};return n.useEffect(function(){var e=function(){p(!0),u.clear()};if(!f){if(Boolean(null==s?void 0:s.delete)||Boolean(null==s?void 0:s.update))return void m.mutate(v,{onError:C,onSuccess:e});d.mutate(v,{onError:C,onSuccess:e})}},[]),null!=s&&s.delete||null!=s&&s.update?m.isLoading||m.isIdle&&!f?l.createElement(t.Loader,null):l.createElement(t.Card,null,l.createElement(ut,{t:c,message:null!=s&&s.update?m.isSuccess||h?"ENGAGEMENT_PUBLIC_BRDCST_UPDATED":"ENG_PUBLIC_BRDCST_UPDATION_FAILED":m.isSuccess||h?"ENGAGEMENT_PUBLIC_BRDCST_DELETED":"ENGAGEMENT_PUBLIC_BRDCST_DELETION_FAILED",data:m.data||h,isSuccess:(null==m?void 0:m.isSuccess)||h,isLoading:m.isIdle&&!f||m.isLoading}),l.createElement(t.CardText,null,c("ENGAGEMENT_PUBLIC_BRDCST_MESSAGES")),l.createElement(t.ActionBar,null,l.createElement(i.Link,{to:"/"+(null===(y=window)||void 0===y?void 0:y.contextPath)+"/employee"},l.createElement(t.SubmitBar,{label:c("CORE_COMMON_GO_TO_HOME")})))):d.isLoading||d.isIdle&&!f?l.createElement(t.Loader,null):l.createElement(t.Card,null,l.createElement(ut,{t:c,message:d.isSuccess||h?"ENGAGEMENT_BROADCAST_MESSAGE_CREATED":"ENGAGEMENT_BROADCAST_MESSAGE_FAILED",data:d.data||h,isSuccess:d.isSuccess||h,isLoading:d.isIdle&&!f||d.isLoading}),l.createElement(t.ActionBar,null,l.createElement(i.Link,{to:"/"+(null===(o=window)||void 0===o?void 0:o.contextPath)+"/employee"},l.createElement(t.SubmitBar,{label:c("CORE_COMMON_GO_TO_HOME")}))))},st=function(){var e=a.useTranslation().t,o=i.useHistory(),r=i.useParams().id,u=Digit.ULBService.getCurrentTenantId(),s=Digit.Hooks.events.useInbox(u,{},{eventTypes:"BROADCAST",ids:r},{select:function(e){var t;return null==e||null===(t=e.events)||void 0===t?void 0:t[0]}}),d=s.isLoading,m=s.data,v=Digit.Hooks.useSessionStorage("EMPLOYEE_MSG_MUTATION_HAPPENED",!1)[1],E=Digit.Hooks.useSessionStorage("EMPLOYEE_MSG_ERROR_DATA",!1)[2],f=Digit.Hooks.useSessionStorage("EMPLOYEE_MSG_MUTATION_SUCCESS_DATA",!1)[2];n.useEffect(function(){v(!1),f(),E()},[]);var p=n.useMemo(function(){var e,t,n,l=null==m||null===(e=m.eventDetails)||void 0===e?void 0:e.documents;return{name:null==m?void 0:m.name,description:null==m?void 0:m.description,documents:null==l?void 0:l.map(function(e){return[e.fileName,{file:{name:e.fileName,type:e.documentType},fileStoreId:{fileStoreId:e.fileStoreId,tenantId:u}}]}),fromDate:m?Ae(new Date(null==m||null===(t=m.eventDetails)||void 0===t?void 0:t.fromDate),"yyyy-MM-dd"):null,toDate:m?Ae(new Date(null==m||null===(n=m.eventDetails)||void 0===n?void 0:n.toDate),"yyyy-MM-dd"):null}},[m]);return d?l.createElement(t.Loader,null):l.createElement(n.Fragment,null,l.createElement(t.Header,null,e("EDIT_NEW_PUBLIC_MESSAGE")),l.createElement(t.FormComposer,{defaultValues:p,config:ot,onSubmit:function(e){var t,n,l,a=e.fromDate,i=e.toDate,r=e.description,u=e.name,s=e.documents,d=function(e){return!(!e||!e.length||!(Array.isArray(e)&&e.length&&Array.isArray(e[0])))}(s)?(l=s)&&l.length?l.reduce(function(e,t){var n={},l=t[1],a=l.file,i=l.fileStoreId;return n.fileName=null==a?void 0:a.name,n.documentType=null==a?void 0:a.type,n.fileStoreId=null==i?void 0:i.fileStoreId,e.push(n),e},[]):[]:s,v={events:[c({},m,{source:"WEBAPP",status:"ACTIVE",eventType:"BROADCAST",tenantId:null==e||null===(t=e.tenantId)||void 0===t?void 0:t.code,description:r,name:u,eventDetails:{documents:d,fromDate:A(""+a),toDate:A(""+i)}})]};o.push("/"+(null===(n=window)||void 0===n?void 0:n.contextPath)+"/employee/engagement/messages/response?update=true",v)},label:e("ACTION_EDIT_MESSAGE")}))},dt=function(e){return l.createElement("h1",{className:"heading-m"},e.label)},mt=function(){return l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},vt=function(e){return l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(mt,null))},Et=function(e){var a,i,o=e.t,r=e.action,u=e.tenantId,s=e.closeModal,d=e.submitAction,v=e.applicationData,E=e.businessService,f=e.moduleCode,p=Digit.Hooks.useEmployeeSearch(u,{roles:null==r||null===(a=r.assigneeRoles)||void 0===a||null===(i=a.map)||void 0===i?void 0:i.call(a,function(e){return{code:e}}),isActive:!0},{enabled:!(null!=r&&r.isTerminateState)}),g=p.data,h=p.isLoading,_=Digit.Hooks.pt.useMDMS(u,E,"FINANCIAL_YEARLS",{},{details:{tenantId:Digit.ULBService.getStateId(),moduleDetails:[{moduleName:"egf-master",masterDetails:[{name:"FinancialYear",filter:"[?(@.module == 'PT')]"}]}]}}),S=_.isLoading,y=_.data,C=n.useState({}),T=C[0],D=C[1],b=n.useState({})[0],N=n.useState([]),A=N[0],O=N[1],w=n.useState(null),L=w[0],I=w[1],R=n.useState(null),x=R[0],M=R[1],P=n.useState(null),F=P[0],U=P[1],B=n.useState(null)[1],k=n.useState([]),V=k[0],H=k[1],W=n.useState(null),j=W[0],z=W[1];function G(e){M(e.target.files[0])}return n.useState(!1),n.useEffect(function(){var e;y&&y["egf-master"]&&H(null===(e=y["egf-master"])||void 0===e?void 0:e.FinancialYear)},[y]),n.useEffect(function(){var e;O(null==g||null===(e=g.Employees)||void 0===e?void 0:e.map(function(e){var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[g]),n.useEffect(function(){!function(){try{B(null);var e=function(){if(x){var e=function(){if(x.size>=5242880)B(o("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{var e=m(function(){return Promise.resolve(Digit.UploadServices.Filestorage("PT",x,Digit.ULBService.getStateId())).then(function(e){var t,n,l,a;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?U(null==e||null===(l=e.data)||void 0===l||null===(a=l.files[0])||void 0===a?void 0:a.fileStoreId):B(o("CS_FILE_UPLOAD_ERROR"))})},function(){B(o("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[x]),n.useEffect(function(){r&&D(null!=r&&r.showFinancialYearsModal?function(e){var n=e.action,a=e.financialYears,i=e.selectedFinancialYear,o=e.setSelectedFinancialYear;return{label:{heading:"WF_"+n.action+"_APPLICATION",submit:"WF_PT.CREATE_"+n.action,cancel:"ES_PT_COMMON_CANCEL"},form:[{body:[{label:(0,e.t)("ES_PT_FINANCIAL_YEARS"),isMandatory:!0,type:"radio",populators:l.createElement(t.RadioButtons,{options:a,optionsKey:"name",onSelect:o,selectedOption:i})}]}]}}({t:o,action:r,financialYears:V,selectedFinancialYear:j,setSelectedFinancialYear:z}):function(e){var n,a=e.t,i=e.action,o=e.approvers,r=e.selectedApprover,u=e.setSelectedApprover,c=e.selectFile,s=e.uploadedFile,d=e.setUploadedFile;return{label:{heading:"WF_"+(null==i?void 0:i.action)+"_APPLICATION",submit:"WF_"+e.businessService+"_"+(null==i?void 0:i.action),cancel:"ES_PT_COMMON_CANCEL"},form:[{body:[{label:i.isTerminateState||"SENDBACKTOCITIZEN"===(null==i?void 0:i.action)?null:a(e.assigneeLabel||"WF_ROLE_"+(null===(n=i.assigneeRoles)||void 0===n?void 0:n[0])),type:"dropdown",populators:i.isTerminateState||"SENDBACKTOCITIZEN"===(null==i?void 0:i.action)?null:l.createElement(t.Dropdown,{option:o,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:r})},{label:a("ES_PT_ACTION_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:a("ES_PT_ATTACH_FILE")+(i.docUploadRequired?" *":""),populators:l.createElement(t.UploadFile,{id:"workflow-doc",onUpload:c,onDelete:function(){d(null)},showHint:!0,hintText:a("PT_ATTACH_RESTRICTIONS_SIZE"),message:s?"1 "+a("ES_PT_ACTION_FILEUPLOADED"):a("ES_PT_ACTION_NO_FILEUPLOADED")})}]}]}}({t:o,action:r,approvers:A,selectedApprover:L,setSelectedApprover:I,selectFile:G,uploadedFile:F,setUploadedFile:U,businessService:E}))},[r,A,V,j,F]),r&&T.form?l.createElement(t.Modal,{headerBarMain:l.createElement(dt,{label:o(T.label.heading)}),headerBarEnd:l.createElement(vt,{onClick:s}),actionCancelLabel:o(T.label.cancel),actionCancelOnSubmit:s,actionSaveLabel:o(T.label.submit),actionSaveOnSubmit:function(){},isDisabled:r.showFinancialYearsModal?!j:h||(null==r?void 0:r.docUploadRequired)&&!F,formId:"modal-action"},S?l.createElement(t.Loader,null):l.createElement(t.FormComposer,{config:T.form,noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){if(null!=r&&r.showFinancialYearsModal)d({customFunctionToExecute:null==r?void 0:r.customFunctionToExecute,Assessment:{financialYear:null==j?void 0:j.name,propertyId:null==v?void 0:v.propertyId,tenantId:u,source:null==v?void 0:v.source,channel:null==v?void 0:v.channel,assessmentDate:Date.now()}});else{var t={action:null==r?void 0:r.action,comment:null==e?void 0:e.comments,businessService:E,moduleName:f};t.assignes=null!=r&&r.isTerminateState||!L?[]:[L],F&&(t.documents=[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==x?void 0:x.name,fileStoreId:F}]),d({Property:c({},v,{workflow:t})})}},defaultValues:b,formId:"modal-action"})):l.createElement(t.Loader,null)},ft=function(e){return l.createElement("h1",{className:"heading-m"},e.label)},pt=function(){return l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},gt=function(e){return l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(pt,null))},ht=function(e){var a,i,o=e.t,r=e.action,u=e.tenantId,s=e.closeModal,d=e.submitAction,v=e.applicationData,E=e.businessService,f=Digit.Hooks.useEmployeeSearch(u,{roles:null==r||null===(a=r.assigneeRoles)||void 0===a||null===(i=a.map)||void 0===i?void 0:i.call(a,function(e){return{code:e}}),isActive:!0},{enabled:!(null!=r&&r.isTerminateState)}).data,p=Digit.Hooks.pt.useMDMS(u,E,"FINANCIAL_YEARLS",{},{details:{tenantId:Digit.ULBService.getStateId(),moduleDetails:[{moduleName:"egf-master",masterDetails:[{name:"FinancialYear",filter:"[?(@.module == 'TL')]"}]}]}}),g=p.isLoading,h=p.data,_=n.useState({}),S=_[0],y=_[1],C=n.useState({})[0],T=n.useState([]),D=T[0],b=T[1],N=n.useState({}),A=N[0],O=N[1],w=n.useState(null),L=w[0],I=w[1],R=n.useState(null),x=R[0],M=R[1],P=n.useState(null)[1],F=n.useState([]),U=F[0],B=F[1],k=n.useState(null)[0];function V(e){I(e.target.files[0])}return n.useEffect(function(){var e;h&&h["egf-master"]&&B(null===(e=h["egf-master"])||void 0===e?void 0:e.FinancialYear)},[h]),n.useEffect(function(){var e;b(null==f||null===(e=f.Employees)||void 0===e?void 0:e.map(function(e){var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[f]),n.useEffect(function(){!function(){try{P(null);var e=function(){if(L){var e=function(){if(L.size>=5242880)P(o("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{var e=m(function(){return Promise.resolve(Digit.UploadServices.Filestorage("PT",L,Digit.ULBService.getStateId())).then(function(e){var t,n,l,a;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?M(null==e||null===(l=e.data)||void 0===l||null===(a=l.files[0])||void 0===a?void 0:a.fileStoreId):P(o("CS_FILE_UPLOAD_ERROR"))})},function(){P(o("CS_FILE_UPLOAD_ERROR"))});if(e&&e.then)return e.then(function(){})}}();if(e&&e.then)return e.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[L]),n.useEffect(function(){r&&y(function(e){var n=e.t,a=e.action,i=e.approvers,o=e.selectedApprover,r=e.setSelectedApprover,u=e.selectFile,c=e.uploadedFile,s=e.setUploadedFile,d=e.businessService,m=!0;return"SENDBACKTOCITIZEN"!=(null==a?void 0:a.action)&&"APPROVE"!=(null==a?void 0:a.action)||(m=!1),a.isTerminateState&&(m=!1),{label:{heading:"WF_"+(null==a?void 0:a.action)+"_APPLICATION",submit:"WF_"+(null==d?void 0:d.toUpperCase())+"_"+(null==a?void 0:a.action),cancel:"WF_EMPLOYEE_NEWTL_CANCEL"},form:[{body:[{label:m?n("WF_ASSIGNEE_NAME_LABEL"):null,placeholder:m?n("WF_ASSIGNEE_NAME_PLACEHOLDER"):null,type:"dropdown",populators:m?l.createElement(t.Dropdown,{option:i,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:r,selected:o}):null},{label:n("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:n("TL_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),populators:l.createElement(t.UploadFile,{id:"workflow-doc",onUpload:u,onDelete:function(){s(null)},message:c?"1 "+n("ES_PT_ACTION_FILEUPLOADED"):n("CS_ACTION_NO_FILEUPLOADED")})}]}]}}({t:o,action:r,approvers:D,selectedApprover:A,setSelectedApprover:O,selectFile:V,uploadedFile:x,setUploadedFile:M,businessService:E}))},[r,D,U,k,x]),r&&S.form?l.createElement(t.Modal,{headerBarMain:l.createElement(ft,{label:o(S.label.heading)}),headerBarEnd:l.createElement(gt,{onClick:s}),actionCancelLabel:o(S.label.cancel),actionCancelOnSubmit:s,actionSaveLabel:o(S.label.submit),actionSaveOnSubmit:function(){},formId:"modal-action"},g?l.createElement(t.Loader,null):l.createElement(t.FormComposer,{config:S.form,noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){v=c({},v,{action:null==r?void 0:r.action,comment:null==e?void 0:e.comments,assignee:null!=A&&A.uuid?[null==A?void 0:A.uuid]:null,wfDocuments:x?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==L?void 0:L.name,fileStoreId:x}]:null}),d({Licenses:[v]})},defaultValues:C,formId:"modal-action"})):l.createElement(t.Loader,null)},_t=function(e){return l.createElement("h1",{style:{marginLeft:"22px"},className:"heading-m BPAheading-m"},e.label)},St=function(){return l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},yt=function(e){return l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(St,null))},Ct=function(e){var a,i,o=e.t,r=e.action,u=e.tenantId,s=e.closeModal,d=e.submitAction,v=e.applicationData,E=e.businessService,f=Digit.Hooks.useEmployeeSearch(u,{roles:null==r||null===(a=r.assigneeRoles)||void 0===a||null===(i=a.map)||void 0===i?void 0:i.call(a,function(e){return{code:e}}),isActive:!0},{enabled:!(null!=r&&r.isTerminateState)}),p=f.data,g=f.isLoading,h=n.useState({}),_=h[0],S=h[1],y=n.useState({})[0],C=n.useState([]),T=C[0],D=C[1],b=n.useState({}),N=b[0],A=b[1],O=n.useState(null),w=O[0],L=O[1],I=n.useState(null),R=I[0],x=I[1],M=n.useState(null),P=M[0],F=M[1],U=!!Digit.Utils.browser.isMobile();function B(e){L(e.target.files[0])}return n.useEffect(function(){var e;D(null==p||null===(e=p.Employees)||void 0===e?void 0:e.map(function(e){var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[p]),n.useEffect(function(){!function(){try{F(null);var e=function(){if(w){var e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,t=function(){if(w.size>=5242880)F(o("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{var t=function(){if(null!=w&&w.type&&!e.test(null==w?void 0:w.type))F(o("NOT_SUPPORTED_FILE_TYPE"));else{var t=m(function(){return Promise.resolve(Digit.UploadServices.Filestorage("OBPS",w,Digit.ULBService.getStateId()||(null==u?void 0:u.split(".")[0]))).then(function(e){var t,n,l,a;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?x(null==e||null===(l=e.data)||void 0===l||null===(a=l.files[0])||void 0===a?void 0:a.fileStoreId):F(o("CS_FILE_UPLOAD_ERROR"))})},function(){F(o("CS_FILE_UPLOAD_ERROR"))});if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[w]),n.useEffect(function(){r&&S(function(e){var n=e.t,a=e.action,i=e.approvers,o=e.selectedApprover,r=e.setSelectedApprover,u=e.selectFile,c=e.uploadedFile,s=e.setUploadedFile,d=e.businessService,m=e.error,v=!0;return"SENDBACKTOCITIZEN"==(null==a?void 0:a.action)&&(v=!1),a.isTerminateState&&(v=!1),{label:{heading:"WF_"+(null==a?void 0:a.action)+"_APPLICATION",submit:"WF_"+(null==d?void 0:d.toUpperCase())+"_"+(null==a?void 0:a.action),cancel:"WF_EMPLOYEE_BPAREG_CANCEL"},form:[{body:[{label:v?n("WF_ASSIGNEE_NAME_LABEL"):null,placeholder:v?n("WF_ASSIGNEE_NAME_PLACEHOLDER"):null,type:"dropdown",populators:v?l.createElement(t.Dropdown,{option:i,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:r,selected:o}):null},{label:n("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:n("BPA_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),populators:l.createElement(t.UploadFile,{id:"workflow-doc",onUpload:u,onDelete:function(){s(null)},message:c?"1 "+n("ES_PT_ACTION_FILEUPLOADED"):n("CS_ACTION_NO_FILEUPLOADED"),accept:"image/*, .pdf, .png, .jpeg, .jpg",iserror:m})}]}]}}({t:o,action:r,approvers:T,selectedApprover:N,setSelectedApprover:A,selectFile:B,uploadedFile:R,setUploadedFile:x,businessService:E,error:P}))},[r,T,R,P]),r&&_.form?l.createElement(t.Modal,{headerBarMain:l.createElement(_t,{label:o(_.label.heading)}),headerBarEnd:l.createElement(yt,{onClick:s}),actionCancelLabel:o(_.label.cancel),actionCancelOnSubmit:s,actionSaveLabel:o(_.label.submit),actionSaveOnSubmit:function(){},formId:"modal-action",isOBPSFlow:!0,popupStyles:U?{width:"720px"}:{},style:U?{height:"45px",width:"44%"}:{height:"45px",width:"107px",paddingLeft:"0px",paddingRight:"0px"},popupModuleMianStyles:U?{paddingLeft:"5px"}:{}},g?l.createElement(t.Loader,null):l.createElement(t.FormComposer,{config:_.form,cardStyle:{marginLeft:"0px",marginRight:"0px",marginTop:"-25px"},className:"BPAemployeeCard",noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){v=c({},v,{action:null==r?void 0:r.action,comment:null==e?void 0:e.comments,assignee:null!=N&&N.uuid?[null==N?void 0:N.uuid]:null,wfDocuments:R?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==w?void 0:w.name,fileStoreId:R}]:null}),d({Licenses:[v]},!1,{isStakeholder:!0,bpa:!1})},defaultValues:y,formId:"modal-action"})):l.createElement(t.Loader,null)},Tt=function(e){return l.createElement("h1",{style:{marginLeft:"22px"},className:"heading-m BPAheading-m"},e.label)},Dt=function(){return l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},bt=function(e){return l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(Dt,null))},Nt=function(e){var a,i,o,u,s,d,v,E,f,p,g,h,_=e.t,S=e.action,y=e.tenantId,C=e.closeModal,T=e.submitAction,D=e.applicationDetails,b=e.applicationData,N=e.businessService,A=e.workflowDetails,O=(Digit.Hooks.obps.useObpsAPI(null!==(a=b)&&void 0!==a&&null!==(i=a.landInfo)&&void 0!==i&&null!==(o=i.address)&&void 0!==o&&o.city?null===(u=b)||void 0===u||null===(s=u.landInfo)||void 0===s||null===(d=s.address)||void 0===d?void 0:d.city:y,!1),Digit.Hooks.useEmployeeSearch(y,{roles:null==A||null===(v=A.data)||void 0===v||null===(E=v.initialActionState)||void 0===E||null===(f=E.nextActions)||void 0===f||null===(p=f.filter(function(e){return(null==e?void 0:e.action)==(null==S?void 0:S.action)}))||void 0===p||null===(g=p[0])||void 0===g||null===(h=g.assigneeRoles)||void 0===h?void 0:h.map(function(e){return{code:e}}),isActive:!0},{enabled:!(null!=S&&S.isTerminateState)})),w=O.data,L=O.isLoading,I=(r.useQueryClient(),n.useState({})),R=I[0],x=I[1],M=n.useState({})[0],P=n.useState([]),F=P[0],U=P[1],B=n.useState({}),k=B[0],V=B[1],H=n.useState(null),W=H[0],j=H[1],z=n.useState(null),G=z[0],Y=z[1],q=n.useState(null),K=q[0],X=q[1],Q=n.useState(null)[0],J=!!Digit.Utils.browser.isMobile();function Z(e){j(e.target.files[0])}n.useEffect(function(){var e;U(null==w||null===(e=w.Employees)||void 0===e?void 0:e.map(function(e){var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[w]),n.useEffect(function(){!function(){try{X(null);var e=function(){if(W){var e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,t=function(){if(W.size>=5242880)X(_("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{var t=function(){if(null!=W&&W.type&&!e.test(null==W?void 0:W.type))X(_("NOT_SUPPORTED_FILE_TYPE"));else{var t=m(function(){return Promise.resolve(Digit.UploadServices.Filestorage("OBPS",W,Digit.ULBService.getStateId()||(null==y?void 0:y.split(".")[0]))).then(function(e){var t,n,l,a;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?Y(null==e||null===(l=e.data)||void 0===l||null===(a=l.files[0])||void 0===a?void 0:a.fileStoreId):X(_("CS_FILE_UPLOAD_ERROR"))})},function(){X(_("CS_FILE_UPLOAD_ERROR"))});if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[W]);var $=function(e){var t,n=[];for(t=0;t<(null==e?void 0:e.questionLength);t++){var l;n.push({remarks:e["Remarks_"+t],question:null==e?void 0:e.questionList[t].question,value:null==e||null===(l=e["question_"+t])||void 0===l?void 0:l.code})}return n},ee=function(e){var t,n,l,a,i=[],o=[];return(null==e||null===(t=e.additionalDetails)||void 0===t||null===(n=t.fieldinspection_pending)||void 0===n?void 0:n.length)>0&&(o=null==e||null===(l=e.additionalDetails)||void 0===l?void 0:l.fieldinspection_pending),"FIELDINSPECTION_INPROGRESS"==e.status?((null===(a=i=JSON.parse(sessionStorage.getItem("INSPECTION_DATA")))||void 0===a?void 0:a.length)>0&&i.map(function(e,t){var n,l;o.push({docs:(n=e.Documents,l=[],n&&n.map(function(e,t){l.push({documentType:(e.documentType+"_"+e.documentType.split("_")[1]).replaceAll("_","."),fileStoreId:e.fileStoreId,fileStore:e.fileStoreId,fileName:"",dropDownValues:{value:(e.documentType+"_"+e.documentType.split("_")[1]).replaceAll("_",".")}})}),l),date:e.InspectionDate,questions:$(e),time:null==e?void 0:e.InspectionTime})}),o=o.filter(function(e){return e.docs&&e.docs.length>0})):sessionStorage.removeItem("INSPECTION_DATA"),[].concat(o)};return n.useEffect(function(){S&&x(function(e){var n,a=e.t,i=e.action,o=e.approvers,r=e.selectedApprover,u=e.setSelectedApprover,c=e.selectFile,s=e.uploadedFile,d=e.setUploadedFile,m=e.error,v=!1;"REVOCATE"!=(null==i?void 0:i.action)&&"REJECT"!=(null==i?void 0:i.action)&&"SKIP_PAYMENT"!=i.action&&"SEND_BACK_TO_CITIZEN"!=(null==i?void 0:i.action)&&"APPROVE"!=(null==i?void 0:i.action)||(v=!0);var E=!1;return"REVOCATE"!=(null==i?void 0:i.action)&&"REJECT"!=(null==i?void 0:i.action)||(E=!0),{label:{heading:"WF_"+(null==i?void 0:i.action)+"_APPLICATION",submit:"WF_"+e.businessService+"_"+(null==i?void 0:i.action),cancel:"BPA_CITIZEN_CANCEL_BUTTON"},form:[{body:[{label:i.isTerminateState||v?null:a(e.assigneeLabel||"WF_ROLE_"+(null===(n=i.assigneeRoles)||void 0===n?void 0:n[0])),type:"dropdown",populators:i.isTerminateState||v?null:l.createElement(t.Dropdown,{option:o,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:r})},{label:a("WF_COMMON_COMMENTS"),type:"textarea",isMandatory:E,populators:{name:"comments"}},{label:""+a("WF_APPROVAL_UPLOAD_HEAD"),populators:l.createElement(t.UploadFile,{id:"workflow-doc",onUpload:c,onDelete:function(){d(null)},message:s?"1 "+a("ES_PT_ACTION_FILEUPLOADED"):a("CS_ACTION_NO_FILEUPLOADED"),accept:"image/*, .pdf, .png, .jpeg, .jpg",iserror:m})}]}]}}({t:_,action:S,approvers:F,selectedApprover:k,setSelectedApprover:V,selectFile:Z,uploadedFile:G,setUploadedFile:Y,businessService:N,assigneeLabel:"WF_ASSIGNEE_NAME_LABEL",error:K}))},[S,F,Q,G,K]),S&&R.form?l.createElement(t.Modal,{headerBarMain:l.createElement(Tt,{label:_(R.label.heading)}),headerBarEnd:l.createElement(bt,{onClick:C}),actionCancelLabel:_(R.label.cancel),actionCancelOnSubmit:C,actionSaveLabel:_(R.label.submit),actionSaveOnSubmit:function(){},formId:"modal-action",isOBPSFlow:!0,popupStyles:J?{width:"720px"}:{},style:J?{minHeight:"45px",height:"auto",width:"44%"}:{minHeight:"45px",height:"auto",width:"107px",paddingLeft:"0px",paddingRight:"0px"},popupModuleMianStyles:J?{paddingLeft:"5px"}:{}},L?l.createElement(t.Loader,null):l.createElement(t.FormComposer,{config:R.form,cardStyle:{marginLeft:"0px",marginRight:"0px",marginTop:"-25px"},className:"BPAemployeeCard",noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){var t,n,l,a,i,o,r,u,s,d;b=c({},b,{documents:(s=JSON.parse(sessionStorage.getItem("BPA_DOCUMENTS")),d=[],s.map(function(e){var t,n,l,a,i,o;(null==e||null===(t=e.uploadedDocuments)||void 0===t||null===(n=t[0])||void 0===n||null===(l=n.values)||void 0===l?void 0:l.length)>0&&(d=[].concat(d,null==e||null===(a=e.uploadedDocuments)||void 0===a||null===(i=a[0])||void 0===i?void 0:i.values)),(null==e||null===(o=e.newUploadedDocs)||void 0===o?void 0:o.length)>0&&(d=[].concat(d,null==e?void 0:e.newUploadedDocs))}),d),additionalDetails:c({},null===(t=b)||void 0===t?void 0:t.additionalDetails,{fieldinspection_pending:ee(b),pendingapproval:(o=Digit.SessionStorage.get("OBPS_APPROVAL_CHECKS"),r=Digit.SessionStorage.get("OBPS_NEW_APPROVALS"),u=null==o?void 0:o.reduce(function(e,t){return null!=t&&t.checked?e.push(null==t?void 0:t.label)&&e:e},[]),u=null===(i=u)||void 0===i?void 0:i.concat(null!==r?r.filter(function(e){return""!==e.label}).map(function(e){return null==e?void 0:e.label}):[]))}),workflow:{action:null==S?void 0:S.action,comment:(null==e||null===(n=e.comments)||void 0===n?void 0:n.length)>0?null==e?void 0:e.comments:null,comments:(null==e||null===(l=e.comments)||void 0===l?void 0:l.length)>0?null==e?void 0:e.comments:null,assignee:null!=k&&k.uuid?[null==k?void 0:k.uuid]:null,assignes:null!=k&&k.uuid?[null==k?void 0:k.uuid]:null,varificationDocuments:G?[{documentType:(null==S?void 0:S.action)+" DOC",fileName:null==W?void 0:W.name,fileStoreId:G}]:null},action:null==S?void 0:S.action,comment:null==e?void 0:e.comments,assignee:null!=k&&k.uuid?[null==k?void 0:k.uuid]:null,wfDocuments:G?[{documentType:(null==S?void 0:S.action)+" DOC",fileName:null==W?void 0:W.name,fileStoreId:G}]:null});var m=null==D||null===(a=D.nocData)||void 0===a?void 0:a.map(function(e){var t=Digit.SessionStorage.get(null==e?void 0:e.nocType)||[];return{Noc:c({},e,{documents:[].concat(null!=e&&e.documents?null==e?void 0:e.documents:[],t||[])})}}),v=[];m&&m.map(function(e){var t,n,l,a,i,o,r,u,c,s;"APPROVED"!=(null==e||null===(t=e.Noc)||void 0===t||null===(n=t.applicationStatus)||void 0===n?void 0:n.toUpperCase())&&"AUTO_APPROVED"!=(null==e||null===(l=e.Noc)||void 0===l||null===(a=l.applicationStatus)||void 0===a?void 0:a.toUpperCase())&&"REJECTED"!=(null==e||null===(i=e.Noc)||void 0===i||null===(o=i.applicationStatus)||void 0===o?void 0:o.toUpperCase())&&"AUTO_REJECTED"!=(null==e||null===(r=e.Noc)||void 0===r||null===(u=r.applicationStatus)||void 0===u?void 0:u.toUpperCase())&&"VOIDED"!=(null==e||null===(c=e.Noc)||void 0===c||null===(s=c.applicationStatus)||void 0===s?void 0:s.toUpperCase())&&v.push(e)}),T({BPA:b},(null==v?void 0:v.length)>0&&v,{isStakeholder:!1,bpa:!0})},defaultValues:M,formId:"modal-action"})):l.createElement(t.Loader,null)},At=function(e){return l.createElement("h1",{style:{marginLeft:"22px"},className:"heading-m BPAheading-m"},e.label)},Ot=function(){return l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},wt=function(e){return l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(Ot,null))},Lt=function(e){var a,o,u=e.t,s=e.action,d=e.tenantId,v=e.closeModal,E=e.submitAction,f=e.applicationData,p=e.businessService,g=Digit.Hooks.useEmployeeSearch(d,{roles:null==s||null===(a=s.assigneeRoles)||void 0===a||null===(o=a.map)||void 0===o?void 0:o.call(a,function(e){return{code:e}}),isActive:!0},{enabled:!(null!=s&&s.isTerminateState)}),h=g.data,_=g.isLoading,S=(r.useQueryClient(),n.useState({})),y=S[0],C=S[1],T=n.useState({})[0],D=n.useState([]),b=D[0],N=D[1],A=n.useState({}),O=A[0],w=A[1],L=n.useState(null),I=L[0],R=L[1],x=n.useState(null),M=x[0],P=x[1],F=n.useState(null),U=F[0],B=F[1],k=!!Digit.Utils.browser.isMobile();function V(e){R(e.target.files[0])}return i.useHistory(),n.useEffect(function(){var e;N(null==h||null===(e=h.Employees)||void 0===e?void 0:e.map(function(e){var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[h]),n.useEffect(function(){!function(){try{B(null);var e=function(){if(I){var e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,t=function(){if(I.size>=5242880)B(u("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{var t=function(){if(null!=I&&I.type&&!e.test(null==I?void 0:I.type))B(u("NOT_SUPPORTED_FILE_TYPE"));else{var t=m(function(){return Promise.resolve(Digit.UploadServices.Filestorage("NOC",I,Digit.ULBService.getStateId()||(null==d?void 0:d.split(".")[0]))).then(function(e){var t,n,l,a;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?P(null==e||null===(l=e.data)||void 0===l||null===(a=l.files[0])||void 0===a?void 0:a.fileStoreId):B(u("CS_FILE_UPLOAD_ERROR"))})},function(){B(u("CS_FILE_UPLOAD_ERROR"))});if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[I]),n.useEffect(function(){s&&C(function(e){var n,a=e.t,i=e.action,o=e.approvers,r=e.selectedApprover,u=e.setSelectedApprover,c=e.selectFile,s=e.uploadedFile,d=e.setUploadedFile,m=e.error,v=!1;"REVOCATE"!=(null==i?void 0:i.action)&&"REJECT"!=(null==i?void 0:i.action)||(v=!0);var E=!1;return"APPROVE"!=(null==i?void 0:i.action)&&"REJECT"!=(null==i?void 0:i.action)&&"AUTO_APPROVE"!=i.action&&"AUTO_REJECT"!=i.action||(E=!0),{label:{heading:"WF_"+(null==i?void 0:i.action)+"_APPLICATION",submit:"WF_"+e.businessService+"_"+(null==i?void 0:i.action),cancel:"CORE_LOGOUTPOPUP_CANCEL"},form:[{body:[{label:i.isTerminateState||E?null:a(e.assigneeLabel||"WF_ROLE_"+(null===(n=i.assigneeRoles)||void 0===n?void 0:n[0])),type:"dropdown",populators:i.isTerminateState||E?null:l.createElement(t.Dropdown,{option:o,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:r})},{label:a("WF_COMMON_COMMENTS"),type:"textarea",isMandatory:v,populators:{name:"comments"}},{label:""+a("WF_APPROVAL_UPLOAD_HEAD"),populators:l.createElement(t.UploadFile,{id:"workflow-doc",onUpload:c,onDelete:function(){d(null)},showHint:!0,message:s?"1 "+a("ES_PT_ACTION_FILEUPLOADED"):a("CS_ACTION_NO_FILEUPLOADED"),accept:"image/*, .pdf, .png, .jpeg, .jpg",iserror:m})}]}]}}({t:u,action:s,approvers:b,selectedApprover:O,setSelectedApprover:w,selectFile:V,uploadedFile:M,setUploadedFile:P,businessService:p,assigneeLabel:"WF_ASSIGNEE_NAME_LABEL",error:U}))},[s,b,M,U]),s&&y.form?l.createElement(t.Modal,{headerBarMain:l.createElement(At,{label:u(y.label.heading)}),headerBarEnd:l.createElement(wt,{onClick:v}),actionCancelLabel:u(y.label.cancel),actionCancelOnSubmit:v,actionSaveLabel:u(y.label.submit),actionSaveOnSubmit:function(){},formId:"modal-action",isOBPSFlow:!0,popupStyles:k?{width:"720px"}:{},style:k?{height:"45px",width:"44%"}:{height:"45px",width:"107px",paddingLeft:"0px",paddingRight:"0px"},popupModuleMianStyles:k?{paddingLeft:"5px"}:{}},_?l.createElement(t.Loader,null):l.createElement(t.FormComposer,{config:y.form,cardStyle:{marginLeft:"0px",marginRight:"0px",marginTop:"-25px"},className:"BPAemployeeCard",noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){var t,n,l,a=JSON.parse(sessionStorage.getItem("NewNOCDocs")),i=(null===(t=f)||void 0===t||null===(n=t.documents)||void 0===n?void 0:n.length)>0?[].concat(null===(l=f)||void 0===l?void 0:l.documents):[];a.map(function(e,t){i.push(e)}),f=c({},f,{workflow:{action:null==s?void 0:s.action,comment:null!=e&&e.comments?null==e?void 0:e.comments:null,assignee:null!=O&&O.uuid?[null==O?void 0:O.uuid]:null,documents:M?[{documentType:(null==s?void 0:s.action)+" DOC",fileName:null==I?void 0:I.name,fileStoreId:M}]:null},documents:i}),E({Noc:f},!1,{isNoc:!0})},defaultValues:T,formId:"modal-action"})):l.createElement(t.Loader,null)},It=function(e,t){return e===t||e!=e&&t!=t},Rt=function(e,t){for(var n=e.length;n--;)if(It(e[n][0],t))return n;return-1},xt=Array.prototype.splice;function Mt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var l=e[t];this.set(l[0],l[1])}}Mt.prototype.clear=function(){this.__data__=[],this.size=0},Mt.prototype.delete=function(e){var t=this.__data__,n=Rt(t,e);return!(n<0||(n==t.length-1?t.pop():xt.call(t,n,1),--this.size,0))},Mt.prototype.get=function(e){var t=this.__data__,n=Rt(t,e);return n<0?void 0:t[n][1]},Mt.prototype.has=function(e){return Rt(this.__data__,e)>-1},Mt.prototype.set=function(e,t){var n=this.__data__,l=Rt(n,e);return l<0?(++this.size,n.push([e,t])):n[l][1]=t,this};var Pt=Mt,Ft="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Ut(e,t){return e(t={exports:{}},t.exports),t.exports}var Bt,kt="object"==typeof Ft&&Ft&&Ft.Object===Object&&Ft,Vt="object"==typeof self&&self&&self.Object===Object&&self,Ht=kt||Vt||Function("return this")(),Wt=Ht.Symbol,jt=Object.prototype,zt=jt.hasOwnProperty,Gt=jt.toString,Yt=Wt?Wt.toStringTag:void 0,qt=Object.prototype.toString,Kt=Wt?Wt.toStringTag:void 0,Xt=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Kt&&Kt in Object(e)?function(e){var t=zt.call(e,Yt),n=e[Yt];try{e[Yt]=void 0;var l=!0}catch(e){}var a=Gt.call(e);return l&&(t?e[Yt]=n:delete e[Yt]),a}(e):function(e){return qt.call(e)}(e)},Qt=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},Jt=function(e){if(!Qt(e))return!1;var t=Xt(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},Zt=Ht["__core-js_shared__"],$t=(Bt=/[^.]+$/.exec(Zt&&Zt.keys&&Zt.keys.IE_PROTO||""))?"Symbol(src)_1."+Bt:"",en=Function.prototype.toString,tn=function(e){if(null!=e){try{return en.call(e)}catch(e){}try{return e+""}catch(e){}}return""},nn=/^\[object .+?Constructor\]$/,ln=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),an=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Qt(e)||(t=e,$t&&$t in t))&&(Jt(e)?ln:nn).test(tn(e));var t}(n)?n:void 0},on=an(Ht,"Map"),rn=an(Object,"create"),un=Object.prototype.hasOwnProperty,cn=Object.prototype.hasOwnProperty;function sn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var l=e[t];this.set(l[0],l[1])}}sn.prototype.clear=function(){this.__data__=rn?rn(null):{},this.size=0},sn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},sn.prototype.get=function(e){var t=this.__data__;if(rn){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return un.call(t,e)?t[e]:void 0},sn.prototype.has=function(e){var t=this.__data__;return rn?void 0!==t[e]:cn.call(t,e)},sn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=rn&&void 0===t?"__lodash_hash_undefined__":t,this};var dn=sn,mn=function(e,t){var n,l,a=e.__data__;return("string"==(l=typeof(n=t))||"number"==l||"symbol"==l||"boolean"==l?"__proto__"!==n:null===n)?a["string"==typeof t?"string":"hash"]:a.map};function vn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var l=e[t];this.set(l[0],l[1])}}vn.prototype.clear=function(){this.size=0,this.__data__={hash:new dn,map:new(on||Pt),string:new dn}},vn.prototype.delete=function(e){var t=mn(this,e).delete(e);return this.size-=t?1:0,t},vn.prototype.get=function(e){return mn(this,e).get(e)},vn.prototype.has=function(e){return mn(this,e).has(e)},vn.prototype.set=function(e,t){var n=mn(this,e),l=n.size;return n.set(e,t),this.size+=n.size==l?0:1,this};var En=vn;function fn(e){var t=this.__data__=new Pt(e);this.size=t.size}fn.prototype.clear=function(){this.__data__=new Pt,this.size=0},fn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},fn.prototype.get=function(e){return this.__data__.get(e)},fn.prototype.has=function(e){return this.__data__.has(e)},fn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Pt){var l=n.__data__;if(!on||l.length<199)return l.push([e,t]),this.size=++n.size,this;n=this.__data__=new En(l)}return n.set(e,t),this.size=n.size,this};var pn=fn,gn=function(){try{var e=an(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),hn=function(e,t,n){"__proto__"==t&&gn?gn(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},_n=Object.prototype.hasOwnProperty,Sn=function(e,t,n){var l=e[t];_n.call(e,t)&&It(l,n)&&(void 0!==n||t in e)||hn(e,t,n)},yn=function(e,t,n,l){var a=!n;n||(n={});for(var i=-1,o=t.length;++i<o;){var r=t[i],u=l?l(n[r],e[r],r,n,e):void 0;void 0===u&&(u=e[r]),a?hn(n,r,u):Sn(n,r,u)}return n},Cn=function(e){return null!=e&&"object"==typeof e},Tn=function(e){return Cn(e)&&"[object Arguments]"==Xt(e)},Dn=Object.prototype,bn=Dn.hasOwnProperty,Nn=Dn.propertyIsEnumerable,An=Tn(function(){return arguments}())?Tn:function(e){return Cn(e)&&bn.call(e,"callee")&&!Nn.call(e,"callee")},On=Array.isArray,wn=function(){return!1},Ln=Ut(function(e,t){var n=t&&!t.nodeType&&t,l=n&&e&&!e.nodeType&&e,a=l&&l.exports===n?Ht.Buffer:void 0;e.exports=(a?a.isBuffer:void 0)||wn}),In=/^(?:0|[1-9]\d*)$/,Rn=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&In.test(e))&&e>-1&&e%1==0&&e<t},xn=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},Mn={};Mn["[object Float32Array]"]=Mn["[object Float64Array]"]=Mn["[object Int8Array]"]=Mn["[object Int16Array]"]=Mn["[object Int32Array]"]=Mn["[object Uint8Array]"]=Mn["[object Uint8ClampedArray]"]=Mn["[object Uint16Array]"]=Mn["[object Uint32Array]"]=!0,Mn["[object Arguments]"]=Mn["[object Array]"]=Mn["[object ArrayBuffer]"]=Mn["[object Boolean]"]=Mn["[object DataView]"]=Mn["[object Date]"]=Mn["[object Error]"]=Mn["[object Function]"]=Mn["[object Map]"]=Mn["[object Number]"]=Mn["[object Object]"]=Mn["[object RegExp]"]=Mn["[object Set]"]=Mn["[object String]"]=Mn["[object WeakMap]"]=!1;var Pn=function(e){return function(t){return e(t)}},Fn=Ut(function(e,t){var n=t&&!t.nodeType&&t,l=n&&e&&!e.nodeType&&e,a=l&&l.exports===n&&kt.process,i=function(){try{return l&&l.require&&l.require("util").types||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=i}),Un=Fn&&Fn.isTypedArray,Bn=Un?Pn(Un):function(e){return Cn(e)&&xn(e.length)&&!!Mn[Xt(e)]},kn=Object.prototype.hasOwnProperty,Vn=function(e,t){var n=On(e),l=!n&&An(e),a=!n&&!l&&Ln(e),i=!n&&!l&&!a&&Bn(e),o=n||l||a||i,r=o?function(e,t){for(var n=-1,l=Array(e);++n<e;)l[n]=t(n);return l}(e.length,String):[],u=r.length;for(var c in e)!t&&!kn.call(e,c)||o&&("length"==c||a&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Rn(c,u))||r.push(c);return r},Hn=Object.prototype,Wn=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Hn)},jn=function(e,t){return function(n){return e(t(n))}},zn=jn(Object.keys,Object),Gn=Object.prototype.hasOwnProperty,Yn=function(e){return null!=e&&xn(e.length)&&!Jt(e)},qn=function(e){return Yn(e)?Vn(e):function(e){if(!Wn(e))return zn(e);var t=[];for(var n in Object(e))Gn.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)},Kn=Object.prototype.hasOwnProperty,Xn=function(e){return Yn(e)?Vn(e,!0):function(e){if(!Qt(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Wn(e),n=[];for(var l in e)("constructor"!=l||!t&&Kn.call(e,l))&&n.push(l);return n}(e)},Qn=Ut(function(e,t){var n=t&&!t.nodeType&&t,l=n&&e&&!e.nodeType&&e,a=l&&l.exports===n?Ht.Buffer:void 0,i=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,l=i?i(n):new e.constructor(n);return e.copy(l),l}}),Jn=function(){return[]},Zn=Object.prototype.propertyIsEnumerable,$n=Object.getOwnPropertySymbols,el=$n?function(e){return null==e?[]:(e=Object(e),function(t,n){for(var l=-1,a=null==t?0:t.length,i=0,o=[];++l<a;){var r=t[l];Zn.call(e,r)&&(o[i++]=r)}return o}($n(e)))}:Jn,tl=function(e,t){for(var n=-1,l=t.length,a=e.length;++n<l;)e[a+n]=t[n];return e},nl=jn(Object.getPrototypeOf,Object),ll=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)tl(t,el(e)),e=nl(e);return t}:Jn,al=function(e,t,n){var l=t(e);return On(e)?l:tl(l,n(e))},il=function(e){return al(e,qn,el)},ol=function(e){return al(e,Xn,ll)},rl=an(Ht,"DataView"),ul=an(Ht,"Promise"),cl=an(Ht,"Set"),sl=an(Ht,"WeakMap"),dl=tn(rl),ml=tn(on),vl=tn(ul),El=tn(cl),fl=tn(sl),pl=Xt;(rl&&"[object DataView]"!=pl(new rl(new ArrayBuffer(1)))||on&&"[object Map]"!=pl(new on)||ul&&"[object Promise]"!=pl(ul.resolve())||cl&&"[object Set]"!=pl(new cl)||sl&&"[object WeakMap]"!=pl(new sl))&&(pl=function(e){var t=Xt(e),n="[object Object]"==t?e.constructor:void 0,l=n?tn(n):"";if(l)switch(l){case dl:return"[object DataView]";case ml:return"[object Map]";case vl:return"[object Promise]";case El:return"[object Set]";case fl:return"[object WeakMap]"}return t});var gl=pl,hl=Object.prototype.hasOwnProperty,_l=Ht.Uint8Array,Sl=function(e){var t=new e.constructor(e.byteLength);return new _l(t).set(new _l(e)),t},yl=/\w*$/,Cl=Wt?Wt.prototype:void 0,Tl=Cl?Cl.valueOf:void 0,Dl=Object.create,bl=function(){function e(){}return function(t){if(!Qt(t))return{};if(Dl)return Dl(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Nl=Fn&&Fn.isMap,Al=Nl?Pn(Nl):function(e){return Cn(e)&&"[object Map]"==gl(e)},Ol=Fn&&Fn.isSet,wl=Ol?Pn(Ol):function(e){return Cn(e)&&"[object Set]"==gl(e)},Ll={};Ll["[object Arguments]"]=Ll["[object Array]"]=Ll["[object ArrayBuffer]"]=Ll["[object DataView]"]=Ll["[object Boolean]"]=Ll["[object Date]"]=Ll["[object Float32Array]"]=Ll["[object Float64Array]"]=Ll["[object Int8Array]"]=Ll["[object Int16Array]"]=Ll["[object Int32Array]"]=Ll["[object Map]"]=Ll["[object Number]"]=Ll["[object Object]"]=Ll["[object RegExp]"]=Ll["[object Set]"]=Ll["[object String]"]=Ll["[object Symbol]"]=Ll["[object Uint8Array]"]=Ll["[object Uint8ClampedArray]"]=Ll["[object Uint16Array]"]=Ll["[object Uint32Array]"]=!0,Ll["[object Error]"]=Ll["[object Function]"]=Ll["[object WeakMap]"]=!1;var Il=function e(t,n,l,a,i,o){var r,u=1&n,c=2&n,s=4&n;if(l&&(r=i?l(t,a,i,o):l(t)),void 0!==r)return r;if(!Qt(t))return t;var d=On(t);if(d){if(r=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&hl.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(t),!u)return function(e,t){var n=-1,l=e.length;for(t||(t=Array(l));++n<l;)t[n]=e[n];return t}(t,r)}else{var m=gl(t),v="[object Function]"==m||"[object GeneratorFunction]"==m;if(Ln(t))return Qn(t,u);if("[object Object]"==m||"[object Arguments]"==m||v&&!i){if(r=c||v?{}:function(e){return"function"!=typeof e.constructor||Wn(e)?{}:bl(nl(e))}(t),!u)return c?function(e,t){return yn(e,ll(e),t)}(t,function(e,t){return e&&yn(t,Xn(t),e)}(r,t)):function(e,t){return yn(e,el(e),t)}(t,function(e,t){return e&&yn(t,qn(t),e)}(r,t))}else{if(!Ll[m])return i?t:{};r=function(e,t,n){var l,a,i=e.constructor;switch(t){case"[object ArrayBuffer]":return Sl(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return function(e,t){var n=t?Sl(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var n=t?Sl(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,n);case"[object Map]":return new i;case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return(a=new(l=e).constructor(l.source,yl.exec(l))).lastIndex=l.lastIndex,a;case"[object Set]":return new i;case"[object Symbol]":return Tl?Object(Tl.call(e)):{}}}(t,m,u)}}o||(o=new pn);var E=o.get(t);if(E)return E;o.set(t,r),wl(t)?t.forEach(function(a){r.add(e(a,n,l,a,t,o))}):Al(t)&&t.forEach(function(a,i){r.set(i,e(a,n,l,i,t,o))});var f=d?void 0:(s?c?ol:il:c?Xn:qn)(t);return function(e,t){for(var n=-1,l=null==e?0:e.length;++n<l&&!1!==t(e[n],n););}(f||t,function(a,i){f&&(a=t[i=a]),Sn(r,i,e(a,n,l,i,t,o))}),r},Rl=function(e){return Il(e,5)},xl=function(e){return l.createElement("h1",{className:"heading-m"},e.label)},Ml=function(){return l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},Pl=function(e){return l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(Ml,null))},Fl=function(e){var a,i,o=e.t,r=e.action,u=e.tenantId,s=e.closeModal,d=e.submitAction,v=e.applicationData,E=e.businessService,f=Digit.Hooks.useEmployeeSearch(u,{roles:null==r||null===(a=r.assigneeRoles)||void 0===a||null===(i=a.map)||void 0===i?void 0:i.call(a,function(e){return{code:e}}),isActive:!0},{enabled:!(null!=r&&r.isTerminateState)}),p=f.data,g=f.isLoading,h=n.useState({}),_=h[0],S=h[1],y=n.useState({})[0],C=n.useState([]),T=C[0],D=C[1],b=n.useState({}),N=b[0],A=b[1],O=n.useState(null),w=O[0],L=O[1],I=n.useState(null),R=I[0],x=I[1],M=n.useState(null),P=M[0],F=M[1];function U(e){L(e.target.files[0])}return n.useEffect(function(){var e;D(null==p||null===(e=p.Employees)||void 0===e?void 0:e.map(function(e){var t;return{uuid:null==e?void 0:e.uuid,name:null==e||null===(t=e.user)||void 0===t?void 0:t.name}}))},[p]),n.useEffect(function(){!function(){try{F(null);var e=function(){if(w){var e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,t=function(){if(w.size>=5242880)F(o("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{var t=function(){if(null!=w&&w.type&&!e.test(null==w?void 0:w.type))F(o("NOT_SUPPORTED_FILE_TYPE"));else{var t=m(function(){return Promise.resolve(Digit.UploadServices.Filestorage("WS",w,Digit.ULBService.getCurrentTenantId())).then(function(e){var t,n,l,a;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?x(null==e||null===(l=e.data)||void 0===l||null===(a=l.files[0])||void 0===a?void 0:a.fileStoreId):F(o("CS_FILE_UPLOAD_ERROR"))})},function(e){console.error("Modal -> err ",e),F(o("CS_FILE_UPLOAD_ERROR"))});if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[w]),n.useEffect(function(){var e,n,a,i;"DisconnectWSConnection"==(null===(e=v)||void 0===e||null===(n=e.processInstance)||void 0===n?void 0:n.businessService)||"DisconnectSWConnection"==(null===(a=v)||void 0===a||null===(i=a.processInstance)||void 0===i?void 0:i.businessService)?r&&S(function(e){var n,a=e.t,i=e.action,o=e.approvers,r=e.selectedApprover,u=e.setSelectedApprover,s=e.selectFile,d=e.uploadedFile,m=e.setUploadedFile,v=e.businessService,E=e.error,f=!0,p=!1;return(null!=i&&null!==(n=i.action)&&void 0!==n&&n.includes("SEND_BACK")||"APPROVE_FOR_DISCONNECTION"==(null==i?void 0:i.action)||"RESUBMIT_APPLICATION"==(null==i?void 0:i.action))&&(f=!1),i.isTerminateState&&(f=!1),"EXECUTE_DISCONNECTION"!=(null==i?void 0:i.action)&&"DISCONNECTION_EXECUTED"!=(null==i?void 0:i.action)||(p=!0),{label:{heading:"WF_"+(null==i?void 0:i.action)+"_APPLICATION",submit:"WF_"+(null==v?void 0:v.toUpperCase())+"_"+(null==i?void 0:i.action),cancel:"CS_COMMON_CANCEL"},form:[{body:[{label:f?a("WF_ASSIGNEE_NAME_LABEL"):null,placeholder:f?a("WF_ASSIGNEE_NAME_PLACEHOLDER"):null,type:"dropdown",populators:f?l.createElement(t.Dropdown,{option:o,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:r}):null},p&&{label:a("ES_FSM_ACTION_SERVICE_DATE"),isMandatory:!!p,type:"custom",populators:p?{name:"date",validation:{required:!0},defaultValue:Digit.Utils.date.getDate(),component:function(e,n){return l.createElement(t.DatePicker,c({onChange:e.onChange,date:e.value},n))}}:null},{label:a("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:a("WS_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),populators:l.createElement(t.UploadFile,{id:"workflow-doc",accept:".jpg,.pdf,.png,.jpeg",onUpload:s,onDelete:function(){m(null)},message:d?"1 "+a("ES_PT_ACTION_FILEUPLOADED"):a("CS_ACTION_NO_FILEUPLOADED"),error:E,iserror:E})}]}]}}({t:o,action:r,approvers:T,selectedApprover:N,setSelectedApprover:A,selectFile:U,uploadedFile:R,setUploadedFile:x,businessService:E,error:P})):r&&S(function(e){var n,a=e.t,i=e.action,o=e.approvers,r=e.selectedApprover,u=e.setSelectedApprover,c=e.selectFile,s=e.uploadedFile,d=e.setUploadedFile,m=e.businessService,v=e.error,E=!0;return(null!=i&&null!==(n=i.action)&&void 0!==n&&n.includes("SEND_BACK")||"APPROVE_FOR_CONNECTION"==(null==i?void 0:i.action))&&(E=!1),i.isTerminateState&&(E=!1),{label:{heading:"WF_"+(null==i?void 0:i.action)+"_APPLICATION",submit:"WF_"+(null==m?void 0:m.toUpperCase())+"_"+(null==i?void 0:i.action),cancel:"CS_COMMON_CANCEL"},form:[{body:[{label:E?a("WF_ASSIGNEE_NAME_LABEL"):null,placeholder:E?a("WF_ASSIGNEE_NAME_PLACEHOLDER"):null,type:"dropdown",populators:E?l.createElement(t.Dropdown,{option:o,autoComplete:"off",optionKey:"name",id:"fieldInspector",select:u,selected:r}):null},{label:a("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}},{label:a("WS_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),populators:l.createElement(t.UploadFile,{id:"workflow-doc",accept:".jpg,.pdf,.png,.jpeg",onUpload:c,onDelete:function(){d(null)},message:s?"1 "+a("ES_PT_ACTION_FILEUPLOADED"):a("CS_ACTION_NO_FILEUPLOADED"),error:v,iserror:v})}]}]}}({t:o,action:r,approvers:T,selectedApprover:N,setSelectedApprover:A,selectFile:U,uploadedFile:R,setUploadedFile:x,businessService:E,error:P}))},[r,T,R,P]),r&&_.form?l.createElement(t.Modal,{headerBarMain:l.createElement(xl,{label:o(_.label.heading)}),headerBarEnd:l.createElement(Pl,{onClick:s}),actionCancelLabel:o(_.label.cancel),actionCancelOnSubmit:s,actionSaveLabel:o(_.label.submit),actionSaveOnSubmit:function(){},formId:"modal-action"},g?l.createElement(t.Loader,null):l.createElement(t.FormComposer,{config:_.form,noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){var t,n,l,a,i,o;if(null!==(t=v)&&void 0!==t&&t.isBillAmend){var s,m,E,f,p,g=c({},null===(s=v)||void 0===s||null===(m=s.billAmendmentDetails)||void 0===m?void 0:m.additionalDetails,{comments:null!=e&&e.comments?e.comments:null}),h=c({},null===(E=v)||void 0===E?void 0:E.billAmendmentDetails,{workflow:{businessId:null===(f=v)||void 0===f||null===(p=f.billAmendmentDetails)||void 0===p?void 0:p.amendmentId,action:null==r?void 0:r.action,tenantId:u,businessService:"BS.AMENDMENT",moduleName:"BS"},additionalDetails:g,comment:(null==e?void 0:e.comments)||"",wfDocuments:R?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==w?void 0:w.name,fileStoreId:R}]:null,processInstance:{action:null==r?void 0:r.action,assignes:null!=N&&N.uuid?[{uuid:null==N?void 0:N.uuid}]:[],comment:(null==e?void 0:e.comments)||"",documents:R?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==w?void 0:w.name,fileStoreId:R}]:[]}});d({AmendmentUpdate:h})}else{if(v=c({},v,{action:null==r?void 0:r.action,comment:(null==e?void 0:e.comments)||"",assignee:null!=N&&N.uuid?[null==N?void 0:N.uuid]:[],assignes:null!=N&&N.uuid?[{uuid:null==N?void 0:N.uuid}]:[],wfDocuments:R?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==w?void 0:w.name,fileStoreId:R}]:null,processInstance:c({},null===(n=v)||void 0===n?void 0:n.processInstance,{action:null==r?void 0:r.action,assignes:null!=N&&N.uuid?[{uuid:null==N?void 0:N.uuid}]:[],comment:(null==e?void 0:e.comments)||"",documents:R?[{documentType:(null==r?void 0:r.action)+" DOC",fileName:null==w?void 0:w.name,fileStoreId:R}]:[]})}),null!=e&&e.date){var _=Rl(null==e?void 0:e.date);v.connectionExecutionDate=function(e,t){void 0===t&&(t="dayend");try{var n=e.match(/(\d{4})-(\d{1,2})-(\d{1,2})/),l=new Date(Date.UTC(n[1],n[3]-1,n[2]));return l.setMinutes(l.getMinutes()+l.getTimezoneOffset()),"dayend"===t&&(l.setHours(l.getHours()+24),l.setSeconds(l.getSeconds()-1)),l.getTime()}catch(t){return e}}(_)}if("DisconnectWSConnection"==(null===(l=v)||void 0===l||null===(a=l.processInstance)||void 0===a?void 0:a.businessService)||"DisconnectSWConnection"==(null===(i=v)||void 0===i||null===(o=i.processInstance)||void 0===o?void 0:o.businessService)){var S;"WATER"==(null===(S=v)||void 0===S?void 0:S.serviceType)?d({WaterConnection:v,disconnectRequest:!0}):d({SewerageConnection:v,disconnectRequest:!0})}else{var y,C,T,D,b,A,O,L,I,x,M,P,F,U=sessionStorage.getItem("Digit.ADHOC_ADD_REBATE_DATA"),B=U?JSON.parse(U):"";null!=B&&null!==(y=B.value)&&void 0!==y&&y.adhocPenalty&&(v.additionalDetails.adhocPenalty=parseInt(null==B||null===(C=B.value)||void 0===C?void 0:C.adhocPenalty)||""),null!=B&&null!==(T=B.value)&&void 0!==T&&T.adhocPenaltyComment&&(v.additionalDetails.adhocPenaltyComment=(null==B||null===(D=B.value)||void 0===D?void 0:D.adhocPenaltyComment)||""),null!=B&&null!==(b=B.value)&&void 0!==b&&b.adhocPenaltyReason&&(v.additionalDetails.adhocPenaltyReason=(null==B||null===(A=B.value)||void 0===A?void 0:A.adhocPenaltyReason)||""),null!=B&&null!==(O=B.value)&&void 0!==O&&O.adhocRebate&&(v.additionalDetails.adhocRebate=parseInt(null==B||null===(L=B.value)||void 0===L?void 0:L.adhocRebate)||""),null!=B&&null!==(I=B.value)&&void 0!==I&&I.adhocRebateComment&&(v.additionalDetails.adhocRebateComment=(null==B||null===(x=B.value)||void 0===x?void 0:x.adhocRebateComment)||""),null!=B&&null!==(M=B.value)&&void 0!==M&&M.adhocRebateReason&&(v.additionalDetails.adhocRebateReason=(null==B||null===(P=B.value)||void 0===P?void 0:P.adhocRebateReason)||""),"WATER"==(null===(F=v)||void 0===F?void 0:F.serviceType)?d({WaterConnection:v}):d({SewerageConnection:v})}}},defaultValues:y,formId:"modal-action"})):l.createElement(t.Loader,null)},Ul=function(e){return l.createElement("h1",{className:"heading-m"},e.label)},Bl=function(){return l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},kl=function(e){return l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(Bl,null))},Vl=function(e){var a,i,o,r,u,c=e.t,s=e.action,d=e.closeModal,m=e.submitAction,v=e.applicationData,E=e.businessService,f=Digit.Hooks.useQueryParams(),p=f.loiNumber,g=f.estimateNumber,h=n.useState({}),_=h[0],S=h[1],y=n.useState([]),C=y[0],T=y[1],D=n.useState({}),b=D[0],N=D[1],A=n.useState([]),O=A[0],w=A[1],L=n.useState({}),I=L[0],R=L[1],x=n.useState([])[1],M=n.useState([]),P=M[0],F=M[1],U=n.useState([]),B=U[0],k=U[1],V=n.useState({}),H=V[0],W=V[1],j=[{name:"Estimate Details are incorrect"},{name:"Financial Details are incorrect"},{name:"Agreement Details are incorrect"},{name:"Vendor Details are incorrect"},{name:"Attachments provided are wrong"},{name:"Others"}],z=Digit.Hooks.useCustomMDMS(Digit.ULBService.getCurrentTenantId(),"common-masters",[{name:"Designation"},{name:"Department"}]),G=z.isLoading,Y=z.data;null==Y||null===(a=Y["common-masters"])||void 0===a||null===(i=a.Designation)||void 0===i||i.map(function(e){e.i18nKey="ES_COMMON_DESIGNATION_"+(null==e?void 0:e.name)}),null==Y||null===(o=Y["common-masters"])||void 0===o||null===(r=o.Department)||void 0===r||r.map(function(e){e.i18nKey="ES_COMMON_"+(null==e?void 0:e.code)}),n.useEffect(function(){var e,t;w(null==Y||null===(e=Y["common-masters"])||void 0===e?void 0:e.Department),k(null==Y||null===(t=Y["common-masters"])||void 0===t?void 0:t.Designation),x(j)},[Y]);var q=Digit.Hooks.hrms.useHRMSSearch({designations:null==H?void 0:H.code,departments:null==I?void 0:I.code,roles:null==s||null===(u=s.assigneeRoles)||void 0===u?void 0:u.toString(),isActive:!0},Digit.ULBService.getCurrentTenantId(),null,null,{enabled:"CHECK"===(null==s?void 0:s.action)||"TECHNICALSANCATION"===(null==s?void 0:s.action)}),K=q.isLoading,X=q.data;return null==X||X.Employees.map(function(e){var t;return e.nameOfEmp=(null==e||null===(t=e.user)||void 0===t?void 0:t.name)||"NA"}),n.useEffect(function(){var e;T((null==X||null===(e=X.Employees)||void 0===e?void 0:e.length)>0?null==X?void 0:X.Employees.filter(function(e){return"NA"!==(null==e?void 0:e.nameOfEmp)}):[])},[X]),n.useEffect(function(){var e,n,a,i,o;null!=s&&null!==(e=s.action)&&void 0!==e&&e.includes("CHECK")||null!=s&&null!==(n=s.action)&&void 0!==n&&n.includes("TECHNICALSANCATION")?S(function(e){var n=e.t,a=e.approvers,i=e.selectedApprover,o=e.setSelectedApprover,r=e.designation,u=e.selectedDesignation,c=e.setSelectedDesignation,s=e.department,d=e.selectedDept,m=e.setSelectedDept,v=e.approverLoading,E=void 0!==v&&v,f=!0;return e.action.isTerminateState&&(f=!1),0===(null==r?void 0:r.length)||0===(null==s?void 0:s.length)?{}:{label:{heading:"WORKS_CHECK_FORWARD",submit:"WORKS_FORWARD_FOR_APPROVAL",cancel:"WORKS_CANCEL"},form:[{body:[{label:f?n("WORKS_APPROVER_DEPT"):null,placeholder:f?n("WF_ASSIGNEE_NAME_PLACEHOLDER"):null,isMandatory:!0,type:"goToDefaultCase",populators:f?l.createElement(t.Dropdown,{option:s,autoComplete:"off",optionKey:"i18nKey",id:"sdf",select:function(e){m(e),o("")},selected:d,t:n}):null},{label:f?n("WORKS_APPROVER_DESIGNATION"):null,isMandatory:!0,type:"goToDefaultCase",populators:f?l.createElement(t.Dropdown,{option:r,autoComplete:"off",optionKey:"i18nKey",id:"name2",select:function(e){c(e),o("")},selected:u,t:n}):null},{label:f?n("WORKS_APPROVER"):null,isMandatory:!0,type:"goToDefaultCase",populators:f?E?l.createElement(t.Loader,null):l.createElement(t.Dropdown,{option:a,autoComplete:"off",optionKey:"nameOfEmp",id:"fieldInspector",select:o,selected:i}):null},{label:n("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}}]}]}}({t:c,action:s,businessService:E,approvers:C,selectedApprover:b,setSelectedApprover:N,designation:B,selectedDesignation:H,setSelectedDesignation:W,department:O,selectedDept:I,setSelectedDept:R,approverLoading:K})):null!=s&&null!==(a=s.action)&&void 0!==a&&a.includes("APPROVE")||null!=s&&null!==(i=s.action)&&void 0!==i&&i.includes("ADMINSANCTION")?S(function(e){var t=e.t,n=e.action;return"ADMINSANCTION"===(null==n?void 0:n.action)?{label:{heading:"WORKS_APPROVE_ESTIMATE",submit:"WORKS_APPROVE_ESTIMATE",cancel:"CS_COMMON_CANCEL"},form:[{body:[{label:t("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}}]}]}:{label:{heading:"WORKS_APPROVE_LOI",submit:"WORKS_APPROVE_LOI",cancel:"CS_COMMON_CANCEL"},form:[{body:[{label:t("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}}]}]}}({t:c,action:s})):null!=s&&null!==(o=s.action)&&void 0!==o&&o.includes("REJECT")&&S(function(e){var n=e.t,a=e.rejectReasons,i=e.selectedReason,o=e.setSelectedReason,r=e.loiNumber,u=e.estimateNumber,c=!0;return e.action.isTerminateState&&(c=!1),0===(null==a?void 0:a.length)?{}:r?{label:{heading:"WORKS_REJECT_LOI",submit:"WORKS_REJECT_LOI"},form:[{body:[{withoutLabel:!0,populators:l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{style:{fontSize:"16px",fontWeight:"bold"}},n("WORKS_DEPARTMENT")),l.createElement(t.CardLabel,null,"ENGG"))},{withoutLabel:!0,populators:l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{style:{fontSize:"16px",fontWeight:"bold"}},n("WORKS_LOI_ID")),l.createElement(t.CardLabel,null,r))},{label:c?n("WORKS_REJECT_REASON"):null,type:"goToDefaultCase",populators:c?l.createElement(t.Dropdown,{option:a,autoComplete:"off",optionKey:"name",select:o,selected:i}):null},{label:n("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}}]}]}:{label:{heading:"WORKS_REJECT_ESTIMATE",submit:"WORKS_REJECT_ESTIMATE"},form:[{body:[{withoutLabel:!0,populators:l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{style:{fontSize:"16px",fontWeight:"bold"}},n("WORKS_DEPARTMENT")),l.createElement(t.CardLabel,null,"ENGG"))},{withoutLabel:!0,populators:l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{style:{fontSize:"16px",fontWeight:"bold"}},n("WORKS_ESTIMATE_ID")),l.createElement(t.CardLabel,{style:{width:"100%",marginLeft:"30px"}},u))},{label:c?n("WORKS_REJECT_REASON"):null,type:"goToDefaultCase",populators:c?l.createElement(t.Dropdown,{option:a,autoComplete:"off",optionKey:"name",select:o,selected:i}):null},{label:n("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}}]}]}}({t:c,action:s,rejectReasons:j,selectedReason:P,setSelectedReason:F,loiNumber:p,department:O,estimateNumber:g}))},[C,B,O]),s&&null!=_&&_.form?l.createElement(t.Modal,{headerBarMain:l.createElement(Ul,{label:c(_.label.heading)}),headerBarEnd:l.createElement(kl,{onClick:d}),actionCancelLabel:c(_.label.cancel),actionCancelOnSubmit:d,actionSaveLabel:c(_.label.submit),actionSaveOnSubmit:function(){},formId:"modal-action"},G?l.createElement(t.Loader,null):l.createElement(t.FormComposer,{config:_.form,noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){var t,n={action:null==s?void 0:s.action,comment:null==e?void 0:e.comments,assignees:null!=b&&b.uuid?[null==b?void 0:b.uuid]:void 0};null!=s&&s.action.includes("REJECT")&&(n.assignee=[null==v||null===(t=v.auditDetails)||void 0===t?void 0:t.createdBy]),Object.keys(n).forEach(function(e){void 0===n[e]&&delete n[e]}),m(g?{estimate:v,workflow:n}:{letterOfIndent:v,workflow:n})},defaultValues:{},formId:"modal-action"})):l.createElement(t.Loader,null)},Hl=Ut(function(e,t){(function(){var n="Expected a function",l="__lodash_placeholder__",a=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],i="[object Arguments]",o="[object Array]",r="[object Boolean]",u="[object Date]",c="[object Error]",s="[object Function]",d="[object GeneratorFunction]",m="[object Map]",v="[object Number]",E="[object Object]",f="[object RegExp]",p="[object Set]",g="[object String]",h="[object Symbol]",_="[object WeakMap]",S="[object ArrayBuffer]",y="[object DataView]",C="[object Float32Array]",T="[object Float64Array]",D="[object Int8Array]",b="[object Int16Array]",N="[object Int32Array]",A="[object Uint8Array]",O="[object Uint16Array]",w="[object Uint32Array]",L=/\b__p \+= '';/g,I=/\b(__p \+=) '' \+/g,R=/(__e\(.*?\)|\b__t\)) \+\n'';/g,x=/&(?:amp|lt|gt|quot|#39);/g,M=/[&<>"']/g,P=RegExp(x.source),F=RegExp(M.source),U=/<%-([\s\S]+?)%>/g,B=/<%([\s\S]+?)%>/g,k=/<%=([\s\S]+?)%>/g,V=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,H=/^\w*$/,W=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,j=/[\\^$.*+?()[\]{}|]/g,z=RegExp(j.source),G=/^\s+/,Y=/\s/,q=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,K=/\{\n\/\* \[wrapped with (.+)\] \*/,X=/,? & /,Q=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,J=/[()=,{}\[\]\/\s]/,Z=/\\(\\)?/g,$=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ee=/\w*$/,te=/^[-+]0x[0-9a-f]+$/i,ne=/^0b[01]+$/i,le=/^\[object .+?Constructor\]$/,ae=/^0o[0-7]+$/i,ie=/^(?:0|[1-9]\d*)$/,oe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,re=/($^)/,ue=/['\n\r\u2028\u2029\\]/g,ce="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",se="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",de="["+se+"]",me="["+ce+"]",ve="\\d+",Ee="[a-z\\xdf-\\xf6\\xf8-\\xff]",fe="[^\\ud800-\\udfff"+se+ve+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",pe="\\ud83c[\\udffb-\\udfff]",ge="[^\\ud800-\\udfff]",he="(?:\\ud83c[\\udde6-\\uddff]){2}",_e="[\\ud800-\\udbff][\\udc00-\\udfff]",Se="[A-Z\\xc0-\\xd6\\xd8-\\xde]",ye="(?:"+Ee+"|"+fe+")",Ce="(?:"+Se+"|"+fe+")",Te="(?:"+me+"|"+pe+")?",De="[\\ufe0e\\ufe0f]?"+Te+"(?:\\u200d(?:"+[ge,he,_e].join("|")+")[\\ufe0e\\ufe0f]?"+Te+")*",be="(?:"+["[\\u2700-\\u27bf]",he,_e].join("|")+")"+De,Ne="(?:"+[ge+me+"?",me,he,_e,"[\\ud800-\\udfff]"].join("|")+")",Ae=RegExp("['’]","g"),Oe=RegExp(me,"g"),we=RegExp(pe+"(?="+pe+")|"+Ne+De,"g"),Le=RegExp([Se+"?"+Ee+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[de,Se,"$"].join("|")+")",Ce+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[de,Se+ye,"$"].join("|")+")",Se+"?"+ye+"+(?:['’](?:d|ll|m|re|s|t|ve))?",Se+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ve,be].join("|"),"g"),Ie=RegExp("[\\u200d\\ud800-\\udfff"+ce+"\\ufe0e\\ufe0f]"),Re=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,xe=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Me=-1,Pe={};Pe[C]=Pe[T]=Pe[D]=Pe[b]=Pe[N]=Pe[A]=Pe["[object Uint8ClampedArray]"]=Pe[O]=Pe[w]=!0,Pe[i]=Pe[o]=Pe[S]=Pe[r]=Pe[y]=Pe[u]=Pe[c]=Pe[s]=Pe[m]=Pe[v]=Pe[E]=Pe[f]=Pe[p]=Pe[g]=Pe[_]=!1;var Fe={};Fe[i]=Fe[o]=Fe[S]=Fe[y]=Fe[r]=Fe[u]=Fe[C]=Fe[T]=Fe[D]=Fe[b]=Fe[N]=Fe[m]=Fe[v]=Fe[E]=Fe[f]=Fe[p]=Fe[g]=Fe[h]=Fe[A]=Fe["[object Uint8ClampedArray]"]=Fe[O]=Fe[w]=!0,Fe[c]=Fe[s]=Fe[_]=!1;var Ue={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Be=parseFloat,ke=parseInt,Ve="object"==typeof Ft&&Ft&&Ft.Object===Object&&Ft,He="object"==typeof self&&self&&self.Object===Object&&self,We=Ve||He||Function("return this")(),je=t&&!t.nodeType&&t,ze=je&&e&&!e.nodeType&&e,Ge=ze&&ze.exports===je,Ye=Ge&&Ve.process,qe=function(){try{return ze&&ze.require&&ze.require("util").types||Ye&&Ye.binding&&Ye.binding("util")}catch(e){}}(),Ke=qe&&qe.isArrayBuffer,Xe=qe&&qe.isDate,Qe=qe&&qe.isMap,Je=qe&&qe.isRegExp,Ze=qe&&qe.isSet,$e=qe&&qe.isTypedArray;function et(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function tt(e,t,n,l){for(var a=-1,i=null==e?0:e.length;++a<i;){var o=e[a];t(l,o,n(o),e)}return l}function nt(e,t){for(var n=-1,l=null==e?0:e.length;++n<l&&!1!==t(e[n],n,e););return e}function lt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function at(e,t){for(var n=-1,l=null==e?0:e.length;++n<l;)if(!t(e[n],n,e))return!1;return!0}function it(e,t){for(var n=-1,l=null==e?0:e.length,a=0,i=[];++n<l;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}function ot(e,t){return!(null==e||!e.length)&&pt(e,t,0)>-1}function rt(e,t,n){for(var l=-1,a=null==e?0:e.length;++l<a;)if(n(t,e[l]))return!0;return!1}function ut(e,t){for(var n=-1,l=null==e?0:e.length,a=Array(l);++n<l;)a[n]=t(e[n],n,e);return a}function ct(e,t){for(var n=-1,l=t.length,a=e.length;++n<l;)e[a+n]=t[n];return e}function st(e,t,n,l){var a=-1,i=null==e?0:e.length;for(l&&i&&(n=e[++a]);++a<i;)n=t(n,e[a],a,e);return n}function dt(e,t,n,l){var a=null==e?0:e.length;for(l&&a&&(n=e[--a]);a--;)n=t(n,e[a],a,e);return n}function mt(e,t){for(var n=-1,l=null==e?0:e.length;++n<l;)if(t(e[n],n,e))return!0;return!1}var vt=St("length");function Et(e,t,n){var l;return n(e,function(e,n,a){if(t(e,n,a))return l=n,!1}),l}function ft(e,t,n,l){for(var a=e.length,i=n+(l?1:-1);l?i--:++i<a;)if(t(e[i],i,e))return i;return-1}function pt(e,t,n){return t==t?function(e,t,n){for(var l=n-1,a=e.length;++l<a;)if(e[l]===t)return l;return-1}(e,t,n):ft(e,ht,n)}function gt(e,t,n,l){for(var a=n-1,i=e.length;++a<i;)if(l(e[a],t))return a;return-1}function ht(e){return e!=e}function _t(e,t){var n=null==e?0:e.length;return n?Tt(e,t)/n:NaN}function St(e){return function(t){return null==t?void 0:t[e]}}function yt(e){return function(t){return null==e?void 0:e[t]}}function Ct(e,t,n,l,a){return a(e,function(e,a,i){n=l?(l=!1,e):t(n,e,a,i)}),n}function Tt(e,t){for(var n,l=-1,a=e.length;++l<a;){var i=t(e[l]);void 0!==i&&(n=void 0===n?i:n+i)}return n}function Dt(e,t){for(var n=-1,l=Array(e);++n<e;)l[n]=t(n);return l}function bt(e){return e?e.slice(0,zt(e)+1).replace(G,""):e}function Nt(e){return function(t){return e(t)}}function At(e,t){return ut(t,function(t){return e[t]})}function Ot(e,t){return e.has(t)}function wt(e,t){for(var n=-1,l=e.length;++n<l&&pt(t,e[n],0)>-1;);return n}function Lt(e,t){for(var n=e.length;n--&&pt(t,e[n],0)>-1;);return n}function It(e,t){for(var n=e.length,l=0;n--;)e[n]===t&&++l;return l}var Rt=yt({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),xt=yt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Mt(e){return"\\"+Ue[e]}function Pt(e){return Ie.test(e)}function Ut(e){var t=-1,n=Array(e.size);return e.forEach(function(e,l){n[++t]=[l,e]}),n}function Bt(e,t){return function(n){return e(t(n))}}function kt(e,t){for(var n=-1,a=e.length,i=0,o=[];++n<a;){var r=e[n];r!==t&&r!==l||(e[n]=l,o[i++]=n)}return o}function Vt(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function Ht(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function Wt(e){return Pt(e)?function(e){for(var t=we.lastIndex=0;we.test(e);)++t;return t}(e):vt(e)}function jt(e){return Pt(e)?function(e){return e.match(we)||[]}(e):function(e){return e.split("")}(e)}function zt(e){for(var t=e.length;t--&&Y.test(e.charAt(t)););return t}var Gt=yt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Yt=function e(t){var Y=(t=null==t?We:Yt.defaults(We.Object(),t,Yt.pick(We,xe))).Array,ce=t.Date,se=t.Error,de=t.Function,me=t.Math,ve=t.Object,Ee=t.RegExp,fe=t.String,pe=t.TypeError,ge=Y.prototype,he=ve.prototype,_e=t["__core-js_shared__"],Se=de.prototype.toString,ye=he.hasOwnProperty,Ce=0,Te=function(){var e=/[^.]+$/.exec(_e&&_e.keys&&_e.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),De=he.toString,be=Se.call(ve),Ne=We._,we=Ee("^"+Se.call(ye).replace(j,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ie=Ge?t.Buffer:void 0,Ue=t.Symbol,Ve=t.Uint8Array,He=Ie?Ie.allocUnsafe:void 0,je=Bt(ve.getPrototypeOf,ve),ze=ve.create,Ye=he.propertyIsEnumerable,qe=ge.splice,vt=Ue?Ue.isConcatSpreadable:void 0,yt=Ue?Ue.iterator:void 0,Ft=Ue?Ue.toStringTag:void 0,qt=function(){try{var e=Ja(ve,"defineProperty");return e({},"",{}),e}catch(e){}}(),Kt=t.clearTimeout!==We.clearTimeout&&t.clearTimeout,Xt=ce&&ce.now!==We.Date.now&&ce.now,Qt=t.setTimeout!==We.setTimeout&&t.setTimeout,Jt=me.ceil,Zt=me.floor,$t=ve.getOwnPropertySymbols,en=Ie?Ie.isBuffer:void 0,tn=t.isFinite,nn=ge.join,ln=Bt(ve.keys,ve),an=me.max,on=me.min,rn=ce.now,un=t.parseInt,cn=me.random,sn=ge.reverse,dn=Ja(t,"DataView"),mn=Ja(t,"Map"),vn=Ja(t,"Promise"),En=Ja(t,"Set"),fn=Ja(t,"WeakMap"),pn=Ja(ve,"create"),gn=fn&&new fn,hn={},_n=Ni(dn),Sn=Ni(mn),yn=Ni(vn),Cn=Ni(En),Tn=Ni(fn),Dn=Ue?Ue.prototype:void 0,bn=Dn?Dn.valueOf:void 0,Nn=Dn?Dn.toString:void 0;function An(e){if(zo(e)&&!xo(e)&&!(e instanceof In)){if(e instanceof Ln)return e;if(ye.call(e,"__wrapped__"))return Ai(e)}return new Ln(e)}var On=function(){function e(){}return function(t){if(!jo(t))return{};if(ze)return ze(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function wn(){}function Ln(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function In(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Rn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var l=e[t];this.set(l[0],l[1])}}function xn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var l=e[t];this.set(l[0],l[1])}}function Mn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var l=e[t];this.set(l[0],l[1])}}function Pn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Mn;++t<n;)this.add(e[t])}function Fn(e){var t=this.__data__=new xn(e);this.size=t.size}function Un(e,t){var n=xo(e),l=!n&&Ro(e),a=!n&&!l&&Uo(e),i=!n&&!l&&!a&&Zo(e),o=n||l||a||i,r=o?Dt(e.length,fe):[],u=r.length;for(var c in e)!t&&!ye.call(e,c)||o&&("length"==c||a&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ai(c,u))||r.push(c);return r}function Bn(e){var t=e.length;return t?e[Ml(0,t-1)]:void 0}function kn(e,t){return yi(fa(e),Kn(t,0,e.length))}function Vn(e){return yi(fa(e))}function Hn(e,t,n){(void 0!==n&&!wo(e[t],n)||void 0===n&&!(t in e))&&Yn(e,t,n)}function Wn(e,t,n){var l=e[t];ye.call(e,t)&&wo(l,n)&&(void 0!==n||t in e)||Yn(e,t,n)}function jn(e,t){for(var n=e.length;n--;)if(wo(e[n][0],t))return n;return-1}function zn(e,t,n,l){return $n(e,function(e,a,i){t(l,e,n(e),i)}),l}function Gn(e,t){return e&&pa(t,Sr(t),e)}function Yn(e,t,n){"__proto__"==t&&qt?qt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function qn(e,t){for(var n=-1,l=t.length,a=Y(l),i=null==e;++n<l;)a[n]=i?void 0:fr(e,t[n]);return a}function Kn(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function Xn(e,t,n,l,a,o){var c,_=1&t,L=2&t,I=4&t;if(n&&(c=a?n(e,l,a,o):n(e)),void 0!==c)return c;if(!jo(e))return e;var R=xo(e);if(R){if(c=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&ye.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!_)return fa(e,c)}else{var x=ei(e),M=x==s||x==d;if(Uo(e))return ca(e,_);if(x==E||x==i||M&&!a){if(c=L||M?{}:ni(e),!_)return L?function(e,t){return pa(e,$a(e),t)}(e,function(e,t){return e&&pa(t,yr(t),e)}(c,e)):function(e,t){return pa(e,Za(e),t)}(e,Gn(c,e))}else{if(!Fe[x])return a?e:{};c=function(e,t,n){var l=e.constructor;switch(t){case S:return sa(e);case r:case u:return new l(+e);case y:return function(e,t){var n=t?sa(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case C:case T:case D:case b:case N:case A:case"[object Uint8ClampedArray]":case O:case w:return da(e,n);case m:return new l;case v:case g:return new l(e);case f:return function(e){var t=new e.constructor(e.source,ee.exec(e));return t.lastIndex=e.lastIndex,t}(e);case p:return new l;case h:return bn?ve(bn.call(e)):{}}}(e,x,_)}}o||(o=new Fn);var P=o.get(e);if(P)return P;o.set(e,c),Xo(e)?e.forEach(function(l){c.add(Xn(l,t,n,l,e,o))}):Go(e)&&e.forEach(function(l,a){c.set(a,Xn(l,t,n,a,e,o))});var F=R?void 0:(I?L?za:ja:L?yr:Sr)(e);return nt(F||e,function(l,a){F&&(l=e[a=l]),Wn(c,a,Xn(l,t,n,a,e,o))}),c}function Qn(e,t,n){var l=n.length;if(null==e)return!l;for(e=ve(e);l--;){var a=n[l],i=e[a];if(void 0===i&&!(a in e)||!(0,t[a])(i))return!1}return!0}function Jn(e,t,l){if("function"!=typeof e)throw new pe(n);return gi(function(){e.apply(void 0,l)},t)}function Zn(e,t,n,l){var a=-1,i=ot,o=!0,r=e.length,u=[],c=t.length;if(!r)return u;n&&(t=ut(t,Nt(n))),l?(i=rt,o=!1):t.length>=200&&(i=Ot,o=!1,t=new Pn(t));e:for(;++a<r;){var s=e[a],d=null==n?s:n(s);if(s=l||0!==s?s:0,o&&d==d){for(var m=c;m--;)if(t[m]===d)continue e;u.push(s)}else i(t,d,l)||u.push(s)}return u}An.templateSettings={escape:U,evaluate:B,interpolate:k,variable:"",imports:{_:An}},(An.prototype=wn.prototype).constructor=An,(Ln.prototype=On(wn.prototype)).constructor=Ln,(In.prototype=On(wn.prototype)).constructor=In,Rn.prototype.clear=function(){this.__data__=pn?pn(null):{},this.size=0},Rn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Rn.prototype.get=function(e){var t=this.__data__;if(pn){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return ye.call(t,e)?t[e]:void 0},Rn.prototype.has=function(e){var t=this.__data__;return pn?void 0!==t[e]:ye.call(t,e)},Rn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=pn&&void 0===t?"__lodash_hash_undefined__":t,this},xn.prototype.clear=function(){this.__data__=[],this.size=0},xn.prototype.delete=function(e){var t=this.__data__,n=jn(t,e);return!(n<0||(n==t.length-1?t.pop():qe.call(t,n,1),--this.size,0))},xn.prototype.get=function(e){var t=this.__data__,n=jn(t,e);return n<0?void 0:t[n][1]},xn.prototype.has=function(e){return jn(this.__data__,e)>-1},xn.prototype.set=function(e,t){var n=this.__data__,l=jn(n,e);return l<0?(++this.size,n.push([e,t])):n[l][1]=t,this},Mn.prototype.clear=function(){this.size=0,this.__data__={hash:new Rn,map:new(mn||xn),string:new Rn}},Mn.prototype.delete=function(e){var t=Xa(this,e).delete(e);return this.size-=t?1:0,t},Mn.prototype.get=function(e){return Xa(this,e).get(e)},Mn.prototype.has=function(e){return Xa(this,e).has(e)},Mn.prototype.set=function(e,t){var n=Xa(this,e),l=n.size;return n.set(e,t),this.size+=n.size==l?0:1,this},Pn.prototype.add=Pn.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Pn.prototype.has=function(e){return this.__data__.has(e)},Fn.prototype.clear=function(){this.__data__=new xn,this.size=0},Fn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Fn.prototype.get=function(e){return this.__data__.get(e)},Fn.prototype.has=function(e){return this.__data__.has(e)},Fn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof xn){var l=n.__data__;if(!mn||l.length<199)return l.push([e,t]),this.size=++n.size,this;n=this.__data__=new Mn(l)}return n.set(e,t),this.size=n.size,this};var $n=_a(rl),el=_a(ul,!0);function tl(e,t){var n=!0;return $n(e,function(e,l,a){return n=!!t(e,l,a)}),n}function nl(e,t,n){for(var l=-1,a=e.length;++l<a;){var i=e[l],o=t(i);if(null!=o&&(void 0===r?o==o&&!Jo(o):n(o,r)))var r=o,u=i}return u}function ll(e,t){var n=[];return $n(e,function(e,l,a){t(e,l,a)&&n.push(e)}),n}function al(e,t,n,l,a){var i=-1,o=e.length;for(n||(n=li),a||(a=[]);++i<o;){var r=e[i];t>0&&n(r)?t>1?al(r,t-1,n,l,a):ct(a,r):l||(a[a.length]=r)}return a}var il=Sa(),ol=Sa(!0);function rl(e,t){return e&&il(e,t,Sr)}function ul(e,t){return e&&ol(e,t,Sr)}function cl(e,t){return it(t,function(t){return Vo(e[t])})}function sl(e,t){for(var n=0,l=(t=ia(t,e)).length;null!=e&&n<l;)e=e[bi(t[n++])];return n&&n==l?e:void 0}function dl(e,t,n){var l=t(e);return xo(e)?l:ct(l,n(e))}function ml(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Ft&&Ft in ve(e)?function(e){var t=ye.call(e,Ft),n=e[Ft];try{e[Ft]=void 0;var l=!0}catch(e){}var a=De.call(e);return l&&(t?e[Ft]=n:delete e[Ft]),a}(e):function(e){return De.call(e)}(e)}function vl(e,t){return e>t}function El(e,t){return null!=e&&ye.call(e,t)}function fl(e,t){return null!=e&&t in ve(e)}function pl(e,t,n){for(var l=n?rt:ot,a=e[0].length,i=e.length,o=i,r=Y(i),u=Infinity,c=[];o--;){var s=e[o];o&&t&&(s=ut(s,Nt(t))),u=on(s.length,u),r[o]=!n&&(t||a>=120&&s.length>=120)?new Pn(o&&s):void 0}s=e[0];var d=-1,m=r[0];e:for(;++d<a&&c.length<u;){var v=s[d],E=t?t(v):v;if(v=n||0!==v?v:0,!(m?Ot(m,E):l(c,E,n))){for(o=i;--o;){var f=r[o];if(!(f?Ot(f,E):l(e[o],E,n)))continue e}m&&m.push(E),c.push(v)}}return c}function gl(e,t,n){var l=null==(e=vi(e,t=ia(t,e)))?e:e[bi(Bi(t))];return null==l?void 0:et(l,e,n)}function hl(e){return zo(e)&&ml(e)==i}function _l(e,t,n,l,a){return e===t||(null==e||null==t||!zo(e)&&!zo(t)?e!=e&&t!=t:function(e,t,n,l,a,s){var d=xo(e),_=xo(t),C=d?o:ei(e),T=_?o:ei(t),D=(C=C==i?E:C)==E,b=(T=T==i?E:T)==E,N=C==T;if(N&&Uo(e)){if(!Uo(t))return!1;d=!0,D=!1}if(N&&!D)return s||(s=new Fn),d||Zo(e)?Ha(e,t,n,l,a,s):function(e,t,n,l,a,i,o){switch(n){case y:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case S:return!(e.byteLength!=t.byteLength||!i(new Ve(e),new Ve(t)));case r:case u:case v:return wo(+e,+t);case c:return e.name==t.name&&e.message==t.message;case f:case g:return e==t+"";case m:var s=Ut;case p:if(s||(s=Vt),e.size!=t.size&&!(1&l))return!1;var d=o.get(e);if(d)return d==t;l|=2,o.set(e,t);var E=Ha(s(e),s(t),l,a,i,o);return o.delete(e),E;case h:if(bn)return bn.call(e)==bn.call(t)}return!1}(e,t,C,n,l,a,s);if(!(1&n)){var A=D&&ye.call(e,"__wrapped__"),O=b&&ye.call(t,"__wrapped__");if(A||O){var w=A?e.value():e,L=O?t.value():t;return s||(s=new Fn),a(w,L,n,l,s)}}return!!N&&(s||(s=new Fn),function(e,t,n,l,a,i){var o=1&n,r=ja(e),u=r.length;if(u!=ja(t).length&&!o)return!1;for(var c=u;c--;){var s=r[c];if(!(o?s in t:ye.call(t,s)))return!1}var d=i.get(e),m=i.get(t);if(d&&m)return d==t&&m==e;var v=!0;i.set(e,t),i.set(t,e);for(var E=o;++c<u;){var f=e[s=r[c]],p=t[s];if(l)var g=o?l(p,f,s,t,e,i):l(f,p,s,e,t,i);if(!(void 0===g?f===p||a(f,p,n,l,i):g)){v=!1;break}E||(E="constructor"==s)}if(v&&!E){var h=e.constructor,_=t.constructor;h==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof h&&h instanceof h&&"function"==typeof _&&_ instanceof _||(v=!1)}return i.delete(e),i.delete(t),v}(e,t,n,l,a,s))}(e,t,n,l,_l,a))}function Sl(e,t,n,l){var a=n.length,i=a,o=!l;if(null==e)return!i;for(e=ve(e);a--;){var r=n[a];if(o&&r[2]?r[1]!==e[r[0]]:!(r[0]in e))return!1}for(;++a<i;){var u=(r=n[a])[0],c=e[u],s=r[1];if(o&&r[2]){if(void 0===c&&!(u in e))return!1}else{var d=new Fn;if(l)var m=l(c,s,u,e,t,d);if(!(void 0===m?_l(s,c,3,l,d):m))return!1}}return!0}function yl(e){return!(!jo(e)||(t=e,Te&&Te in t))&&(Vo(e)?we:le).test(Ni(e));var t}function Cl(e){return"function"==typeof e?e:null==e?Yr:"object"==typeof e?xo(e)?Al(e[0],e[1]):Nl(e):tu(e)}function Tl(e){if(!ci(e))return ln(e);var t=[];for(var n in ve(e))ye.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Dl(e,t){return e<t}function bl(e,t){var n=-1,l=Po(e)?Y(e.length):[];return $n(e,function(e,a,i){l[++n]=t(e,a,i)}),l}function Nl(e){var t=Qa(e);return 1==t.length&&t[0][2]?di(t[0][0],t[0][1]):function(n){return n===e||Sl(n,e,t)}}function Al(e,t){return oi(e)&&si(t)?di(bi(e),t):function(n){var l=fr(n,e);return void 0===l&&l===t?pr(n,e):_l(t,l,3)}}function Ol(e,t,n,l,a){e!==t&&il(t,function(i,o){if(a||(a=new Fn),jo(i))!function(e,t,n,l,a,i,o){var r=fi(e,n),u=fi(t,n),c=o.get(u);if(c)Hn(e,n,c);else{var s=i?i(r,u,n+"",e,t,o):void 0,d=void 0===s;if(d){var m=xo(u),v=!m&&Uo(u),E=!m&&!v&&Zo(u);s=u,m||v||E?xo(r)?s=r:Fo(r)?s=fa(r):v?(d=!1,s=ca(u,!0)):E?(d=!1,s=da(u,!0)):s=[]:qo(u)||Ro(u)?(s=r,Ro(r)?s=or(r):jo(r)&&!Vo(r)||(s=ni(u))):d=!1}d&&(o.set(u,s),a(s,u,l,i,o),o.delete(u)),Hn(e,n,s)}}(e,t,o,n,Ol,l,a);else{var r=l?l(fi(e,o),i,o+"",e,t,a):void 0;void 0===r&&(r=i),Hn(e,o,r)}},yr)}function wl(e,t){var n=e.length;if(n)return ai(t+=t<0?n:0,n)?e[t]:void 0}function Ll(e,t,n){t=t.length?ut(t,function(e){return xo(e)?function(t){return sl(t,1===e.length?e[0]:e)}:e}):[Yr];var l=-1;return t=ut(t,Nt(Ka())),function(e,t){var l=e.length;for(e.sort(function(e,t){return function(e,t,n){for(var l=-1,a=e.criteria,i=t.criteria,o=a.length,r=n.length;++l<o;){var u=ma(a[l],i[l]);if(u)return l>=r?u:u*("desc"==n[l]?-1:1)}return e.index-t.index}(e,t,n)});l--;)e[l]=e[l].value;return e}(bl(e,function(e,n,a){return{criteria:ut(t,function(t){return t(e)}),index:++l,value:e}}))}function Il(e,t,n){for(var l=-1,a=t.length,i={};++l<a;){var o=t[l],r=sl(e,o);n(r,o)&&kl(i,ia(o,e),r)}return i}function Rl(e,t,n,l){var a=l?gt:pt,i=-1,o=t.length,r=e;for(e===t&&(t=fa(t)),n&&(r=ut(e,Nt(n)));++i<o;)for(var u=0,c=t[i],s=n?n(c):c;(u=a(r,s,u,l))>-1;)r!==e&&qe.call(r,u,1),qe.call(e,u,1);return e}function xl(e,t){for(var n=e?t.length:0,l=n-1;n--;){var a=t[n];if(n==l||a!==i){var i=a;ai(a)?qe.call(e,a,1):Jl(e,a)}}return e}function Ml(e,t){return e+Zt(cn()*(t-e+1))}function Pl(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=Zt(t/2))&&(e+=e)}while(t);return n}function Fl(e,t){return hi(mi(e,t,Yr),e+"")}function Ul(e){return Bn(wr(e))}function Bl(e,t){var n=wr(e);return yi(n,Kn(t,0,n.length))}function kl(e,t,n,l){if(!jo(e))return e;for(var a=-1,i=(t=ia(t,e)).length,o=i-1,r=e;null!=r&&++a<i;){var u=bi(t[a]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(a!=o){var s=r[u];void 0===(c=l?l(s,u,r):void 0)&&(c=jo(s)?s:ai(t[a+1])?[]:{})}Wn(r,u,c),r=r[u]}return e}var Vl=gn?function(e,t){return gn.set(e,t),e}:Yr,Hl=qt?function(e,t){return qt(e,"toString",{configurable:!0,enumerable:!1,value:jr(t),writable:!0})}:Yr;function Wl(e){return yi(wr(e))}function jl(e,t,n){var l=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var i=Y(a);++l<a;)i[l]=e[l+t];return i}function zl(e,t){var n;return $n(e,function(e,l,a){return!(n=t(e,l,a))}),!!n}function Gl(e,t,n){var l=0,a=null==e?l:e.length;if("number"==typeof t&&t==t&&a<=2147483647){for(;l<a;){var i=l+a>>>1,o=e[i];null!==o&&!Jo(o)&&(n?o<=t:o<t)?l=i+1:a=i}return a}return Yl(e,t,Yr,n)}function Yl(e,t,n,l){var a=0,i=null==e?0:e.length;if(0===i)return 0;for(var o=(t=n(t))!=t,r=null===t,u=Jo(t),c=void 0===t;a<i;){var s=Zt((a+i)/2),d=n(e[s]),m=void 0!==d,v=null===d,E=d==d,f=Jo(d);if(o)var p=l||E;else p=c?E&&(l||m):r?E&&m&&(l||!v):u?E&&m&&!v&&(l||!f):!v&&!f&&(l?d<=t:d<t);p?a=s+1:i=s}return on(i,4294967294)}function ql(e,t){for(var n=-1,l=e.length,a=0,i=[];++n<l;){var o=e[n],r=t?t(o):o;if(!n||!wo(r,u)){var u=r;i[a++]=0===o?0:o}}return i}function Kl(e){return"number"==typeof e?e:Jo(e)?NaN:+e}function Xl(e){if("string"==typeof e)return e;if(xo(e))return ut(e,Xl)+"";if(Jo(e))return Nn?Nn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ql(e,t,n){var l=-1,a=ot,i=e.length,o=!0,r=[],u=r;if(n)o=!1,a=rt;else if(i>=200){var c=t?null:Pa(e);if(c)return Vt(c);o=!1,a=Ot,u=new Pn}else u=t?[]:r;e:for(;++l<i;){var s=e[l],d=t?t(s):s;if(s=n||0!==s?s:0,o&&d==d){for(var m=u.length;m--;)if(u[m]===d)continue e;t&&u.push(d),r.push(s)}else a(u,d,n)||(u!==r&&u.push(d),r.push(s))}return r}function Jl(e,t){return null==(e=vi(e,t=ia(t,e)))||delete e[bi(Bi(t))]}function Zl(e,t,n,l){return kl(e,t,n(sl(e,t)),l)}function $l(e,t,n,l){for(var a=e.length,i=l?a:-1;(l?i--:++i<a)&&t(e[i],i,e););return n?jl(e,l?0:i,l?i+1:a):jl(e,l?i+1:0,l?a:i)}function ea(e,t){var n=e;return n instanceof In&&(n=n.value()),st(t,function(e,t){return t.func.apply(t.thisArg,ct([e],t.args))},n)}function ta(e,t,n){var l=e.length;if(l<2)return l?Ql(e[0]):[];for(var a=-1,i=Y(l);++a<l;)for(var o=e[a],r=-1;++r<l;)r!=a&&(i[a]=Zn(i[a]||o,e[r],t,n));return Ql(al(i,1),t,n)}function na(e,t,n){for(var l=-1,a=e.length,i=t.length,o={};++l<a;)n(o,e[l],l<i?t[l]:void 0);return o}function la(e){return Fo(e)?e:[]}function aa(e){return"function"==typeof e?e:Yr}function ia(e,t){return xo(e)?e:oi(e,t)?[e]:Di(rr(e))}var oa=Fl;function ra(e,t,n){var l=e.length;return n=void 0===n?l:n,!t&&n>=l?e:jl(e,t,n)}var ua=Kt||function(e){return We.clearTimeout(e)};function ca(e,t){if(t)return e.slice();var n=e.length,l=He?He(n):new e.constructor(n);return e.copy(l),l}function sa(e){var t=new e.constructor(e.byteLength);return new Ve(t).set(new Ve(e)),t}function da(e,t){var n=t?sa(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function ma(e,t){if(e!==t){var n=void 0!==e,l=null===e,a=e==e,i=Jo(e),o=void 0!==t,r=null===t,u=t==t,c=Jo(t);if(!r&&!c&&!i&&e>t||i&&o&&u&&!r&&!c||l&&o&&u||!n&&u||!a)return 1;if(!l&&!i&&!c&&e<t||c&&n&&a&&!l&&!i||r&&n&&a||!o&&a||!u)return-1}return 0}function va(e,t,n,l){for(var a=-1,i=e.length,o=n.length,r=-1,u=t.length,c=an(i-o,0),s=Y(u+c),d=!l;++r<u;)s[r]=t[r];for(;++a<o;)(d||a<i)&&(s[n[a]]=e[a]);for(;c--;)s[r++]=e[a++];return s}function Ea(e,t,n,l){for(var a=-1,i=e.length,o=-1,r=n.length,u=-1,c=t.length,s=an(i-r,0),d=Y(s+c),m=!l;++a<s;)d[a]=e[a];for(var v=a;++u<c;)d[v+u]=t[u];for(;++o<r;)(m||a<i)&&(d[v+n[o]]=e[a++]);return d}function fa(e,t){var n=-1,l=e.length;for(t||(t=Y(l));++n<l;)t[n]=e[n];return t}function pa(e,t,n,l){var a=!n;n||(n={});for(var i=-1,o=t.length;++i<o;){var r=t[i],u=l?l(n[r],e[r],r,n,e):void 0;void 0===u&&(u=e[r]),a?Yn(n,r,u):Wn(n,r,u)}return n}function ga(e,t){return function(n,l){var a=xo(n)?tt:zn,i=t?t():{};return a(n,e,Ka(l,2),i)}}function ha(e){return Fl(function(t,n){var l=-1,a=n.length,i=a>1?n[a-1]:void 0,o=a>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(a--,i):void 0,o&&ii(n[0],n[1],o)&&(i=a<3?void 0:i,a=1),t=ve(t);++l<a;){var r=n[l];r&&e(t,r,l,i)}return t})}function _a(e,t){return function(n,l){if(null==n)return n;if(!Po(n))return e(n,l);for(var a=n.length,i=t?a:-1,o=ve(n);(t?i--:++i<a)&&!1!==l(o[i],i,o););return n}}function Sa(e){return function(t,n,l){for(var a=-1,i=ve(t),o=l(t),r=o.length;r--;){var u=o[e?r:++a];if(!1===n(i[u],u,i))break}return t}}function ya(e){return function(t){var n=Pt(t=rr(t))?jt(t):void 0,l=n?n[0]:t.charAt(0),a=n?ra(n,1).join(""):t.slice(1);return l[e]()+a}}function Ca(e){return function(t){return st(Vr(Rr(t).replace(Ae,"")),e,"")}}function Ta(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=On(e.prototype),l=e.apply(n,t);return jo(l)?l:n}}function Da(e){return function(t,n,l){var a=ve(t);if(!Po(t)){var i=Ka(n,3);t=Sr(t),n=function(e){return i(a[e],e,a)}}var o=e(t,n,l);return o>-1?a[i?t[o]:o]:void 0}}function ba(e){return Wa(function(t){var l=t.length,a=l,i=Ln.prototype.thru;for(e&&t.reverse();a--;){var o=t[a];if("function"!=typeof o)throw new pe(n);if(i&&!r&&"wrapper"==Ya(o))var r=new Ln([],!0)}for(a=r?a:l;++a<l;){var u=Ya(o=t[a]),c="wrapper"==u?Ga(o):void 0;r=c&&ri(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?r[Ya(c[0])].apply(r,c[3]):1==o.length&&ri(o)?r[u]():r.thru(o)}return function(){var e=arguments,n=e[0];if(r&&1==e.length&&xo(n))return r.plant(n).value();for(var a=0,i=l?t[a].apply(this,e):n;++a<l;)i=t[a].call(this,i);return i}})}function Na(e,t,n,l,a,i,o,r,u,c){var s=128&t,d=1&t,m=2&t,v=24&t,E=512&t,f=m?void 0:Ta(e);return function p(){for(var g=arguments.length,h=Y(g),_=g;_--;)h[_]=arguments[_];if(v)var S=qa(p),y=It(h,S);if(l&&(h=va(h,l,a,v)),i&&(h=Ea(h,i,o,v)),g-=y,v&&g<c){var C=kt(h,S);return xa(e,t,Na,p.placeholder,n,h,C,r,u,c-g)}var T=d?n:this,D=m?T[e]:e;return g=h.length,r?h=Ei(h,r):E&&g>1&&h.reverse(),s&&u<g&&(h.length=u),this&&this!==We&&this instanceof p&&(D=f||Ta(D)),D.apply(T,h)}}function Aa(e,t){return function(n,l){return function(e,t,n,l){return rl(e,function(e,a,i){t(l,n(e),a,i)}),l}(n,e,t(l),{})}}function Oa(e,t){return function(n,l){var a;if(void 0===n&&void 0===l)return t;if(void 0!==n&&(a=n),void 0!==l){if(void 0===a)return l;"string"==typeof n||"string"==typeof l?(n=Xl(n),l=Xl(l)):(n=Kl(n),l=Kl(l)),a=e(n,l)}return a}}function wa(e){return Wa(function(t){return t=ut(t,Nt(Ka())),Fl(function(n){var l=this;return e(t,function(e){return et(e,l,n)})})})}function La(e,t){var n=(t=void 0===t?" ":Xl(t)).length;if(n<2)return n?Pl(t,e):t;var l=Pl(t,Jt(e/Wt(t)));return Pt(t)?ra(jt(l),0,e).join(""):l.slice(0,e)}function Ia(e){return function(t,n,l){return l&&"number"!=typeof l&&ii(t,n,l)&&(n=l=void 0),t=nr(t),void 0===n?(n=t,t=0):n=nr(n),function(e,t,n,l){for(var a=-1,i=an(Jt((t-e)/(n||1)),0),o=Y(i);i--;)o[l?i:++a]=e,e+=n;return o}(t,n,l=void 0===l?t<n?1:-1:nr(l),e)}}function Ra(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ir(t),n=ir(n)),e(t,n)}}function xa(e,t,n,l,a,i,o,r,u,c){var s=8&t;t|=s?32:64,4&(t&=~(s?64:32))||(t&=-4);var d=[e,t,a,s?i:void 0,s?o:void 0,s?void 0:i,s?void 0:o,r,u,c],m=n.apply(void 0,d);return ri(e)&&pi(m,d),m.placeholder=l,_i(m,e,t)}function Ma(e){var t=me[e];return function(e,n){if(e=ir(e),(n=null==n?0:on(lr(n),292))&&tn(e)){var l=(rr(e)+"e").split("e");return+((l=(rr(t(l[0]+"e"+(+l[1]+n)))+"e").split("e"))[0]+"e"+(+l[1]-n))}return t(e)}}var Pa=En&&1/Vt(new En([,-0]))[1]==1/0?function(e){return new En(e)}:Jr;function Fa(e){return function(t){var n=ei(t);return n==m?Ut(t):n==p?Ht(t):function(e,t){return ut(t,function(t){return[t,e[t]]})}(t,e(t))}}function Ua(e,t,a,i,o,r,u,c){var s=2&t;if(!s&&"function"!=typeof e)throw new pe(n);var d=i?i.length:0;if(d||(t&=-97,i=o=void 0),u=void 0===u?u:an(lr(u),0),c=void 0===c?c:lr(c),d-=o?o.length:0,64&t){var m=i,v=o;i=o=void 0}var E=s?void 0:Ga(e),f=[e,t,a,i,o,m,v,r,u,c];if(E&&function(e,t){var n=e[1],a=t[1],i=n|a;if(!(i<131||128==a&&8==n||128==a&&256==n&&e[7].length<=t[8]||384==a&&t[7].length<=t[8]&&8==n))return e;1&a&&(e[2]=t[2],i|=1&n?0:4);var o=t[3];if(o){var r=e[3];e[3]=r?va(r,o,t[4]):o,e[4]=r?kt(e[3],l):t[4]}(o=t[5])&&(e[5]=(r=e[5])?Ea(r,o,t[6]):o,e[6]=r?kt(e[5],l):t[6]),(o=t[7])&&(e[7]=o),128&a&&(e[8]=null==e[8]?t[8]:on(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(f,E),e=f[0],t=f[1],a=f[2],i=f[3],o=f[4],!(c=f[9]=void 0===f[9]?s?0:e.length:an(f[9]-d,0))&&24&t&&(t&=-25),t&&1!=t)p=8==t||16==t?function(e,t,n){var l=Ta(e);return function a(){for(var i=arguments.length,o=Y(i),r=i,u=qa(a);r--;)o[r]=arguments[r];var c=i<3&&o[0]!==u&&o[i-1]!==u?[]:kt(o,u);if((i-=c.length)<n)return xa(e,t,Na,a.placeholder,void 0,o,c,void 0,void 0,n-i);var s=this&&this!==We&&this instanceof a?l:e;return et(s,this,o)}}(e,t,c):32!=t&&33!=t||o.length?Na.apply(void 0,f):function(e,t,n,l){var a=1&t,i=Ta(e);return function t(){for(var o=-1,r=arguments.length,u=-1,c=l.length,s=Y(c+r),d=this&&this!==We&&this instanceof t?i:e;++u<c;)s[u]=l[u];for(;r--;)s[u++]=arguments[++o];return et(d,a?n:this,s)}}(e,t,a,i);else var p=function(e,t,n){var l=1&t,a=Ta(e);return function t(){var i=this&&this!==We&&this instanceof t?a:e;return i.apply(l?n:this,arguments)}}(e,t,a);return _i((E?Vl:pi)(p,f),e,t)}function Ba(e,t,n,l){return void 0===e||wo(e,he[n])&&!ye.call(l,n)?t:e}function ka(e,t,n,l,a,i){return jo(e)&&jo(t)&&(i.set(t,e),Ol(e,t,void 0,ka,i),i.delete(t)),e}function Va(e){return qo(e)?void 0:e}function Ha(e,t,n,l,a,i){var o=1&n,r=e.length,u=t.length;if(r!=u&&!(o&&u>r))return!1;var c=i.get(e),s=i.get(t);if(c&&s)return c==t&&s==e;var d=-1,m=!0,v=2&n?new Pn:void 0;for(i.set(e,t),i.set(t,e);++d<r;){var E=e[d],f=t[d];if(l)var p=o?l(f,E,d,t,e,i):l(E,f,d,e,t,i);if(void 0!==p){if(p)continue;m=!1;break}if(v){if(!mt(t,function(e,t){if(!Ot(v,t)&&(E===e||a(E,e,n,l,i)))return v.push(t)})){m=!1;break}}else if(E!==f&&!a(E,f,n,l,i)){m=!1;break}}return i.delete(e),i.delete(t),m}function Wa(e){return hi(mi(e,void 0,xi),e+"")}function ja(e){return dl(e,Sr,Za)}function za(e){return dl(e,yr,$a)}var Ga=gn?function(e){return gn.get(e)}:Jr;function Ya(e){for(var t=e.name+"",n=hn[t],l=ye.call(hn,t)?n.length:0;l--;){var a=n[l],i=a.func;if(null==i||i==e)return a.name}return t}function qa(e){return(ye.call(An,"placeholder")?An:e).placeholder}function Ka(){var e=An.iteratee||qr;return e=e===qr?Cl:e,arguments.length?e(arguments[0],arguments[1]):e}function Xa(e,t){var n,l,a=e.__data__;return("string"==(l=typeof(n=t))||"number"==l||"symbol"==l||"boolean"==l?"__proto__"!==n:null===n)?a["string"==typeof t?"string":"hash"]:a.map}function Qa(e){for(var t=Sr(e),n=t.length;n--;){var l=t[n],a=e[l];t[n]=[l,a,si(a)]}return t}function Ja(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return yl(n)?n:void 0}var Za=$t?function(e){return null==e?[]:(e=ve(e),it($t(e),function(t){return Ye.call(e,t)}))}:au,$a=$t?function(e){for(var t=[];e;)ct(t,Za(e)),e=je(e);return t}:au,ei=ml;function ti(e,t,n){for(var l=-1,a=(t=ia(t,e)).length,i=!1;++l<a;){var o=bi(t[l]);if(!(i=null!=e&&n(e,o)))break;e=e[o]}return i||++l!=a?i:!!(a=null==e?0:e.length)&&Wo(a)&&ai(o,a)&&(xo(e)||Ro(e))}function ni(e){return"function"!=typeof e.constructor||ci(e)?{}:On(je(e))}function li(e){return xo(e)||Ro(e)||!!(vt&&e&&e[vt])}function ai(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&ie.test(e))&&e>-1&&e%1==0&&e<t}function ii(e,t,n){if(!jo(n))return!1;var l=typeof t;return!!("number"==l?Po(n)&&ai(t,n.length):"string"==l&&t in n)&&wo(n[t],e)}function oi(e,t){if(xo(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Jo(e))||H.test(e)||!V.test(e)||null!=t&&e in ve(t)}function ri(e){var t=Ya(e),n=An[t];if("function"!=typeof n||!(t in In.prototype))return!1;if(e===n)return!0;var l=Ga(n);return!!l&&e===l[0]}(dn&&ei(new dn(new ArrayBuffer(1)))!=y||mn&&ei(new mn)!=m||vn&&"[object Promise]"!=ei(vn.resolve())||En&&ei(new En)!=p||fn&&ei(new fn)!=_)&&(ei=function(e){var t=ml(e),n=t==E?e.constructor:void 0,l=n?Ni(n):"";if(l)switch(l){case _n:return y;case Sn:return m;case yn:return"[object Promise]";case Cn:return p;case Tn:return _}return t});var ui=_e?Vo:iu;function ci(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||he)}function si(e){return e==e&&!jo(e)}function di(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in ve(n))}}function mi(e,t,n){return t=an(void 0===t?e.length-1:t,0),function(){for(var l=arguments,a=-1,i=an(l.length-t,0),o=Y(i);++a<i;)o[a]=l[t+a];a=-1;for(var r=Y(t+1);++a<t;)r[a]=l[a];return r[t]=n(o),et(e,this,r)}}function vi(e,t){return t.length<2?e:sl(e,jl(t,0,-1))}function Ei(e,t){for(var n=e.length,l=on(t.length,n),a=fa(e);l--;){var i=t[l];e[l]=ai(i,n)?a[i]:void 0}return e}function fi(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var pi=Si(Vl),gi=Qt||function(e,t){return We.setTimeout(e,t)},hi=Si(Hl);function _i(e,t,n){var l=t+"";return hi(e,function(e,t){var n=t.length;if(!n)return e;var l=n-1;return t[l]=(n>1?"& ":"")+t[l],t=t.join(n>2?", ":" "),e.replace(q,"{\n/* [wrapped with "+t+"] */\n")}(l,function(e,t){return nt(a,function(n){var l="_."+n[0];t&n[1]&&!ot(e,l)&&e.push(l)}),e.sort()}(function(e){var t=e.match(K);return t?t[1].split(X):[]}(l),n)))}function Si(e){var t=0,n=0;return function(){var l=rn(),a=16-(l-n);if(n=l,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function yi(e,t){var n=-1,l=e.length,a=l-1;for(t=void 0===t?l:t;++n<t;){var i=Ml(n,a),o=e[i];e[i]=e[n],e[n]=o}return e.length=t,e}var Ci,Ti,Di=(Ci=To(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(W,function(e,n,l,a){t.push(l?a.replace(Z,"$1"):n||e)}),t},function(e){return 500===Ti.size&&Ti.clear(),e}),Ti=Ci.cache,Ci);function bi(e){if("string"==typeof e||Jo(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ni(e){if(null!=e){try{return Se.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ai(e){if(e instanceof In)return e.clone();var t=new Ln(e.__wrapped__,e.__chain__);return t.__actions__=fa(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Oi=Fl(function(e,t){return Fo(e)?Zn(e,al(t,1,Fo,!0)):[]}),wi=Fl(function(e,t){var n=Bi(t);return Fo(n)&&(n=void 0),Fo(e)?Zn(e,al(t,1,Fo,!0),Ka(n,2)):[]}),Li=Fl(function(e,t){var n=Bi(t);return Fo(n)&&(n=void 0),Fo(e)?Zn(e,al(t,1,Fo,!0),void 0,n):[]});function Ii(e,t,n){var l=null==e?0:e.length;if(!l)return-1;var a=null==n?0:lr(n);return a<0&&(a=an(l+a,0)),ft(e,Ka(t,3),a)}function Ri(e,t,n){var l=null==e?0:e.length;if(!l)return-1;var a=l-1;return void 0!==n&&(a=lr(n),a=n<0?an(l+a,0):on(a,l-1)),ft(e,Ka(t,3),a,!0)}function xi(e){return null!=e&&e.length?al(e,1):[]}function Mi(e){return e&&e.length?e[0]:void 0}var Pi=Fl(function(e){var t=ut(e,la);return t.length&&t[0]===e[0]?pl(t):[]}),Fi=Fl(function(e){var t=Bi(e),n=ut(e,la);return t===Bi(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?pl(n,Ka(t,2)):[]}),Ui=Fl(function(e){var t=Bi(e),n=ut(e,la);return(t="function"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?pl(n,void 0,t):[]});function Bi(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var ki=Fl(Vi);function Vi(e,t){return e&&e.length&&t&&t.length?Rl(e,t):e}var Hi=Wa(function(e,t){var n=null==e?0:e.length,l=qn(e,t);return xl(e,ut(t,function(e){return ai(e,n)?+e:e}).sort(ma)),l});function Wi(e){return null==e?e:sn.call(e)}var ji=Fl(function(e){return Ql(al(e,1,Fo,!0))}),zi=Fl(function(e){var t=Bi(e);return Fo(t)&&(t=void 0),Ql(al(e,1,Fo,!0),Ka(t,2))}),Gi=Fl(function(e){var t=Bi(e);return t="function"==typeof t?t:void 0,Ql(al(e,1,Fo,!0),void 0,t)});function Yi(e){if(!e||!e.length)return[];var t=0;return e=it(e,function(e){if(Fo(e))return t=an(e.length,t),!0}),Dt(t,function(t){return ut(e,St(t))})}function qi(e,t){if(!e||!e.length)return[];var n=Yi(e);return null==t?n:ut(n,function(e){return et(t,void 0,e)})}var Ki=Fl(function(e,t){return Fo(e)?Zn(e,t):[]}),Xi=Fl(function(e){return ta(it(e,Fo))}),Qi=Fl(function(e){var t=Bi(e);return Fo(t)&&(t=void 0),ta(it(e,Fo),Ka(t,2))}),Ji=Fl(function(e){var t=Bi(e);return t="function"==typeof t?t:void 0,ta(it(e,Fo),void 0,t)}),Zi=Fl(Yi),$i=Fl(function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,qi(e,n)});function eo(e){var t=An(e);return t.__chain__=!0,t}function to(e,t){return t(e)}var no=Wa(function(e){var t=e.length,n=t?e[0]:0,l=this.__wrapped__,a=function(t){return qn(t,e)};return!(t>1||this.__actions__.length)&&l instanceof In&&ai(n)?((l=l.slice(n,+n+(t?1:0))).__actions__.push({func:to,args:[a],thisArg:void 0}),new Ln(l,this.__chain__).thru(function(e){return t&&!e.length&&e.push(void 0),e})):this.thru(a)}),lo=ga(function(e,t,n){ye.call(e,n)?++e[n]:Yn(e,n,1)}),ao=Da(Ii),io=Da(Ri);function oo(e,t){return(xo(e)?nt:$n)(e,Ka(t,3))}function ro(e,t){return(xo(e)?lt:el)(e,Ka(t,3))}var uo=ga(function(e,t,n){ye.call(e,n)?e[n].push(t):Yn(e,n,[t])}),co=Fl(function(e,t,n){var l=-1,a="function"==typeof t,i=Po(e)?Y(e.length):[];return $n(e,function(e){i[++l]=a?et(t,e,n):gl(e,t,n)}),i}),so=ga(function(e,t,n){Yn(e,n,t)});function mo(e,t){return(xo(e)?ut:bl)(e,Ka(t,3))}var vo=ga(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Eo=Fl(function(e,t){if(null==e)return[];var n=t.length;return n>1&&ii(e,t[0],t[1])?t=[]:n>2&&ii(t[0],t[1],t[2])&&(t=[t[0]]),Ll(e,al(t,1),[])}),fo=Xt||function(){return We.Date.now()};function po(e,t,n){return t=n?void 0:t,Ua(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function go(e,t){var l;if("function"!=typeof t)throw new pe(n);return e=lr(e),function(){return--e>0&&(l=t.apply(this,arguments)),e<=1&&(t=void 0),l}}var ho=Fl(function(e,t,n){var l=1;if(n.length){var a=kt(n,qa(ho));l|=32}return Ua(e,l,t,n,a)}),_o=Fl(function(e,t,n){var l=3;if(n.length){var a=kt(n,qa(_o));l|=32}return Ua(t,l,e,n,a)});function So(e,t,l){var a,i,o,r,u,c,s=0,d=!1,m=!1,v=!0;if("function"!=typeof e)throw new pe(n);function E(t){var n=a,l=i;return a=i=void 0,s=t,r=e.apply(l,n)}function f(e){return s=e,u=gi(g,t),d?E(e):r}function p(e){var n=e-c;return void 0===c||n>=t||n<0||m&&e-s>=o}function g(){var e=fo();if(p(e))return h(e);u=gi(g,function(e){var n=t-(e-c);return m?on(n,o-(e-s)):n}(e))}function h(e){return u=void 0,v&&a?E(e):(a=i=void 0,r)}function _(){var e=fo(),n=p(e);if(a=arguments,i=this,c=e,n){if(void 0===u)return f(c);if(m)return ua(u),u=gi(g,t),E(c)}return void 0===u&&(u=gi(g,t)),r}return t=ir(t)||0,jo(l)&&(d=!!l.leading,o=(m="maxWait"in l)?an(ir(l.maxWait)||0,t):o,v="trailing"in l?!!l.trailing:v),_.cancel=function(){void 0!==u&&ua(u),s=0,a=c=i=u=void 0},_.flush=function(){return void 0===u?r:h(fo())},_}var yo=Fl(function(e,t){return Jn(e,1,t)}),Co=Fl(function(e,t,n){return Jn(e,ir(t)||0,n)});function To(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new pe(n);var l=function n(){var l=arguments,a=t?t.apply(this,l):l[0],i=n.cache;if(i.has(a))return i.get(a);var o=e.apply(this,l);return n.cache=i.set(a,o)||i,o};return l.cache=new(To.Cache||Mn),l}function Do(e){if("function"!=typeof e)throw new pe(n);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}To.Cache=Mn;var bo=oa(function(e,t){var n=(t=1==t.length&&xo(t[0])?ut(t[0],Nt(Ka())):ut(al(t,1),Nt(Ka()))).length;return Fl(function(l){for(var a=-1,i=on(l.length,n);++a<i;)l[a]=t[a].call(this,l[a]);return et(e,this,l)})}),No=Fl(function(e,t){return Ua(e,32,void 0,t,kt(t,qa(No)))}),Ao=Fl(function(e,t){return Ua(e,64,void 0,t,kt(t,qa(Ao)))}),Oo=Wa(function(e,t){return Ua(e,256,void 0,void 0,void 0,t)});function wo(e,t){return e===t||e!=e&&t!=t}var Lo=Ra(vl),Io=Ra(function(e,t){return e>=t}),Ro=hl(function(){return arguments}())?hl:function(e){return zo(e)&&ye.call(e,"callee")&&!Ye.call(e,"callee")},xo=Y.isArray,Mo=Ke?Nt(Ke):function(e){return zo(e)&&ml(e)==S};function Po(e){return null!=e&&Wo(e.length)&&!Vo(e)}function Fo(e){return zo(e)&&Po(e)}var Uo=en||iu,Bo=Xe?Nt(Xe):function(e){return zo(e)&&ml(e)==u};function ko(e){if(!zo(e))return!1;var t=ml(e);return t==c||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!qo(e)}function Vo(e){if(!jo(e))return!1;var t=ml(e);return t==s||t==d||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ho(e){return"number"==typeof e&&e==lr(e)}function Wo(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function jo(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function zo(e){return null!=e&&"object"==typeof e}var Go=Qe?Nt(Qe):function(e){return zo(e)&&ei(e)==m};function Yo(e){return"number"==typeof e||zo(e)&&ml(e)==v}function qo(e){if(!zo(e)||ml(e)!=E)return!1;var t=je(e);if(null===t)return!0;var n=ye.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Se.call(n)==be}var Ko=Je?Nt(Je):function(e){return zo(e)&&ml(e)==f},Xo=Ze?Nt(Ze):function(e){return zo(e)&&ei(e)==p};function Qo(e){return"string"==typeof e||!xo(e)&&zo(e)&&ml(e)==g}function Jo(e){return"symbol"==typeof e||zo(e)&&ml(e)==h}var Zo=$e?Nt($e):function(e){return zo(e)&&Wo(e.length)&&!!Pe[ml(e)]},$o=Ra(Dl),er=Ra(function(e,t){return e<=t});function tr(e){if(!e)return[];if(Po(e))return Qo(e)?jt(e):fa(e);if(yt&&e[yt])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[yt]());var t=ei(e);return(t==m?Ut:t==p?Vt:wr)(e)}function nr(e){return e?(e=ir(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function lr(e){var t=nr(e),n=t%1;return t==t?n?t-n:t:0}function ar(e){return e?Kn(lr(e),0,4294967295):0}function ir(e){if("number"==typeof e)return e;if(Jo(e))return NaN;if(jo(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=jo(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=bt(e);var n=ne.test(e);return n||ae.test(e)?ke(e.slice(2),n?2:8):te.test(e)?NaN:+e}function or(e){return pa(e,yr(e))}function rr(e){return null==e?"":Xl(e)}var ur=ha(function(e,t){if(ci(t)||Po(t))pa(t,Sr(t),e);else for(var n in t)ye.call(t,n)&&Wn(e,n,t[n])}),cr=ha(function(e,t){pa(t,yr(t),e)}),sr=ha(function(e,t,n,l){pa(t,yr(t),e,l)}),dr=ha(function(e,t,n,l){pa(t,Sr(t),e,l)}),mr=Wa(qn),vr=Fl(function(e,t){e=ve(e);var n=-1,l=t.length,a=l>2?t[2]:void 0;for(a&&ii(t[0],t[1],a)&&(l=1);++n<l;)for(var i=t[n],o=yr(i),r=-1,u=o.length;++r<u;){var c=o[r],s=e[c];(void 0===s||wo(s,he[c])&&!ye.call(e,c))&&(e[c]=i[c])}return e}),Er=Fl(function(e){return e.push(void 0,ka),et(Tr,void 0,e)});function fr(e,t,n){var l=null==e?void 0:sl(e,t);return void 0===l?n:l}function pr(e,t){return null!=e&&ti(e,t,fl)}var gr=Aa(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=De.call(t)),e[t]=n},jr(Yr)),hr=Aa(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=De.call(t)),ye.call(e,t)?e[t].push(n):e[t]=[n]},Ka),_r=Fl(gl);function Sr(e){return Po(e)?Un(e):Tl(e)}function yr(e){return Po(e)?Un(e,!0):function(e){if(!jo(e))return function(e){var t=[];if(null!=e)for(var n in ve(e))t.push(n);return t}(e);var t=ci(e),n=[];for(var l in e)("constructor"!=l||!t&&ye.call(e,l))&&n.push(l);return n}(e)}var Cr=ha(function(e,t,n){Ol(e,t,n)}),Tr=ha(function(e,t,n,l){Ol(e,t,n,l)}),Dr=Wa(function(e,t){var n={};if(null==e)return n;var l=!1;t=ut(t,function(t){return t=ia(t,e),l||(l=t.length>1),t}),pa(e,za(e),n),l&&(n=Xn(n,7,Va));for(var a=t.length;a--;)Jl(n,t[a]);return n}),br=Wa(function(e,t){return null==e?{}:function(e,t){return Il(e,t,function(t,n){return pr(e,n)})}(e,t)});function Nr(e,t){if(null==e)return{};var n=ut(za(e),function(e){return[e]});return t=Ka(t),Il(e,n,function(e,n){return t(e,n[0])})}var Ar=Fa(Sr),Or=Fa(yr);function wr(e){return null==e?[]:At(e,Sr(e))}var Lr=Ca(function(e,t,n){return t=t.toLowerCase(),e+(n?Ir(t):t)});function Ir(e){return kr(rr(e).toLowerCase())}function Rr(e){return(e=rr(e))&&e.replace(oe,Rt).replace(Oe,"")}var xr=Ca(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Mr=Ca(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Pr=ya("toLowerCase"),Fr=Ca(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Ur=Ca(function(e,t,n){return e+(n?" ":"")+kr(t)}),Br=Ca(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),kr=ya("toUpperCase");function Vr(e,t,n){return e=rr(e),void 0===(t=n?void 0:t)?function(e){return Re.test(e)}(e)?function(e){return e.match(Le)||[]}(e):function(e){return e.match(Q)||[]}(e):e.match(t)||[]}var Hr=Fl(function(e,t){try{return et(e,void 0,t)}catch(e){return ko(e)?e:new se(e)}}),Wr=Wa(function(e,t){return nt(t,function(t){t=bi(t),Yn(e,t,ho(e[t],e))}),e});function jr(e){return function(){return e}}var zr=ba(),Gr=ba(!0);function Yr(e){return e}function qr(e){return Cl("function"==typeof e?e:Xn(e,1))}var Kr=Fl(function(e,t){return function(n){return gl(n,e,t)}}),Xr=Fl(function(e,t){return function(n){return gl(e,n,t)}});function Qr(e,t,n){var l=Sr(t),a=cl(t,l);null!=n||jo(t)&&(a.length||!l.length)||(n=t,t=e,e=this,a=cl(t,Sr(t)));var i=!(jo(n)&&"chain"in n&&!n.chain),o=Vo(e);return nt(a,function(n){var l=t[n];e[n]=l,o&&(e.prototype[n]=function(){var t=this.__chain__;if(i||t){var n=e(this.__wrapped__),a=n.__actions__=fa(this.__actions__);return a.push({func:l,args:arguments,thisArg:e}),n.__chain__=t,n}return l.apply(e,ct([this.value()],arguments))})}),e}function Jr(){}var Zr=wa(ut),$r=wa(at),eu=wa(mt);function tu(e){return oi(e)?St(bi(e)):function(e){return function(t){return sl(t,e)}}(e)}var nu=Ia(),lu=Ia(!0);function au(){return[]}function iu(){return!1}var ou,ru=Oa(function(e,t){return e+t},0),uu=Ma("ceil"),cu=Oa(function(e,t){return e/t},1),su=Ma("floor"),du=Oa(function(e,t){return e*t},1),mu=Ma("round"),vu=Oa(function(e,t){return e-t},0);return An.after=function(e,t){if("function"!=typeof t)throw new pe(n);return e=lr(e),function(){if(--e<1)return t.apply(this,arguments)}},An.ary=po,An.assign=ur,An.assignIn=cr,An.assignInWith=sr,An.assignWith=dr,An.at=mr,An.before=go,An.bind=ho,An.bindAll=Wr,An.bindKey=_o,An.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return xo(e)?e:[e]},An.chain=eo,An.chunk=function(e,t,n){t=(n?ii(e,t,n):void 0===t)?1:an(lr(t),0);var l=null==e?0:e.length;if(!l||t<1)return[];for(var a=0,i=0,o=Y(Jt(l/t));a<l;)o[i++]=jl(e,a,a+=t);return o},An.compact=function(e){for(var t=-1,n=null==e?0:e.length,l=0,a=[];++t<n;){var i=e[t];i&&(a[l++]=i)}return a},An.concat=function(){var e=arguments.length;if(!e)return[];for(var t=Y(e-1),n=arguments[0],l=e;l--;)t[l-1]=arguments[l];return ct(xo(n)?fa(n):[n],al(t,1))},An.cond=function(e){var t=null==e?0:e.length,l=Ka();return e=t?ut(e,function(e){if("function"!=typeof e[1])throw new pe(n);return[l(e[0]),e[1]]}):[],Fl(function(n){for(var l=-1;++l<t;){var a=e[l];if(et(a[0],this,n))return et(a[1],this,n)}})},An.conforms=function(e){return function(e){var t=Sr(e);return function(n){return Qn(n,e,t)}}(Xn(e,1))},An.constant=jr,An.countBy=lo,An.create=function(e,t){var n=On(e);return null==t?n:Gn(n,t)},An.curry=function e(t,n,l){var a=Ua(t,8,void 0,void 0,void 0,void 0,void 0,n=l?void 0:n);return a.placeholder=e.placeholder,a},An.curryRight=function e(t,n,l){var a=Ua(t,16,void 0,void 0,void 0,void 0,void 0,n=l?void 0:n);return a.placeholder=e.placeholder,a},An.debounce=So,An.defaults=vr,An.defaultsDeep=Er,An.defer=yo,An.delay=Co,An.difference=Oi,An.differenceBy=wi,An.differenceWith=Li,An.drop=function(e,t,n){var l=null==e?0:e.length;return l?jl(e,(t=n||void 0===t?1:lr(t))<0?0:t,l):[]},An.dropRight=function(e,t,n){var l=null==e?0:e.length;return l?jl(e,0,(t=l-(t=n||void 0===t?1:lr(t)))<0?0:t):[]},An.dropRightWhile=function(e,t){return e&&e.length?$l(e,Ka(t,3),!0,!0):[]},An.dropWhile=function(e,t){return e&&e.length?$l(e,Ka(t,3),!0):[]},An.fill=function(e,t,n,l){var a=null==e?0:e.length;return a?(n&&"number"!=typeof n&&ii(e,t,n)&&(n=0,l=a),function(e,t,n,l){var a=e.length;for((n=lr(n))<0&&(n=-n>a?0:a+n),(l=void 0===l||l>a?a:lr(l))<0&&(l+=a),l=n>l?0:ar(l);n<l;)e[n++]=t;return e}(e,t,n,l)):[]},An.filter=function(e,t){return(xo(e)?it:ll)(e,Ka(t,3))},An.flatMap=function(e,t){return al(mo(e,t),1)},An.flatMapDeep=function(e,t){return al(mo(e,t),1/0)},An.flatMapDepth=function(e,t,n){return n=void 0===n?1:lr(n),al(mo(e,t),n)},An.flatten=xi,An.flattenDeep=function(e){return null!=e&&e.length?al(e,1/0):[]},An.flattenDepth=function(e,t){return null!=e&&e.length?al(e,t=void 0===t?1:lr(t)):[]},An.flip=function(e){return Ua(e,512)},An.flow=zr,An.flowRight=Gr,An.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,l={};++t<n;){var a=e[t];l[a[0]]=a[1]}return l},An.functions=function(e){return null==e?[]:cl(e,Sr(e))},An.functionsIn=function(e){return null==e?[]:cl(e,yr(e))},An.groupBy=uo,An.initial=function(e){return null!=e&&e.length?jl(e,0,-1):[]},An.intersection=Pi,An.intersectionBy=Fi,An.intersectionWith=Ui,An.invert=gr,An.invertBy=hr,An.invokeMap=co,An.iteratee=qr,An.keyBy=so,An.keys=Sr,An.keysIn=yr,An.map=mo,An.mapKeys=function(e,t){var n={};return t=Ka(t,3),rl(e,function(e,l,a){Yn(n,t(e,l,a),e)}),n},An.mapValues=function(e,t){var n={};return t=Ka(t,3),rl(e,function(e,l,a){Yn(n,l,t(e,l,a))}),n},An.matches=function(e){return Nl(Xn(e,1))},An.matchesProperty=function(e,t){return Al(e,Xn(t,1))},An.memoize=To,An.merge=Cr,An.mergeWith=Tr,An.method=Kr,An.methodOf=Xr,An.mixin=Qr,An.negate=Do,An.nthArg=function(e){return e=lr(e),Fl(function(t){return wl(t,e)})},An.omit=Dr,An.omitBy=function(e,t){return Nr(e,Do(Ka(t)))},An.once=function(e){return go(2,e)},An.orderBy=function(e,t,n,l){return null==e?[]:(xo(t)||(t=null==t?[]:[t]),xo(n=l?void 0:n)||(n=null==n?[]:[n]),Ll(e,t,n))},An.over=Zr,An.overArgs=bo,An.overEvery=$r,An.overSome=eu,An.partial=No,An.partialRight=Ao,An.partition=vo,An.pick=br,An.pickBy=Nr,An.property=tu,An.propertyOf=function(e){return function(t){return null==e?void 0:sl(e,t)}},An.pull=ki,An.pullAll=Vi,An.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Rl(e,t,Ka(n,2)):e},An.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Rl(e,t,void 0,n):e},An.pullAt=Hi,An.range=nu,An.rangeRight=lu,An.rearg=Oo,An.reject=function(e,t){return(xo(e)?it:ll)(e,Do(Ka(t,3)))},An.remove=function(e,t){var n=[];if(!e||!e.length)return n;var l=-1,a=[],i=e.length;for(t=Ka(t,3);++l<i;){var o=e[l];t(o,l,e)&&(n.push(o),a.push(l))}return xl(e,a),n},An.rest=function(e,t){if("function"!=typeof e)throw new pe(n);return Fl(e,t=void 0===t?t:lr(t))},An.reverse=Wi,An.sampleSize=function(e,t,n){return t=(n?ii(e,t,n):void 0===t)?1:lr(t),(xo(e)?kn:Bl)(e,t)},An.set=function(e,t,n){return null==e?e:kl(e,t,n)},An.setWith=function(e,t,n,l){return l="function"==typeof l?l:void 0,null==e?e:kl(e,t,n,l)},An.shuffle=function(e){return(xo(e)?Vn:Wl)(e)},An.slice=function(e,t,n){var l=null==e?0:e.length;return l?(n&&"number"!=typeof n&&ii(e,t,n)?(t=0,n=l):(t=null==t?0:lr(t),n=void 0===n?l:lr(n)),jl(e,t,n)):[]},An.sortBy=Eo,An.sortedUniq=function(e){return e&&e.length?ql(e):[]},An.sortedUniqBy=function(e,t){return e&&e.length?ql(e,Ka(t,2)):[]},An.split=function(e,t,n){return n&&"number"!=typeof n&&ii(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=rr(e))&&("string"==typeof t||null!=t&&!Ko(t))&&!(t=Xl(t))&&Pt(e)?ra(jt(e),0,n):e.split(t,n):[]},An.spread=function(e,t){if("function"!=typeof e)throw new pe(n);return t=null==t?0:an(lr(t),0),Fl(function(n){var l=n[t],a=ra(n,0,t);return l&&ct(a,l),et(e,this,a)})},An.tail=function(e){var t=null==e?0:e.length;return t?jl(e,1,t):[]},An.take=function(e,t,n){return e&&e.length?jl(e,0,(t=n||void 0===t?1:lr(t))<0?0:t):[]},An.takeRight=function(e,t,n){var l=null==e?0:e.length;return l?jl(e,(t=l-(t=n||void 0===t?1:lr(t)))<0?0:t,l):[]},An.takeRightWhile=function(e,t){return e&&e.length?$l(e,Ka(t,3),!1,!0):[]},An.takeWhile=function(e,t){return e&&e.length?$l(e,Ka(t,3)):[]},An.tap=function(e,t){return t(e),e},An.throttle=function(e,t,l){var a=!0,i=!0;if("function"!=typeof e)throw new pe(n);return jo(l)&&(a="leading"in l?!!l.leading:a,i="trailing"in l?!!l.trailing:i),So(e,t,{leading:a,maxWait:t,trailing:i})},An.thru=to,An.toArray=tr,An.toPairs=Ar,An.toPairsIn=Or,An.toPath=function(e){return xo(e)?ut(e,bi):Jo(e)?[e]:fa(Di(rr(e)))},An.toPlainObject=or,An.transform=function(e,t,n){var l=xo(e),a=l||Uo(e)||Zo(e);if(t=Ka(t,4),null==n){var i=e&&e.constructor;n=a?l?new i:[]:jo(e)&&Vo(i)?On(je(e)):{}}return(a?nt:rl)(e,function(e,l,a){return t(n,e,l,a)}),n},An.unary=function(e){return po(e,1)},An.union=ji,An.unionBy=zi,An.unionWith=Gi,An.uniq=function(e){return e&&e.length?Ql(e):[]},An.uniqBy=function(e,t){return e&&e.length?Ql(e,Ka(t,2)):[]},An.uniqWith=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Ql(e,void 0,t):[]},An.unset=function(e,t){return null==e||Jl(e,t)},An.unzip=Yi,An.unzipWith=qi,An.update=function(e,t,n){return null==e?e:Zl(e,t,aa(n))},An.updateWith=function(e,t,n,l){return l="function"==typeof l?l:void 0,null==e?e:Zl(e,t,aa(n),l)},An.values=wr,An.valuesIn=function(e){return null==e?[]:At(e,yr(e))},An.without=Ki,An.words=Vr,An.wrap=function(e,t){return No(aa(t),e)},An.xor=Xi,An.xorBy=Qi,An.xorWith=Ji,An.zip=Zi,An.zipObject=function(e,t){return na(e||[],t||[],Wn)},An.zipObjectDeep=function(e,t){return na(e||[],t||[],kl)},An.zipWith=$i,An.entries=Ar,An.entriesIn=Or,An.extend=cr,An.extendWith=sr,Qr(An,An),An.add=ru,An.attempt=Hr,An.camelCase=Lr,An.capitalize=Ir,An.ceil=uu,An.clamp=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=ir(n))==n?n:0),void 0!==t&&(t=(t=ir(t))==t?t:0),Kn(ir(e),t,n)},An.clone=function(e){return Xn(e,4)},An.cloneDeep=function(e){return Xn(e,5)},An.cloneDeepWith=function(e,t){return Xn(e,5,t="function"==typeof t?t:void 0)},An.cloneWith=function(e,t){return Xn(e,4,t="function"==typeof t?t:void 0)},An.conformsTo=function(e,t){return null==t||Qn(e,t,Sr(t))},An.deburr=Rr,An.defaultTo=function(e,t){return null==e||e!=e?t:e},An.divide=cu,An.endsWith=function(e,t,n){e=rr(e),t=Xl(t);var l=e.length,a=n=void 0===n?l:Kn(lr(n),0,l);return(n-=t.length)>=0&&e.slice(n,a)==t},An.eq=wo,An.escape=function(e){return(e=rr(e))&&F.test(e)?e.replace(M,xt):e},An.escapeRegExp=function(e){return(e=rr(e))&&z.test(e)?e.replace(j,"\\$&"):e},An.every=function(e,t,n){var l=xo(e)?at:tl;return n&&ii(e,t,n)&&(t=void 0),l(e,Ka(t,3))},An.find=ao,An.findIndex=Ii,An.findKey=function(e,t){return Et(e,Ka(t,3),rl)},An.findLast=io,An.findLastIndex=Ri,An.findLastKey=function(e,t){return Et(e,Ka(t,3),ul)},An.floor=su,An.forEach=oo,An.forEachRight=ro,An.forIn=function(e,t){return null==e?e:il(e,Ka(t,3),yr)},An.forInRight=function(e,t){return null==e?e:ol(e,Ka(t,3),yr)},An.forOwn=function(e,t){return e&&rl(e,Ka(t,3))},An.forOwnRight=function(e,t){return e&&ul(e,Ka(t,3))},An.get=fr,An.gt=Lo,An.gte=Io,An.has=function(e,t){return null!=e&&ti(e,t,El)},An.hasIn=pr,An.head=Mi,An.identity=Yr,An.includes=function(e,t,n,l){e=Po(e)?e:wr(e),n=n&&!l?lr(n):0;var a=e.length;return n<0&&(n=an(a+n,0)),Qo(e)?n<=a&&e.indexOf(t,n)>-1:!!a&&pt(e,t,n)>-1},An.indexOf=function(e,t,n){var l=null==e?0:e.length;if(!l)return-1;var a=null==n?0:lr(n);return a<0&&(a=an(l+a,0)),pt(e,t,a)},An.inRange=function(e,t,n){return t=nr(t),void 0===n?(n=t,t=0):n=nr(n),function(e,t,n){return e>=on(t,n)&&e<an(t,n)}(e=ir(e),t,n)},An.invoke=_r,An.isArguments=Ro,An.isArray=xo,An.isArrayBuffer=Mo,An.isArrayLike=Po,An.isArrayLikeObject=Fo,An.isBoolean=function(e){return!0===e||!1===e||zo(e)&&ml(e)==r},An.isBuffer=Uo,An.isDate=Bo,An.isElement=function(e){return zo(e)&&1===e.nodeType&&!qo(e)},An.isEmpty=function(e){if(null==e)return!0;if(Po(e)&&(xo(e)||"string"==typeof e||"function"==typeof e.splice||Uo(e)||Zo(e)||Ro(e)))return!e.length;var t=ei(e);if(t==m||t==p)return!e.size;if(ci(e))return!Tl(e).length;for(var n in e)if(ye.call(e,n))return!1;return!0},An.isEqual=function(e,t){return _l(e,t)},An.isEqualWith=function(e,t,n){var l=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===l?_l(e,t,void 0,n):!!l},An.isError=ko,An.isFinite=function(e){return"number"==typeof e&&tn(e)},An.isFunction=Vo,An.isInteger=Ho,An.isLength=Wo,An.isMap=Go,An.isMatch=function(e,t){return e===t||Sl(e,t,Qa(t))},An.isMatchWith=function(e,t,n){return n="function"==typeof n?n:void 0,Sl(e,t,Qa(t),n)},An.isNaN=function(e){return Yo(e)&&e!=+e},An.isNative=function(e){if(ui(e))throw new se("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return yl(e)},An.isNil=function(e){return null==e},An.isNull=function(e){return null===e},An.isNumber=Yo,An.isObject=jo,An.isObjectLike=zo,An.isPlainObject=qo,An.isRegExp=Ko,An.isSafeInteger=function(e){return Ho(e)&&e>=-9007199254740991&&e<=9007199254740991},An.isSet=Xo,An.isString=Qo,An.isSymbol=Jo,An.isTypedArray=Zo,An.isUndefined=function(e){return void 0===e},An.isWeakMap=function(e){return zo(e)&&ei(e)==_},An.isWeakSet=function(e){return zo(e)&&"[object WeakSet]"==ml(e)},An.join=function(e,t){return null==e?"":nn.call(e,t)},An.kebabCase=xr,An.last=Bi,An.lastIndexOf=function(e,t,n){var l=null==e?0:e.length;if(!l)return-1;var a=l;return void 0!==n&&(a=(a=lr(n))<0?an(l+a,0):on(a,l-1)),t==t?function(e,t,n){for(var l=n+1;l--;)if(e[l]===t)return l;return l}(e,t,a):ft(e,ht,a,!0)},An.lowerCase=Mr,An.lowerFirst=Pr,An.lt=$o,An.lte=er,An.max=function(e){return e&&e.length?nl(e,Yr,vl):void 0},An.maxBy=function(e,t){return e&&e.length?nl(e,Ka(t,2),vl):void 0},An.mean=function(e){return _t(e,Yr)},An.meanBy=function(e,t){return _t(e,Ka(t,2))},An.min=function(e){return e&&e.length?nl(e,Yr,Dl):void 0},An.minBy=function(e,t){return e&&e.length?nl(e,Ka(t,2),Dl):void 0},An.stubArray=au,An.stubFalse=iu,An.stubObject=function(){return{}},An.stubString=function(){return""},An.stubTrue=function(){return!0},An.multiply=du,An.nth=function(e,t){return e&&e.length?wl(e,lr(t)):void 0},An.noConflict=function(){return We._===this&&(We._=Ne),this},An.noop=Jr,An.now=fo,An.pad=function(e,t,n){e=rr(e);var l=(t=lr(t))?Wt(e):0;if(!t||l>=t)return e;var a=(t-l)/2;return La(Zt(a),n)+e+La(Jt(a),n)},An.padEnd=function(e,t,n){e=rr(e);var l=(t=lr(t))?Wt(e):0;return t&&l<t?e+La(t-l,n):e},An.padStart=function(e,t,n){e=rr(e);var l=(t=lr(t))?Wt(e):0;return t&&l<t?La(t-l,n)+e:e},An.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),un(rr(e).replace(G,""),t||0)},An.random=function(e,t,n){if(n&&"boolean"!=typeof n&&ii(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=nr(e),void 0===t?(t=e,e=0):t=nr(t)),e>t){var l=e;e=t,t=l}if(n||e%1||t%1){var a=cn();return on(e+a*(t-e+Be("1e-"+((a+"").length-1))),t)}return Ml(e,t)},An.reduce=function(e,t,n){var l=xo(e)?st:Ct,a=arguments.length<3;return l(e,Ka(t,4),n,a,$n)},An.reduceRight=function(e,t,n){var l=xo(e)?dt:Ct,a=arguments.length<3;return l(e,Ka(t,4),n,a,el)},An.repeat=function(e,t,n){return t=(n?ii(e,t,n):void 0===t)?1:lr(t),Pl(rr(e),t)},An.replace=function(){var e=arguments,t=rr(e[0]);return e.length<3?t:t.replace(e[1],e[2])},An.result=function(e,t,n){var l=-1,a=(t=ia(t,e)).length;for(a||(a=1,e=void 0);++l<a;){var i=null==e?void 0:e[bi(t[l])];void 0===i&&(l=a,i=n),e=Vo(i)?i.call(e):i}return e},An.round=mu,An.runInContext=e,An.sample=function(e){return(xo(e)?Bn:Ul)(e)},An.size=function(e){if(null==e)return 0;if(Po(e))return Qo(e)?Wt(e):e.length;var t=ei(e);return t==m||t==p?e.size:Tl(e).length},An.snakeCase=Fr,An.some=function(e,t,n){var l=xo(e)?mt:zl;return n&&ii(e,t,n)&&(t=void 0),l(e,Ka(t,3))},An.sortedIndex=function(e,t){return Gl(e,t)},An.sortedIndexBy=function(e,t,n){return Yl(e,t,Ka(n,2))},An.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var l=Gl(e,t);if(l<n&&wo(e[l],t))return l}return-1},An.sortedLastIndex=function(e,t){return Gl(e,t,!0)},An.sortedLastIndexBy=function(e,t,n){return Yl(e,t,Ka(n,2),!0)},An.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=Gl(e,t,!0)-1;if(wo(e[n],t))return n}return-1},An.startCase=Ur,An.startsWith=function(e,t,n){return e=rr(e),n=null==n?0:Kn(lr(n),0,e.length),t=Xl(t),e.slice(n,n+t.length)==t},An.subtract=vu,An.sum=function(e){return e&&e.length?Tt(e,Yr):0},An.sumBy=function(e,t){return e&&e.length?Tt(e,Ka(t,2)):0},An.template=function(e,t,n){var l=An.templateSettings;n&&ii(e,t,n)&&(t=void 0),e=rr(e),t=sr({},t,l,Ba);var a,i,o=sr({},t.imports,l.imports,Ba),r=Sr(o),u=At(o,r),c=0,s=t.interpolate||re,d="__p += '",m=Ee((t.escape||re).source+"|"+s.source+"|"+(s===k?$:re).source+"|"+(t.evaluate||re).source+"|$","g"),v="//# sourceURL="+(ye.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Me+"]")+"\n";e.replace(m,function(t,n,l,o,r,u){return l||(l=o),d+=e.slice(c,u).replace(ue,Mt),n&&(a=!0,d+="' +\n__e("+n+") +\n'"),r&&(i=!0,d+="';\n"+r+";\n__p += '"),l&&(d+="' +\n((__t = ("+l+")) == null ? '' : __t) +\n'"),c=u+t.length,t}),d+="';\n";var E=ye.call(t,"variable")&&t.variable;if(E){if(J.test(E))throw new se("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(i?d.replace(L,""):d).replace(I,"$1").replace(R,"$1;"),d="function("+(E||"obj")+") {\n"+(E?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var f=Hr(function(){return de(r,v+"return "+d).apply(void 0,u)});if(f.source=d,ko(f))throw f;return f},An.times=function(e,t){if((e=lr(e))<1||e>9007199254740991)return[];var n=4294967295,l=on(e,4294967295);e-=4294967295;for(var a=Dt(l,t=Ka(t));++n<e;)t(n);return a},An.toFinite=nr,An.toInteger=lr,An.toLength=ar,An.toLower=function(e){return rr(e).toLowerCase()},An.toNumber=ir,An.toSafeInteger=function(e){return e?Kn(lr(e),-9007199254740991,9007199254740991):0===e?e:0},An.toString=rr,An.toUpper=function(e){return rr(e).toUpperCase()},An.trim=function(e,t,n){if((e=rr(e))&&(n||void 0===t))return bt(e);if(!e||!(t=Xl(t)))return e;var l=jt(e),a=jt(t);return ra(l,wt(l,a),Lt(l,a)+1).join("")},An.trimEnd=function(e,t,n){if((e=rr(e))&&(n||void 0===t))return e.slice(0,zt(e)+1);if(!e||!(t=Xl(t)))return e;var l=jt(e);return ra(l,0,Lt(l,jt(t))+1).join("")},An.trimStart=function(e,t,n){if((e=rr(e))&&(n||void 0===t))return e.replace(G,"");if(!e||!(t=Xl(t)))return e;var l=jt(e);return ra(l,wt(l,jt(t))).join("")},An.truncate=function(e,t){var n=30,l="...";if(jo(t)){var a="separator"in t?t.separator:a;n="length"in t?lr(t.length):n,l="omission"in t?Xl(t.omission):l}var i=(e=rr(e)).length;if(Pt(e)){var o=jt(e);i=o.length}if(n>=i)return e;var r=n-Wt(l);if(r<1)return l;var u=o?ra(o,0,r).join(""):e.slice(0,r);if(void 0===a)return u+l;if(o&&(r+=u.length-r),Ko(a)){if(e.slice(r).search(a)){var c,s=u;for(a.global||(a=Ee(a.source,rr(ee.exec(a))+"g")),a.lastIndex=0;c=a.exec(s);)var d=c.index;u=u.slice(0,void 0===d?r:d)}}else if(e.indexOf(Xl(a),r)!=r){var m=u.lastIndexOf(a);m>-1&&(u=u.slice(0,m))}return u+l},An.unescape=function(e){return(e=rr(e))&&P.test(e)?e.replace(x,Gt):e},An.uniqueId=function(e){var t=++Ce;return rr(e)+t},An.upperCase=Br,An.upperFirst=kr,An.each=oo,An.eachRight=ro,An.first=Mi,Qr(An,(ou={},rl(An,function(e,t){ye.call(An.prototype,t)||(ou[t]=e)}),ou),{chain:!1}),An.VERSION="4.17.21",nt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){An[e].placeholder=An}),nt(["drop","take"],function(e,t){In.prototype[e]=function(n){n=void 0===n?1:an(lr(n),0);var l=this.__filtered__&&!t?new In(this):this.clone();return l.__filtered__?l.__takeCount__=on(n,l.__takeCount__):l.__views__.push({size:on(n,4294967295),type:e+(l.__dir__<0?"Right":"")}),l},In.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),nt(["filter","map","takeWhile"],function(e,t){var n=t+1,l=1==n||3==n;In.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Ka(e,3),type:n}),t.__filtered__=t.__filtered__||l,t}}),nt(["head","last"],function(e,t){var n="take"+(t?"Right":"");In.prototype[e]=function(){return this[n](1).value()[0]}}),nt(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");In.prototype[e]=function(){return this.__filtered__?new In(this):this[n](1)}}),In.prototype.compact=function(){return this.filter(Yr)},In.prototype.find=function(e){return this.filter(e).head()},In.prototype.findLast=function(e){return this.reverse().find(e)},In.prototype.invokeMap=Fl(function(e,t){return"function"==typeof e?new In(this):this.map(function(n){return gl(n,e,t)})}),In.prototype.reject=function(e){return this.filter(Do(Ka(e)))},In.prototype.slice=function(e,t){e=lr(e);var n=this;return n.__filtered__&&(e>0||t<0)?new In(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(n=(t=lr(t))<0?n.dropRight(-t):n.take(t-e)),n)},In.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},In.prototype.toArray=function(){return this.take(4294967295)},rl(In.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),l=/^(?:head|last)$/.test(t),a=An[l?"take"+("last"==t?"Right":""):t],i=l||/^find/.test(t);a&&(An.prototype[t]=function(){var t=this.__wrapped__,o=l?[1]:arguments,r=t instanceof In,u=o[0],c=r||xo(t),s=function(e){var t=a.apply(An,ct([e],o));return l&&d?t[0]:t};c&&n&&"function"==typeof u&&1!=u.length&&(r=c=!1);var d=this.__chain__,m=!!this.__actions__.length,v=i&&!d,E=r&&!m;if(!i&&c){t=E?t:new In(this);var f=e.apply(t,o);return f.__actions__.push({func:to,args:[s],thisArg:void 0}),new Ln(f,d)}return v&&E?e.apply(this,o):(f=this.thru(s),v?l?f.value()[0]:f.value():f)})}),nt(["pop","push","shift","sort","splice","unshift"],function(e){var t=ge[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",l=/^(?:pop|shift)$/.test(e);An.prototype[e]=function(){var e=arguments;if(l&&!this.__chain__){var a=this.value();return t.apply(xo(a)?a:[],e)}return this[n](function(n){return t.apply(xo(n)?n:[],e)})}}),rl(In.prototype,function(e,t){var n=An[t];if(n){var l=n.name+"";ye.call(hn,l)||(hn[l]=[]),hn[l].push({name:t,func:n})}}),hn[Na(void 0,2).name]=[{name:"wrapper",func:void 0}],In.prototype.clone=function(){var e=new In(this.__wrapped__);return e.__actions__=fa(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=fa(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=fa(this.__views__),e},In.prototype.reverse=function(){if(this.__filtered__){var e=new In(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},In.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=xo(e),l=t<0,a=n?e.length:0,i=function(e,t,n){for(var l=-1,a=n.length;++l<a;){var i=n[l],o=i.size;switch(i.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=on(t,e+o);break;case"takeRight":e=an(e,t-o)}}return{start:e,end:t}}(0,a,this.__views__),o=i.start,r=i.end,u=r-o,c=l?r:o-1,s=this.__iteratees__,d=s.length,m=0,v=on(u,this.__takeCount__);if(!n||!l&&a==u&&v==u)return ea(e,this.__actions__);var E=[];e:for(;u--&&m<v;){for(var f=-1,p=e[c+=t];++f<d;){var g=s[f],h=g.type,_=(0,g.iteratee)(p);if(2==h)p=_;else if(!_){if(1==h)continue e;break e}}E[m++]=p}return E},An.prototype.at=no,An.prototype.chain=function(){return eo(this)},An.prototype.commit=function(){return new Ln(this.value(),this.__chain__)},An.prototype.next=function(){void 0===this.__values__&&(this.__values__=tr(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},An.prototype.plant=function(e){for(var t,n=this;n instanceof wn;){var l=Ai(n);l.__index__=0,l.__values__=void 0,t?a.__wrapped__=l:t=l;var a=l;n=n.__wrapped__}return a.__wrapped__=e,t},An.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof In){var t=e;return this.__actions__.length&&(t=new In(this)),(t=t.reverse()).__actions__.push({func:to,args:[Wi],thisArg:void 0}),new Ln(t,this.__chain__)}return this.thru(Wi)},An.prototype.toJSON=An.prototype.valueOf=An.prototype.value=function(){return ea(this.__wrapped__,this.__actions__)},An.prototype.first=An.prototype.head,yt&&(An.prototype[yt]=function(){return this}),An}();ze?((ze.exports=Yt)._=Yt,je._=Yt):We._=Yt}).call(Ft)}),Wl=function(e){return l.createElement("h1",{className:e.className?"heading-m "+e.className:"heading-m"},e.label)},jl=function(){return l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},zl=function(e){return l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(jl,null))},Gl=function(e){var a,i,o,r,u=e.t,c=e.action,s=e.tenantId,d=e.closeModal,m=e.submitAction,v=e.applicationDetails,E=e.saveAttendanceState,f=n.useState({}),p=f[0],g=f[1],h=null===(a=Digit.UserService.getUser())||void 0===a?void 0:a.info.uuid,_=Digit.Hooks.hrms.useHRMSSearch({uuids:h},s).data,S=null==_?void 0:_.Employees[0],y=null==S||null===(i=S.assignments)||void 0===i?void 0:i[0].department,C=null==S||null===(o=S.assignments)||void 0===o?void 0:o[0].designation,T=null==S||null===(r=S.user)||void 0===r?void 0:r.name;n.useEffect(function(){switch(null==c?void 0:c.action){case"VERIFY":D(c,"Verify muster roll");break;case"REJECT":g(function(e){var n=e.t,a=e.empDepartment,i=e.empDesignation,o=e.empName,r={display:"grid",gridTemplateColumns:"60% 1fr"};return{label:{heading:n("ATM_PROCESSINGMODAL_HEADER"),submit:n("ATM_CONFIRM_REJECT"),cancel:n("CS_COMMON_CANCEL")},form:[{body:[{withoutLabel:!0,populators:l.createElement(t.LabelFieldPair,{style:r},l.createElement(t.CardLabel,{style:{fontSize:"16px",fontWeight:"bold",width:"100%"}},n("ATM_DEPARTMENT")),l.createElement(t.CardLabel,{style:{width:"100%"}},a))},{withoutLabel:!0,populators:l.createElement(t.LabelFieldPair,{style:r},l.createElement(t.CardLabel,{style:{fontSize:"16px",fontWeight:"bold",width:"100%"}},n("ATM_DESIGNATION")),l.createElement(t.CardLabel,{style:{width:"100%"}},i))},{withoutLabel:!0,populators:l.createElement(t.LabelFieldPair,{style:r},l.createElement(t.CardLabel,{style:{fontSize:"16px",fontWeight:"bold",width:"100%"}},n("ATM_REJECTED_BY")),l.createElement(t.CardLabel,{style:{width:"100%"}},o))},{label:n("WF_COMMON_COMMENTS"),type:"textarea",key:"org_name",populators:{name:"comments"}}]}]}}({t:u,action:c,empDepartment:y,empDesignation:C,empName:T}));break;case"APPROVE":g(function(e){var t=e.t,n=e.action;if("APPROVED"===(null==n?void 0:n.applicationStatus))return{label:{heading:t("ATM_PROCESSINGMODAL_HEADER"),submit:t("ATM_FORWARD_FOR_APPROVAL"),cancel:t("CS_COMMON_CANCEL")},form:[{body:[{label:t("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}}]}]}}({t:u,action:c}));break;case"RESUBMIT":D(c,"Resubmit muster roll");break;case"SAVE":D(c,"Verify muster roll")}},[_]);var D=function(e,t){var n,l,a,i={tenantId:s,id:null==v||null===(n=v.applicationDetails)||void 0===n||null===(l=n[0])||void 0===l||null===(a=l.applicationData)||void 0===a?void 0:a.id},o={action:null==e?void 0:e.action,comments:t||(null==e?void 0:e.action)+" done",assignees:[]};switch(null==e?void 0:e.action){case"SAVE":i.individualEntries=null==E?void 0:E.updatePayload,o.action="VERIFY";break;case"RESUBMIT":i.additionalDetails={computeAttendance:!0}}m({musterRoll:i,workflow:o})};return c&&null!=p&&p.form?l.createElement(t.Modal,{headerBarMain:l.createElement(Wl,{label:u(p.label.heading),className:"header-left-margin"}),headerBarEnd:l.createElement(zl,{onClick:d}),actionCancelLabel:u(p.label.cancel),actionCancelOnSubmit:d,actionSaveLabel:u(p.label.submit),actionSaveOnSubmit:function(){},formId:"modal-action"},l.createElement(t.FormComposer,{config:p.form,noBoxShadow:!0,inline:!0,childrenAtTheBottom:!0,onSubmit:function(e){D(c,null==e?void 0:e.comments)},formId:"modal-action",cardStyle:"Processing Details"===p.label.heading?{padding:"0px"}:{}})):l.createElement(t.Loader,null)},Yl=function(e){var a,i,o,r,u=e.t,s=e.action,d=e.closeModal,m=e.submitAction,v=e.businessService,E=(Digit.Hooks.useQueryParams(),n.useState({})),f=E[0],p=E[1],g=(n.useState({}),n.useState([])),h=g[0],_=g[1],S=n.useState({}),y=S[0],C=S[1],T=n.useState([]),D=T[0],b=T[1],N=n.useState({}),A=N[0],O=N[1],w=n.useState([]),L=w[0],I=w[1],R=n.useState({}),x=R[0],M=R[1],P={moduleName:"common-masters",department:{masterName:"Department",localePrefix:"COMMON_MASTERS_DEPARTMENT"},designation:{masterName:"Designation",localePrefix:"COMMON_MASTERS_DESIGNATION"}},F=Digit.Hooks.useCustomMDMS(Digit.ULBService.getStateId(),null==P?void 0:P.moduleName,[{name:null==P||null===(a=P.designation)||void 0===a?void 0:a.masterName},{name:null==P||null===(i=P.department)||void 0===i?void 0:i.masterName},{name:null==P||null===(o=P.rejectReasons)||void 0===o?void 0:o.masterName}],{select:function(e){var t,n,l,a,i=Hl.get(e,(null==P?void 0:P.moduleName)+"."+(null==P||null===(t=P.designation)||void 0===t?void 0:t.masterName),[]);null===(n=i=i.filter(function(e){return null==e?void 0:e.active}).map(function(e){var t;return c({},e,{name:(null==P||null===(t=P.designation)||void 0===t?void 0:t.localePrefix)+"_"+e.code})}))||void 0===n||n.map(function(e){e.i18nKey=null==e?void 0:e.name});var o=Hl.get(e,(null==P?void 0:P.moduleName)+"."+(null==P||null===(l=P.department)||void 0===l?void 0:l.masterName),[]);return null===(a=o=o.filter(function(e){return null==e?void 0:e.active}).map(function(e){var t;return c({},e,{name:(null==P||null===(t=P.department)||void 0===t?void 0:t.localePrefix)+"_"+e.code})}))||void 0===a||a.map(function(e){e.i18nKey=null==e?void 0:e.name}),{designationData:i,departmentData:o}},enabled:!(null==P||!P.moduleName)}),U=F.isLoading,B=F.data;n.useEffect(function(){b(null==B?void 0:B.departmentData),I(null==B?void 0:B.designationData)},[B]);var k=Digit.Hooks.hrms.useHRMSSearch({designations:null==x?void 0:x.code,departments:null==A?void 0:A.code,roles:null==s||null===(r=s.assigneeRoles)||void 0===r?void 0:r.toString(),isActive:!0},Digit.ULBService.getCurrentTenantId(),null,null,{enabled:"CHECK"===(null==s?void 0:s.action)||"TECHNICALSANCATION"===(null==s?void 0:s.action)}),V=k.isLoading,H=k.data;null==H||H.Employees.map(function(e){var t;return e.nameOfEmp=(null==e||null===(t=e.user)||void 0===t?void 0:t.name)||"NA"}),n.useEffect(function(){var e;_((null==H||null===(e=H.Employees)||void 0===e?void 0:e.length)>0?null==H?void 0:H.Employees.filter(function(e){return"NA"!==(null==e?void 0:e.nameOfEmp)}):[])},[H]),n.useEffect(function(){var e,n,a;null!=s&&null!==(e=s.action)&&void 0!==e&&e.includes("CHECK")?p(function(e){var n=e.t,a=e.approvers,i=e.selectedApprover,o=e.setSelectedApprover,r=e.designation,u=e.selectedDesignation,c=e.setSelectedDesignation,s=e.department,d=e.selectedDept,m=e.setSelectedDept,v=e.approverLoading,E=void 0!==v&&v;return 0===(null==r?void 0:r.length)||0===(null==s?void 0:s.length)?{}:{label:{heading:n("EXP_FORWARD_BILL_FOR_APPROVAL"),submit:n("EXP_FORWARD_BILL_FOR_APPROVAL"),cancel:n("CS_COMMON_CANCEL")},form:[{body:[{label:n("WORKS_APPROVER_DEPT"),placeholder:n("WF_ASSIGNEE_NAME_PLACEHOLDER"),isMandatory:!0,type:"goToDefaultCase",populators:l.createElement(t.Dropdown,{name:"department",option:s,autoComplete:"off",optionKey:"i18nKey",id:"sdf",select:function(e){m(e),o("")},selected:d,t:n})},{label:n("WORKS_APPROVER_DESIGNATION"),isMandatory:!0,type:"goToDefaultCase",name:"designation",populators:l.createElement(t.Dropdown,{name:"designation",option:r,autoComplete:"off",optionKey:"i18nKey",id:"name2",select:function(e){c(e),o("")},selected:u,t:n})},{label:n("WORKS_APPROVER"),isMandatory:!0,type:"goToDefaultCase",populators:E?l.createElement(t.Loader,null):l.createElement(t.Dropdown,{name:"approver",option:a,autoComplete:"off",optionKey:"nameOfEmp",id:"fieldInspector",select:o,selected:i})},{label:n("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}}]}]}}({t:u,action:s,businessService:v,approvers:h,selectedApprover:y,setSelectedApprover:C,designation:L,selectedDesignation:x,setSelectedDesignation:M,department:D,selectedDept:A,setSelectedDept:O,approverLoading:V})):null!=s&&null!==(n=s.action)&&void 0!==n&&n.includes("APPROVE")?p(function(e){var n=e.t,a={display:"grid",gridTemplateColumns:"60% 1fr"};return{label:{heading:n("EXP_PROCESSINGMODAL_HEADER"),submit:n("EXP_FORWARD_FOR_APPROVAL"),cancel:n("CS_COMMON_CANCEL")},form:[{body:[{withoutLabel:!0,populators:l.createElement(t.LabelFieldPair,{style:a},l.createElement(t.CardLabel,{style:{fontSize:"16px",fontWeight:"bold",width:"100%"}},n("EXP_DEPARTMENT")),l.createElement(t.CardLabel,{style:{width:"100%"}},"Engineering"))},{withoutLabel:!0,populators:l.createElement(t.LabelFieldPair,{style:a},l.createElement(t.CardLabel,{style:{fontSize:"16px",fontWeight:"bold",width:"100%"}},n("EXP_DESIGNATION")),l.createElement(t.CardLabel,{style:{width:"100%"}},"Junior Engineer"))},{withoutLabel:!0,populators:l.createElement(t.LabelFieldPair,{style:a},l.createElement(t.CardLabel,{style:{fontSize:"16px",fontWeight:"bold",width:"100%"}},n("EXP_APPROVER")),l.createElement(t.CardLabel,{style:{width:"100%"}},"RASHMI"))},{label:n("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}}]}],defaultValues:{comments:""}}}({t:u,action:s})):null!=s&&null!==(a=s.action)&&void 0!==a&&a.includes("REJECT")&&p(function(e){var n=e.t,a={display:"grid",gridTemplateColumns:"60% 1fr"};return{label:{heading:n("EXP_PROCESSINGMODAL_HEADER"),submit:n("EXP_CONFIRM_REJECT"),cancel:n("CS_COMMON_CANCEL")},form:[{body:[{withoutLabel:!0,populators:l.createElement(t.LabelFieldPair,{style:a},l.createElement(t.CardLabel,{style:{fontSize:"16px",fontWeight:"bold",width:"100%"}},n("EXP_DEPARTMENT")),l.createElement(t.CardLabel,{style:{width:"100%"}},"Engineering"))},{withoutLabel:!0,populators:l.createElement(t.LabelFieldPair,{style:a},l.createElement(t.CardLabel,{style:{fontSize:"16px",fontWeight:"bold",width:"100%"}},n("EXP_DESIGNATION")),l.createElement(t.CardLabel,{style:{width:"100%"}},"Junior Engineer"))},{withoutLabel:!0,populators:l.createElement(t.LabelFieldPair,{style:a},l.createElement(t.CardLabel,{style:{fontSize:"16px",fontWeight:"bold",width:"100%"}},n("EXP_REJECTED_BY")),l.createElement(t.CardLabel,{style:{width:"100%"}},"RASHMI"))},{label:n("WF_COMMON_COMMENTS"),type:"textarea",populators:{name:"comments"}}]}],defaultValues:{comments:""}}}({t:u,action:s}))},[h,L,D]);var W={CHECK:{header:"Bill Forwarded Successfully",id:"Bill/2021-22/09/0001",info:"Bill ID",message:"Bill has been successfully created and forwarded for approval.",responseData:{},requestData:{},links:[]},REJECT:{header:"Bill Rejected Successfully",id:"Bill/2021-22/09/0001",info:"Bill ID",message:"Bill has been Rejected.",responseData:{},requestData:{},links:[]},APPROVE:{header:"Bill Approved Successfully",id:"Bill/2021-22/09/0001",info:"Bill ID",message:"Bill has been approved",responseData:{},requestData:{},links:[]}};return l.createElement(n.Fragment,null,s&&null!=f&&f.form?l.createElement(t.WorkflowModal,{closeModal:d,onSubmit:function(e){m({workflow:{action:null==s?void 0:s.action,comment:null==e?void 0:e.comments,response:W,type:"bills",assignees:null!=y&&y.uuid?[null==y?void 0:y.uuid]:void 0}})},config:f}):U?l.createElement(t.Loader,null):null)},ql=function(e){return null!=e&&e.businessService.includes("PT")?l.createElement(Et,e):null!=e&&e.businessService.includes("NewTL")||null!=e&&e.businessService.includes("TL")||null!=e&&e.businessService.includes("EDITRENEWAL")||null!=e&&e.businessService.includes("DIRECTRENEWAL")?l.createElement(ht,e):null!=e&&e.moduleCode.includes("BPAREG")?l.createElement(Ct,e):null!=e&&e.moduleCode.includes("BPA")?l.createElement(Nt,e):null!=e&&e.moduleCode.includes("NOC")?l.createElement(Lt,e):null!=e&&e.moduleCode.includes("WS")?l.createElement(Fl,e):null!=e&&e.moduleCode.includes("works")?l.createElement(Vl,e):null!=e&&e.moduleCode.includes("AttendenceMgmt")?l.createElement(Gl,e):null!=e&&e.moduleCode.includes("Expenditure")?l.createElement(Yl,e):void 0};function Kl(e){var n=e.documents,i=e.svgStyles,o=void 0===i?{}:i,r=e.isSendBackFlow,u=void 0!==r&&r,c=e.isHrLine,s=void 0!==c&&c,d=e.titleStyles,m=a.useTranslation().t,v=window.location.href.includes("stakeholder");return l.createElement("div",{style:{marginTop:"19px"}},!v&&(null==n?void 0:n.map(function(e,a){var i;return l.createElement(l.Fragment,{key:a},null!=e&&e.title?l.createElement(t.CardSubHeader,{style:d||{marginTop:"32px",marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},m(null==e?void 0:e.title)):null,l.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start"}},null!=e&&e.values&&(null==e?void 0:e.values.length)>0?null==e||null===(i=e.values)||void 0===i?void 0:i.map(function(e,n){var a,i;return l.createElement("a",{target:"_",href:null==e?void 0:e.url,style:(a={minWidth:"80px",marginRight:"10px",maxWidth:"100px",height:"auto"},a.minWidth="100px",a),key:n},l.createElement("div",{style:{display:"flex",justifyContent:"center"}},l.createElement(t.PDFSvg,null)),l.createElement("p",{style:{marginTop:"8px",fontWeight:"bold",textAlign:"center",color:"#505A5F"}},m(null==e?void 0:e.title)),u?null!=e&&null!==(i=e.documentType)&&void 0!==i&&i.includes("NOC")?l.createElement("p",{style:{textAlign:"center"}},m(null==e?void 0:e.documentType.split(".")[1])):l.createElement("p",{style:{textAlign:"center"}},m(null==e?void 0:e.documentType)):"")}):!window.location.href.includes("citizen")&&l.createElement("div",null,l.createElement("p",null,m("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))),s&&(null==n?void 0:n.length)!=a+1?l.createElement("hr",{style:{color:"#D6D5D4",backgroundColor:"#D6D5D4",height:"2px",marginTop:"20px",marginBottom:"20px"}}):null)})),v&&(null==n?void 0:n.map(function(e,n){var a;return l.createElement(l.Fragment,{key:n},null!=e&&e.title?l.createElement(t.CardSubHeader,{style:{marginTop:"32px",marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},m(null==e?void 0:e.title)):null,l.createElement("div",null,null!=e&&e.values&&(null==e?void 0:e.values.length)>0?null==e||null===(a=e.values)||void 0===a?void 0:a.map(function(e,n){var a;return l.createElement("a",{target:"_",href:null==e?void 0:e.url,style:{minWidth:null!=o&&o.minWidth?null==o?void 0:o.minWidth:"160px",marginRight:"20px"},key:n},l.createElement("div",{style:{maxWidth:"940px",padding:"8px",borderRadius:"4px",border:"1px solid #D6D5D4",background:"#FAFAFA"}},l.createElement("p",{style:{marginTop:"8px",fontWeight:"bold",marginBottom:"10px"}},m(null==e?void 0:e.title)),null!=e&&e.docInfo?l.createElement("div",{style:{fontSize:"12px",color:"#505A5F",fontWeight:400,lineHeight:"15px",marginBottom:"10px"}},""+m(null==e?void 0:e.docInfo)):null,l.createElement(t.PDFSvg,null),l.createElement("p",{style:(a={marginTop:"8px",fontSize:"16px",lineHeight:"19px",color:"#505A5F",fontWeight:"400",textAlign:"center"},a.color="#505A5F",a)},""+m(null==e?void 0:e.title))))}):!window.location.href.includes("citizen")&&l.createElement("div",null,l.createElement("p",null,m("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))))})))}var Xl=function(e){var t,a,i=e.t,o=e.formData,r=e.applicationData,u=e.docs,c=e.bpaActionsDetails,s=(null==r?void 0:r.status)||"",d=(null==c||null===(t=c.data)||void 0===t?void 0:t.nextActions)||[],m=Digit.ULBService.getStateId(),v=n.useState((null==o||null===(a=o.documents)||void 0===a?void 0:a.documents)||[]),E=v[0],f=v[1],p=n.useState(null),g=p[0],h=p[1],_=n.useState([]),S=_[0],y=_[1],C=n.useState(!0)[1],T=n.useState(!1),D=T[0],b=T[1],N=n.useState(!1),A=N[0],O=N[1],w=Digit.Hooks.obps.useMDMS(m,"BPA",["DocTypeMapping"]),L=w.isLoading,I=w.data,R=Digit.Hooks.obps.useMDMS(m,"common-masters",["DocumentType"]),x=R.data;return n.useEffect(function(){var e,t,n,l,a,i,o=[];null!=I&&null!==(e=I.BPA)&&void 0!==e&&e.DocTypeMapping&&(o=null==I||null===(a=I.BPA)||void 0===a||null===(i=a.DocTypeMapping)||void 0===i?void 0:i.filter(function(e){var t,n;return e.WFState==(null==r?void 0:r.status)?null==r?void 0:r.status:e.RiskType==(null==r?void 0:r.riskType)&&e.ServiceType==(null==r||null===(t=r.additionalDetails)||void 0===t?void 0:t.serviceType)&&e.applicationType==(null==r||null===(n=r.additionalDetails)||void 0===n?void 0:n.applicationType)}));var c=[];null===(t=o)||void 0===t||null===(n=t[0])||void 0===n||null===(l=n.docTypes)||void 0===l||l.forEach(function(e){var t,n,l,a,i=e.code;e.dropdownData=[],e.uploadedDocuments=[],null==x||null===(t=x["common-masters"])||void 0===t||null===(n=t.DocumentType)||void 0===n||n.forEach(function(t){var n=t.code.slice(0,i.length);i===n&&(e.hasDropdown=!0,t.i18nKey=t.code,e.dropdownData.push(t))}),e.uploadedDocuments[0]={},e.uploadedDocuments[0].values=[],null==u||null===(l=u[0])||void 0===l||null===(a=l.values)||void 0===a||a.map(function(t){var n,l;i===(null==t||null===(n=t.documentType)||void 0===n?void 0:n.split(".")[0])+"."+(null==t||null===(l=t.documentType)||void 0===l?void 0:l.split(".")[1])&&e.uploadedDocuments[0].values.push(t)}),c.push(e)}),sessionStorage.setItem("BPA_DOCUMENTS",JSON.stringify(c)),y(c)},[!L,!R.isLoading]),n.useEffect(function(){var e=0;S.map(function(t){var n=!1;E.map(function(e){t.required&&t.code==e.documentType.split(".")[0]+"."+e.documentType.split(".")[1]&&(n=!0)}),!n&&t.required&&(e+=1)}),C("0"!=e&&0!=e||!(E.length>0))},[E,D]),n.useEffect(function(){O("DOC_VERIFICATION_INPROGRESS"===s&&(null==d?void 0:d.length)>0)},[r,c]),l.createElement("div",null,null==S?void 0:S.map(function(e,t){return l.createElement("div",null,l.createElement(Ql,{key:t,index:t,document:e,t:i,error:g,setError:h,setDocuments:f,documents:E,setCheckRequiredFields:b,applicationStatus:s,actions:d,bpaTaxDocuments:S,checkEnablingDocs:A}))}))};function Ql(e){var a,i,o=e.t,r=e.document,u=e.setDocuments,s=e.documents,d=e.index,m=e.bpaTaxDocuments,v=e.checkEnablingDocs,E=null==s?void 0:s.filter(function(e){var t;return null==e||null===(t=e.documentType)||void 0===t?void 0:t.includes(null==r?void 0:r.code)})[0],f=Digit.ULBService.getStateId(),p=n.useState(E?c({},E,{active:!0,code:null==E?void 0:E.documentType,i18nKey:null==E?void 0:E.documentType}):1===(null==r||null===(a=r.dropdownData)||void 0===a?void 0:a.length)?null==r?void 0:r.dropdownData[0]:{}),g=p[0],h=p[1],_=n.useState(null),S=_[0],y=_[1],C=n.useState(function(){return(null==E?void 0:E.fileStoreId)||null})[0],T=n.useState([]),D=T[0],b=T[1];return n.useEffect(function(){null!=g&&g.code&&u(function(e){var t,n=null==e?void 0:e.filter(function(e){return(null==e?void 0:e.documentType)!==(null==g?void 0:g.code)});if(0===(null==C?void 0:C.length)||null===C)return n;var l=null==n?void 0:n.filter(function(e){return(null==e?void 0:e.fileStoreId)!==C});return[].concat(l,[{documentType:null==g?void 0:g.code,fileStoreId:C,documentUid:C,fileName:(null==S?void 0:S.name)||"",id:s?null===(t=s.find(function(e){return e.documentType===(null==g?void 0:g.code)}))||void 0===t?void 0:t.id:void 0}])})},[C,g]),n.useEffect(function(){try{D.length>0&&(sessionStorage.removeItem("BPA_DOCUMENTS"),r.newUploadedDocs=[],D.map(function(e){var t,n,l;null!=g&&g.code&&r.newUploadedDocs.push({documentType:null==g?void 0:g.code,fileStoreId:null==e||null===(t=e.fileStoreId)||void 0===t?void 0:t.fileStoreId,documentUid:null==e||null===(n=e.fileStoreId)||void 0===n?void 0:n.fileStoreId,tenantId:null==e||null===(l=e.fileStoreId)||void 0===l?void 0:l.tenantId})}),m[d]=r,sessionStorage.setItem("BPA_DOCUMENTS",JSON.stringify(m)))}catch(e){Promise.reject(e)}},[D,g]),n.useEffect(function(){},[S]),l.createElement("div",{style:{marginBottom:"24px",maxWidth:"950px",minWidth:"280px",background:"#FAFAFA",borderRadius:"4px",border:"1px solid #D6D5D4",padding:"8px"}},l.createElement(t.CardSubHeader,{style:{marginBottom:"8px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"16px",lineHeight:"19px"}},""+o(null==r?void 0:r.code)),(null==r||null===(i=r.uploadedDocuments)||void 0===i?void 0:i.length)&&l.createElement(Kl,{documents:null==r?void 0:r.uploadedDocuments,svgStyles:{width:"100px",height:"100px",viewBox:"0 0 25 25",minWidth:"100px"}}),v?l.createElement("div",{style:{marginTop:"20px"}},l.createElement(t.LabelFieldPair,{style:{width:"100%"}},l.createElement(t.CardLabel,{style:{marginTop:"-10px",width:"100%"}},null!=r&&r.required?o(null==r?void 0:r.code)+"* ":""+o(null==r?void 0:r.code)),l.createElement(t.Dropdown,{className:"form-field",t:o,isMandatory:!1,option:null==r?void 0:r.dropdownData,selected:g,optionKey:"i18nKey",select:function(e){return h(e)},style:{width:"100%"}})),l.createElement(t.LabelFieldPair,{style:{width:"100%"}},l.createElement(t.CardLabel,{className:"card-label-smaller",style:{width:"100%"}}),l.createElement("div",{className:"field",style:{width:"100%"}},l.createElement(t.MultiUploadWrapper,{module:"BPA",tenantId:f,getFormState:function(e){return function(e,t){var n,l=Object.fromEntries(t),a=Object.values(l);0!==Object.keys(l).length&&b(a),(n=a[a.length-1])&&y(n.file)}(0,e)},t:o,allowedFileTypesRegex:/(.*?)(jpg|jpeg|png|image|pdf)$/i,allowedMaxSizeInMB:5,acceptFiles:"image/*, .pdf, .png, .jpeg, .jpg"})))):null)}function Jl(e){var n=e.fiReport,i=e.isCitizen,o=void 0!==i&&i,r=a.useTranslation().t;return l.createElement(l.Fragment,null,l.createElement("div",{style:{marginTop:"10px"}},l.createElement(o?t.CardHeader:t.CardSectionHeader,{style:{fontSize:"24px"}},""+r("BPA_FI_REPORT")),n.map(function(e,a){var i,o,u,c,s,d;return l.createElement("div",{style:{background:"#FAFAFA",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",maxWidth:"950px",minWidth:"280px",marginBottom:"24px"}},l.createElement(t.StatusTable,null,l.createElement(t.CardSectionHeader,{style:{fontSize:"20px"}},1==(null==n?void 0:n.length)?""+r("BPA_FI_REPORT"):r("BPA_FI_REPORT")+" - "+(a+1)),l.createElement(t.Row,{className:"border-none",label:""+r("BPA_FI_DATE_LABEL"),text:null!=e&&e.date?e.date.includes("-")?(null===(i=e.date)||void 0===i?void 0:i.split("-")[2])+"/"+(null===(o=e.date)||void 0===o?void 0:o.split("-")[1])+"/"+(null===(u=e.date)||void 0===u?void 0:u.split("-")[0]):null==e?void 0:e.date:"NA"}),l.createElement(t.Row,{className:"border-none",label:""+r("BPA_FI_TIME_LABEL"),text:null!=e&&e.time?null==e?void 0:e.time:"NA"}),(null==e||null===(c=e.questions)||void 0===c?void 0:c.length)&&(null==e||null===(s=e.questions)||void 0===s?void 0:s.map(function(e){return l.createElement("div",{style:{background:"white",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",marginTop:"10px"}},l.createElement(t.Row,{className:"border-none",label:""+r(""+e.question),text:null!=e&&e.value?null==e?void 0:e.value:"NA"}),l.createElement(t.Row,{className:"border-none",label:""+r("BPA_ENTER_REMARKS"),text:e.remarks?e.remarks:"NA"}))})),l.createElement(Kl,{documents:(d=null==e?void 0:e.docs,[{title:"BPA_DOCUMENT_DETAILS_LABEL",values:null==d?void 0:d.map(function(e){var t;return{title:null==e||null===(t=e.documentType)||void 0===t?void 0:t.replaceAll(".","_"),documentType:null==e?void 0:e.documentType,documentUid:null==e?void 0:e.documentUid,fileStoreId:null==e?void 0:e.fileStoreId,id:null==e?void 0:e.id,url:null==e?void 0:e.url}})}]),svgStyles:{width:"100px",height:"100px",viewBox:"0 0 25 25",minWidth:"100px"}})))})))}function Zl(e){var a=e.t,i=e.document,o=e.setNocDocuments,r=e.setError,u=e.nocDocuments,c=null==u?void 0:u.filter(function(e){var t;return null==e||null===(t=e.documentType)||void 0===t?void 0:t.includes(null==i?void 0:i.code)})[0],s=Digit.ULBService.getStateId(),d=(n.useState(),n.useState(null)),v=d[0],E=d[1],f=n.useState(function(){return(null==c?void 0:c.fileStoreId)||null}),p=f[0],g=f[1];return n.useEffect(function(){var e,t;null!=i&&null!==(e=i.dropdownData)&&void 0!==e&&null!==(t=e[0])&&void 0!==t&&t.code&&o(function(e){var t,n=null==e?void 0:e.filter(function(e){var t,n;return(null==e?void 0:e.documentType)!==(null==i||null===(t=i.dropdownData)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.code)});if(0===(null==p?void 0:p.length)||null===p)return n;var l=null==n?void 0:n.filter(function(e){return(null==e?void 0:e.fileStoreId)!==p});return[].concat(l,[{documentType:null==i||null===(t=i.dropdownData)||void 0===t?void 0:t[0].code,fileStoreId:p,documentUid:p,fileName:(null==v?void 0:v.name)||""}])})},[p]),n.useEffect(function(){!function(){try{r(null);var e=function(){if(v){var e=/(.*?)(jpg|jpeg|png|image|pdf)$/i,t=function(){if(v.size>=5242880)r(a("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{var t=function(){if(null!=v&&v.type&&!e.test(null==v?void 0:v.type))r(a("NOT_SUPPORTED_FILE_TYPE"));else{var t=m(function(){return g(null),Promise.resolve(Digit.UploadServices.Filestorage("PT",v,Digit.ULBService.getStateId())).then(function(e){var t,n,l,i;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?g(null==e||null===(l=e.data)||void 0===l||null===(i=l.files[0])||void 0===i?void 0:i.fileStoreId):r(a("CS_FILE_UPLOAD_ERROR"))})},function(){r(a("CS_FILE_UPLOAD_ERROR"))});if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();if(t&&t.then)return t.then(function(){})}}();e&&e.then&&e.then(function(){})}catch(e){Promise.reject(e)}}()},[v]),l.createElement("div",{style:{}},l.createElement(t.LabelFieldPair,{style:{width:"98%",marginRight:"10px"}},l.createElement(t.CardLabel,{style:{width:"100%"}},null!=i&&i.required?a("TL_BUTTON_UPLOAD FILE")+"*":""+a("TL_BUTTON_UPLOAD FILE")),l.createElement("div",{className:"field",style:{width:"100%"}},l.createElement(t.MultiUploadWrapper,{module:"NOC",tenantId:s,getFormState:function(e){return function(e){var t,n=Object.fromEntries(e),l=Object.values(n);(t=l[l.length-1])&&E(t.file)}(e)},t:a,allowedFileTypesRegex:/(.*?)(jpg|jpeg|png|image|pdf)$/i,allowedMaxSizeInMB:5,acceptFiles:"image/*, .pdf, .png, .jpeg, .jpg"}))))}var $l=function(e){var a,i=e.t,o=e.noc,r=e.docs,u=e.isNoc,c=e.applicationData,s=e.NOCdata,d=e.bpaActionsDetails,m=(Digit.ULBService.getStateId(),Digit.ULBService.getStateId()),v=(null==c?void 0:c.status)||"",E=(null==d||null===(a=d.data)||void 0===a?void 0:a.nextActions)||[],f=Digit.Hooks.obps.useMDMS(m,"NOC",["DocumentTypeMapping"],{enabled:u}).data,p=Digit.Hooks.obps.useMDMS(m,"BPA",["DocTypeMapping"],{enabled:!u}).data,g=Digit.Hooks.obps.useMDMS(m,"common-masters",["DocumentType"]).data,h=n.useState([]),_=h[0],S=h[1],y=n.useState([]),C=y[0],T=y[1],D=n.useState(!1),b=D[0],N=D[1],A=Digit.Hooks.useSessionStorage(null==o?void 0:o.nocType,[]),O=A[0],w=A[1],L=n.useState(null),I=L[0],R=L[1],x=window.location.href.includes("/employee/");return n.useEffect(function(){var e;S(null==g||null===(e=g["common-masters"])||void 0===e?void 0:e.DocumentType)},[g]),n.useEffect(function(){var e,t,n,l,a,i,r,s,d=[];null!==(e=l=u?null==f||null===(a=f.NOC)||void 0===a||null===(i=a.DocumentTypeMapping)||void 0===i?void 0:i.filter(function(e){return(null==e?void 0:e.applicationType)===(null==o?void 0:o.applicationType)&&(null==e?void 0:e.nocType)===(null==o?void 0:o.nocType)}):null==p||null===(r=p.BPA)||void 0===r||null===(s=r.DocTypeMapping)||void 0===s?void 0:s.filter(function(e){var t,n;return e.WFState==(null==c?void 0:c.status)&&e.RiskType==(null==c?void 0:c.riskType)&&e.ServiceType==(null==c||null===(t=c.additionalDetails)||void 0===t?void 0:t.serviceType)&&e.applicationType==(null==c||null===(n=c.additionalDetails)||void 0===n?void 0:n.applicationType)}))&&void 0!==e&&null!==(t=e[0])&&void 0!==t&&null!==(n=t.docTypes)&&void 0!==n&&n[0]&&(l[0].docTypes[0].nocType=l[0].nocType,l[0].docTypes[0].additionalDetails={submissionDetails:null==o?void 0:o.additionalDetails,applicationStatus:null==o?void 0:o.applicationStatus,appNumberLink:null==o?void 0:o.applicationNo,nocNo:null==o?void 0:o.nocNo},d.push(l[0].docTypes[0]));var m=[];d&&d.length>0&&(d.map(function(e){var t=e.documentType;e.dropdownData=[],null==_||_.forEach(function(n){var l=n.code.slice(0,null==t?void 0:t.length);t===l&&(e.hasDropdown=!0,e.dropdownData.push(n))}),m.push(e)}),T(m))},[f,_]),n.useEffect(function(){N("NOC_VERIFICATION_INPROGRESS"===v&&(null==E?void 0:E.length)>0)},[c,d]),l.createElement("div",{style:{border:"1px solid #D6D5D4",padding:"16px 0px 16px 8px",background:"#FAFAFA",borderRadius:"5px",marginBottom:"24px",maxWidth:"950px"}},l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:x?""+i("BPA_"+(null==o?void 0:o.nocType)+"_HEADER"):i("BPA_"+(null==o?void 0:o.nocType)+"_HEADER"),labelStyle:{fontSize:"20px",width:"150%"}}),s&&s.map(function(e,n){if(null!=e&&e.value)return l.createElement(t.Row,"STATUS"==(null==e?void 0:e.field)?{className:"border-none",label:x?""+i(null==e?void 0:e.title):i(null==e?void 0:e.title),text:i(null!=e&&e.value?null==e?void 0:e.value:"CS_NA"),textStyle:"APPROVED"==(null==e?void 0:e.value)||"AUTO_APPROVED"==(null==e?void 0:e.value)?{color:"#00703C"}:{color:"#D4351C"}}:{className:"border-none",label:x?""+i(null==e?void 0:e.title):i(null==e?void 0:e.title),text:i(null!=e&&e.value?null==e?void 0:e.value:"CS_NA")})})),l.createElement(Kl,{documents:r,svgStyles:{width:"80px",height:"100px",viewBox:"0 0 25 25",minWidth:"80px"}}),b&&(null==C?void 0:C.map(function(e,t){return l.createElement(Zl,{key:t,document:e,t:i,error:I,setError:R,setNocDocuments:w,nocDocuments:O,checkEnablingDocs:b})})))},ea=function(e){var a=e.permissions,i=e.t,o=Digit.Hooks.useSessionStorage("OBPS_APPROVAL_CHECKS",null==a?void 0:a.map(function(e){return{label:e,checked:!1}})),r=o[0],u=o[1],s=Digit.Hooks.useSessionStorage("OBPS_NEW_APPROVALS",[]),d=s[0],m=s[1];return n.useEffect(function(){return function(){Digit.SessionStorage.del("OBPS_NEW_APPROVALS"),Digit.SessionStorage.del("OBPS_APPROVAL_CHECKS")}},[]),l.createElement("div",null,l.createElement(t.CardSubHeader,{style:{marginBottom:"16px",fontSize:"24px"}},i("BPA_PERMIT_CONDITIONS")),null==r?void 0:r.map(function(e,n){return l.createElement(t.CheckBox,{key:n,styles:{margin:"20px 0 40px",maxWidth:"70%"},label:null==e?void 0:e.label,checked:null==e?void 0:e.checked,onChange:function(e){return function(e,t,n){var l=e.target.checked;u(function(){return null==r?void 0:r.map(function(e,t){return n===t?c({},e,{checked:l}):e})})}(e,0,n)},isLabelFirst:!0,index:n})}),null==d?void 0:d.map(function(e,n){return l.createElement("div",null," ",l.createElement(t.TextInput,{key:n,value:null==e?void 0:e.label,onChange:function(e){return function(e,t){m(function(){return null==d?void 0:d.map(function(n,l){var a;return t===l?{label:null==e||null===(a=e.target)||void 0===a?void 0:a.value}:n})})}(e,n)},textInputStyle:{maxWidth:"830px",width:"830px"},placeholder:"Enter permit conditions.........."}),l.createElement(t.LinkButton,{label:l.createElement("div",null,l.createElement("span",null,l.createElement(t.Close,{style:{float:"right",position:"relative",bottom:"32px",marginTop:"-21px",marginRight:"35%"}}))),style:{},onClick:function(e){return function(e){var t=[].concat(d);t.splice(e,1),m([].concat(t))}(n)}}))}),l.createElement(t.LinkButton,{style:{color:"#f47738",maxWidth:"10%",marginRight:"3%"},label:i("BPA_ADD_MORE"),onClick:function(){m([].concat(d,[{label:""}]))}}))};function ta(e){var i=e.documents,o=e.svgStyles,r=void 0===o?{}:o,u=e.isSendBackFlow,c=void 0!==u&&u,s=a.useTranslation().t,d=n.useState(function(){return[]}),m=d[0],v=d[1],E=(Digit.ULBService.getCurrentTenantId(),n.useState({})),f=E[0],p=E[1];n.useEffect(function(){var e,t=[];null==i||i.forEach(function(e,n,l){t=[].concat(t,e.values?e.values:[])}),v(null===(e=t)||void 0===e?void 0:e.map(function(e){return null==e?void 0:e.fileStoreId}))},[i]),n.useEffect(function(){var e;null!=m&&m.length&&"BillAmend"===(null==i||null===(e=i[0])||void 0===e?void 0:e.BS)?Digit.UploadServices.Filefetch(m,Digit.ULBService.getCurrentTenantId()).then(function(e){p(null==e?void 0:e.data)}):null!=m&&m.length&&Digit.UploadServices.Filefetch(m,Digit.ULBService.getStateId()).then(function(e){p(null==e?void 0:e.data)})},[m]);var g=window.location.href.includes("employee/tl")||window.location.href.includes("/obps")||window.location.href.includes("employee/ws"),h=window.location.href.includes("stakeholder");return l.createElement("div",{style:{marginTop:"19px"}},!h&&(null==i?void 0:i.map(function(e,n){var a;return l.createElement(l.Fragment,{key:n},null!=e&&e.title?l.createElement(t.CardSubHeader,{style:g?{marginTop:"32px",marginBottom:"18px",color:"#0B0C0C, 100%",fontSize:"24px",lineHeight:"30px"}:{marginTop:"32px",marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},s(null==e?void 0:e.title)):null,l.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start"}},null!=e&&e.values&&(null==e?void 0:e.values.length)>0?null==e||null===(a=e.values)||void 0===a?void 0:a.map(function(e,n){var a,i;return l.createElement("a",{target:"_",href:null===(a=f[e.fileStoreId])||void 0===a?void 0:a.split(",")[0],style:{minWidth:"80px",marginRight:"10px",maxWidth:"100px",height:"auto"},key:n},l.createElement("div",{style:{display:"flex",justifyContent:"center"}},l.createElement(t.PDFSvg,null)),l.createElement("p",{style:g?{marginTop:"8px",fontWeight:"bold",fontSize:"16px",lineHeight:"19px",color:"#505A5F",textAlign:"center"}:{marginTop:"8px",fontWeight:"bold",wordBreak:"break-word"}},s(null==e?void 0:e.title)),c?null!=e&&null!==(i=e.documentType)&&void 0!==i&&i.includes("NOC")?l.createElement("p",{style:{textAlign:"center"}},s(null==e?void 0:e.documentType.split(".")[1])):l.createElement("p",{style:{textAlign:"center"}},s(null==e?void 0:e.documentType)):"")}):!window.location.href.includes("citizen")&&l.createElement("div",null,l.createElement("p",null,s("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))))})),h&&(null==i?void 0:i.map(function(e,n){var a;return l.createElement(l.Fragment,{key:n},null!=e&&e.title?l.createElement(t.CardSubHeader,{style:{marginTop:"32px",marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},s(null==e?void 0:e.title)):null,l.createElement("div",null,null!=e&&e.values&&(null==e?void 0:e.values.length)>0?null==e||null===(a=e.values)||void 0===a?void 0:a.map(function(e,n){var a;return l.createElement("a",{target:"_",href:null===(a=f[e.fileStoreId])||void 0===a?void 0:a.split(",")[0],style:{minWidth:null!=r&&r.minWidth?null==r?void 0:r.minWidth:"160px",marginRight:"20px"},key:n},l.createElement("div",{style:{maxWidth:"940px",padding:"8px",borderRadius:"4px",border:"1px solid #D6D5D4",background:"#FAFAFA"}},l.createElement("p",{style:{marginTop:"8px",fontWeight:"bold",marginBottom:"10px"}},s(null==e?void 0:e.title)),null!=e&&e.docInfo?l.createElement("div",{style:{fontSize:"12px",color:"#505A5F",fontWeight:400,lineHeight:"15px",marginBottom:"10px"}},""+s(null==e?void 0:e.docInfo)):null,l.createElement(t.PDFSvg,null),l.createElement("p",{style:{marginTop:"8px",fontSize:"16px",lineHeight:"19px",color:"#505A5F",fontWeight:"400"}},""+s(null==e?void 0:e.title))))}):!window.location.href.includes("citizen")&&l.createElement("div",null,l.createElement("p",null,s("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))))})))}function na(e){var n=e.taxHeadEstimatesCalculation,i=n.taxHeadEstimates,o=a.useTranslation().t;return l.createElement("div",{style:{marginTop:"40px"}},l.createElement(t.StatusTable,null,l.createElement(t.Row,{label:o("ES_PT_TITLE_TAX_HEADS"),text:o("ES_PT_TITLE_AMOUNT"),className:"border-none",textStyle:{fontWeight:"bold"}}),l.createElement(t.BreakLine,{style:{margin:"16px 0",width:"40%"}}),null==i?void 0:i.map(function(e,n){return l.createElement(t.Row,{key:o(e.taxHeadCode),label:o(e.taxHeadCode),text:"₹ "+e.estimateAmount||"N/A",last:n===(null==i?void 0:i.length)-1,className:"border-none",textStyle:{color:"#505A5F"},labelStyle:{color:"#505A5F"}})}),l.createElement(t.BreakLine,{style:{margin:"16px 0",width:"40%"}}),l.createElement(t.Row,{label:o("ES_PT_TITLE_TOTAL_DUE_AMOUNT"),text:"₹ "+(null==n?void 0:n.totalAmount)||"N/A",className:"border-none",textStyle:{fontSize:"24px",fontWeight:"bold"}})))}function la(e){var n=e.floors,i=a.useTranslation().t;return l.createElement(l.Fragment,null,n.map(function(e){var n;return l.createElement("div",{key:i(null==e?void 0:e.title),style:{marginTop:"19px"}},l.createElement(t.CardSubHeader,{style:{marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},i(null==e?void 0:e.title)),null==e||null===(n=e.values)||void 0===n?void 0:n.map(function(e,n){var a;return l.createElement(l.Fragment,{key:n},l.createElement(t.CardSectionHeader,{style:{marginBottom:"16px",color:"#505A5F",fontSize:"16px",marginTop:0!==n?"16px":"revert"}},i(e.title)),l.createElement(t.StatusTable,{style:{position:"relative",padding:"8px"}},l.createElement("div",{style:{border:"1px solid #D6D5D4",padding:"16px",marginTop:"8px",borderRadius:"4px",background:"#FAFAFA",maxWidth:"100%"}},null==e||null===(a=e.values)||void 0===a?void 0:a.map(function(e,n){var a;return l.createElement(t.Row,!0===e.map&&"N/A"!==e.value?{key:i(e.title),label:i(e.title),text:l.createElement("img",{src:i(e.value),alt:""})}:{key:i(e.title),label:i(e.title),text:i(e.value)||"N/A",last:n===(null==e||null===(a=e.values)||void 0===a?void 0:a.length)-1,caption:e.caption,className:"border-none"})}))))}))}))}function aa(e){var n=e.owners,i=a.useTranslation().t,o=(null==n?void 0:n.length)||1,r={marginTop:"19px"},u={position:"relative",padding:"8px"},s={justifyContent:"space-between",fontSize:"16px",lineHeight:"19px",color:"#0B0C0C"};return Number(o)>1?r={marginTop:"19px",background:"#FAFAFA",border:"1px solid #D6D5D4",borderRadius:"4px",padding:"8px",lineHeight:"19px",maxWidth:"600px",minWidth:"280px"}:Number(o)>1||(r={marginTop:"19px",lineHeight:"19px",maxWidth:"600px",minWidth:"280px"},u={position:"relative",marginTop:"19px"}),window.location.href.includes("obps")&&(r=c({},r,{maxWidth:"950px"}),r=c({},r,{maxWidth:"950px"}),s={}),l.createElement(l.Fragment,null,n.map(function(e,n){var a;return l.createElement("div",{key:i(null==e?void 0:e.title),style:r},l.createElement(t.CardSubHeader,{style:Number(o)>1?{marginBottom:"8px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"16px",lineHeight:"19px"}:{marginBottom:"8px",color:"#505A5F",fontSize:"24px"}},Number(o)>1?i(null==e?void 0:e.title)+" "+(n+1):i(null==e?void 0:e.title)),l.createElement(l.Fragment,{key:n},l.createElement(t.StatusTable,{style:u},l.createElement("div",{style:{maxWidth:"640px",top:0,left:0,bottom:0,right:0,width:"auto"}}),null==e||null===(a=e.values)||void 0===a?void 0:a.map(function(e,n){var a;return!0===e.map&&"N/A"!==e.value?l.createElement(t.Row,{key:i(e.title),label:i(e.title),text:l.createElement("img",{src:i(e.value),alt:"",privacy:null==e?void 0:e.privacy})}):l.createElement("span",null,l.createElement(t.Row,{key:i(e.title),label:""+i(e.title),text:i(e.value)||"N/A",last:n===(null==e||null===(a=e.values)||void 0===a?void 0:a.length)-1,caption:e.caption,className:"border-none",textStyle:e.textStyle,privacy:null==e?void 0:e.privacy,rowContainerStyle:s}))}))))}))}var ia=function(e){var i,o,r,u=e.scrutinyDetails,c=a.useTranslation().t,s=function(e){return null!=e&&e.value&&null!=e&&e.isTransLate?l.createElement("span",{style:{color:"#00703C"}},c(null==e?void 0:e.value)):null!=e&&e.value&&null!=e&&e.isTransLate?c(null==e?void 0:e.value):null!=e&&e.value?null==e?void 0:e.value:void c("NA")};return l.createElement(n.Fragment,null,!(null!=u&&u.isChecklist)&&l.createElement("div",{style:{background:"#FAFAFA",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",maxWidth:"950px",minWidth:"280px"}},l.createElement(t.StatusTable,null,l.createElement("div",null,null==u||null===(i=u.values)||void 0===i?void 0:i.map(function(e,n){return null!=e&&e.isUnit?l.createElement(t.Row,{className:"border-none",textStyle:"Paid"===(null==e?void 0:e.value)?{color:"darkgreen"}:"Unpaid"===(null==e?void 0:e.value)?{color:"red"}:{},key:""+e.title,label:""+c(""+e.title),text:null!=e&&e.value?s(e)+" "+c(null==e?void 0:e.isUnit):c("NA"),labelStyle:null!=e&&e.isHeader?{fontSize:"20px"}:{}}):null==e||!e.isHeader||null!=e&&e.isUnit?null==e||!e.isSubTitle||null!=e&&e.isUnit?l.createElement(t.Row,{className:"border-none",textStyle:"Paid"===(null==e?void 0:e.value)?{color:"darkgreen"}:"Unpaid"===(null==e?void 0:e.value)?{color:"red"}:{},key:""+e.title,label:""+c(""+e.title),text:s(e),labelStyle:null!=e&&e.isHeader?{fontSize:"20px"}:{}}):l.createElement(t.CardSubHeader,{style:{fontSize:"20px",paddingBottom:"10px",margin:"0px"}},c(null==e?void 0:e.title)):l.createElement(t.CardSubHeader,{style:{fontSize:"20px",paddingBottom:"10px"}},c(null==e?void 0:e.title))}),null==u||null===(o=u.permit)||void 0===o?void 0:o.map(function(e,n){return l.createElement(t.CardLabel,{style:{fontWeight:"400"}},null==e?void 0:e.title)})),l.createElement("div",null,null==u||null===(r=u.scruntinyDetails)||void 0===r?void 0:r.map(function(e,a){return l.createElement(n.Fragment,null,l.createElement(t.Row,{className:"border-none",label:""+c(null==e?void 0:e.title),labelStyle:{width:"150%"}}),l.createElement("a",{href:null==e?void 0:e.value}," ",l.createElement(t.PDFSvg,null)," "),l.createElement("p",{style:{margin:"8px 0px",fontWeight:"bold",fontSize:"16px",lineHeight:"19px",color:"#505A5F"}},c(null==e?void 0:e.text)))})))))},oa=function(e){var i,o,r,u,c,s=e.edcrDetails,d=e.applicationData,m=a.useTranslation().t,v=window.Digit.Utils.browser.isMobile(),E=[{name:"BPA_TABLE_COL_FLOOR",id:"Floor"},{name:"BPA_TABLE_COL_LEVEL",id:"Level"},{name:"BPA_TABLE_COL_OCCUPANCY",id:"Occupancy"},{name:"BPA_TABLE_COL_BUILDUPAREA",id:"BuildupArea"},{name:"BPA_TABLE_COL_FLOORAREA",id:"FloorArea"},{name:"BPA_TABLE_COL_CARPETAREA",id:"CarpetArea"}],f=n.useMemo(function(){return E.map(function(e){return{Header:m(""+e.name),accessor:(t=e.id,n=t,function(e,t,l){return e[n]}),id:e.id};var t,n})});function p(e){var t,n=[];return null==e||null===(t=e.building)||void 0===t||t.floors.map(function(e){var t,l,a,i,o,r,u,c;n.push({Floor:m("BPA_FLOOR_NAME_"+e.number),Level:e.number,Occupancy:m(""+(null===(t=e.occupancies)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.type)),BuildupArea:null===(a=e.occupancies)||void 0===a||null===(i=a[0])||void 0===i?void 0:i.builtUpArea,FloorArea:(null===(o=e.occupancies)||void 0===o||null===(r=o[0])||void 0===r?void 0:r.floorArea)||0,CarpetArea:(null===(u=e.occupancies)||void 0===u||null===(c=u[0])||void 0===c?void 0:c.CarpetArea)||0,key:m("BPA_FLOOR_NAME_"+e.number)})}),n}function g(e){var t,n=null==d||null===(t=d.landInfo)||void 0===t?void 0:t.unit,l="";if((null==n?void 0:n.length)>0){var a,i,o=null===(a=n[e])||void 0===a||null===(i=a.usageCategory)||void 0===i?void 0:i.split(",");null!=o&&o.length&&(l=o.map(function(e){return e?""+m("BPA_SUBOCCUPANCYTYPE_"+function(e,t,n){if(void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),""==t)return e;for(;e.includes(t);)e=e.replace(t,n);return e}(null==e?void 0:e.toUpperCase(),"-","_")):"NA"}).join(", "))}return l||"NA"}return l.createElement(n.Fragment,null,l.createElement("div",{style:{background:"#FAFAFA",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",maxWidth:"950px",minWidth:"280px"}},l.createElement(t.StatusTable,null,null==s||null===(i=s.values)||void 0===i?void 0:i.map(function(e,n){return null!=e&&e.isHeader?l.createElement(t.CardSubHeader,{style:{fontSize:"20px",paddingBottom:"10px"}},m(null==e?void 0:e.title)):l.createElement(t.Row,{className:"border-none",labelStyle:{width:"100%",fontSize:"20px"},key:""+e.title,label:""+m(""+e.title),text:null!=e&&e.value?null==e?void 0:e.value:""})})),null==s||null===(o=s.subOccupancyTableDetails)||void 0===o||null===(r=o[0])||void 0===r||null===(u=r.value)||void 0===u||null===(c=u.planDetail)||void 0===c?void 0:c.blocks.map(function(e,n){var a,i,o,r,u;return l.createElement("div",{key:n,style:(null==s||null===(a=s.subOccupancyTableDetails)||void 0===a||null===(i=a[0])||void 0===i||null===(o=i.value)||void 0===o||null===(r=o.planDetail)||void 0===r||null===(u=r.blocks)||void 0===u?void 0:u.length)>0?{marginBottom:"30px",background:"#FAFAFA",border:"1px solid #D6D5D4",padding:"8px",borderRadius:"4px",maxWidth:"950px",minWidth:"280px"}:{marginBottom:"30px"}},l.createElement(t.CardSubHeader,{style:{marginBottom:"8px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"18px",lineHeight:"19px"}},m("BPA_BLOCK_SUBHEADER")," ",n+1),l.createElement(t.StatusTable,null,l.createElement(t.Row,{className:"border-none",textStyle:{wordBreak:"break-word"},label:""+m("BPA_SUB_OCCUPANCY_LABEL"),text:g(n)})),l.createElement("div",{style:window.location.href.includes("citizen")||v?{overflow:"scroll"}:{maxWidth:"950px",maxHeight:"280px"}},l.createElement(t.Table,{className:"customTable table-fixed-first-column table-border-style",t:m,disableSort:!1,autoSort:!0,manualPagination:!1,isPaginationRequired:!1,initSortId:"S N ",data:p(e),columns:f,getCellProps:function(e){return{style:{}}}})))})))},ra=function(e){var t=e.otherComment;return l.createElement("div",{className:"checkpoint-comments-wrap"},l.createElement("h4",null,e.headComment),l.createElement("p",null,t))},ua=function(e){var n,i,o,r=e.data,u=e.OpenImage,c=e.privacy,s=void 0===c?{}:c,d=a.useTranslation().t;return l.createElement("div",null,r.date&&l.createElement("p",null,r.date),l.createElement("p",null,r.name),r.mobileNumber&&l.createElement("span",{style:{display:"inline-flex",width:"fit-content",marginLeft:"10px"}},l.createElement(t.TelePhone,{mobile:r.mobileNumber}),l.createElement("p",null,"    "),l.createElement(t.UnMaskComponent,{privacy:s})),r.source&&l.createElement("p",null,d("ES_APPLICATION_DETAILS_APPLICATION_CHANNEL_"+r.source.toUpperCase())),r.comment&&l.createElement(ra,{otherComment:null==r?void 0:r.otherComment,headComment:null==r?void 0:r.comment}),null!=r&&r.wfComment?l.createElement("div",null,null==r||null===(n=r.wfComment)||void 0===n?void 0:n.map(function(e){return l.createElement("div",{className:"TLComments"},l.createElement("h3",null,d("WF_COMMON_COMMENTS")),l.createElement("p",null,e))})):null,(null==r||null===(i=r.thumbnailsToShow)||void 0===i||null===(o=i.thumbs)||void 0===o?void 0:o.length)>0?l.createElement("div",{className:"TLComments"},l.createElement("h3",null,d("CS_COMMON_ATTACHMENTS")),l.createElement(t.DisplayPhotos,{srcs:null==r?void 0:r.thumbnailsToShow.thumbs,onClick:function(e,t){u(e,t,null==r?void 0:r.thumbnailsToShow)}})):null)};function ca(e){var n=e.units,i=a.useTranslation().t;return l.createElement(l.Fragment,null,n.map(function(e,n){var a;return l.createElement("div",{key:i(null==e?void 0:e.title),style:{marginTop:"19px",background:"#FAFAFA",border:"1px solid #D6D5D4",borderRadius:"4px",padding:"8px",lineHeight:"19px",maxWidth:"600px",minWidth:"280px"}},l.createElement(t.CardSubHeader,{style:{marginBottom:"8px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"16px",lineHeight:"19px"}},i(null==e?void 0:e.title)+" "+(n+1)),l.createElement(l.Fragment,{key:n},l.createElement(t.StatusTable,{style:{position:"relative",marginTop:"19px"}},l.createElement("div",{style:{position:"absolute",maxWidth:"640px",top:0,left:0,bottom:0,right:0,width:"auto"}}),null==e||null===(a=e.values)||void 0===a?void 0:a.map(function(e,n){var a;return l.createElement(t.Row,!0===e.map&&"N/A"!==e.value?{key:i(e.title),label:i(e.title),text:l.createElement("img",{src:i(e.value),alt:""})}:{key:i(e.title),label:i(e.title)+":",text:i(e.value)||"N/A",last:n===(null==e||null===(a=e.values)||void 0===a?void 0:a.length)-1,caption:e.caption,className:"border-none",rowContainerStyle:{justifyContent:"space-between",fontSize:"16px",lineHeight:"19px",color:"#0B0C0C"}})}))))}))}function sa(e){var n=e.units,i=a.useTranslation().t;return l.createElement(l.Fragment,null,n.map(function(e,n){var a;return l.createElement("div",{key:i(null==e?void 0:e.title),style:{marginTop:"19px",background:"#FAFAFA",border:"1px solid #D6D5D4",borderRadius:"4px",padding:"8px",lineHeight:"19px",maxWidth:"600px",minWidth:"280px"}},l.createElement(t.CardSubHeader,{style:{marginBottom:"9px",paddingBottom:"9px",color:"#0B0C0C",fontSize:"16px",lineHeight:"19px"}},i(null==e?void 0:e.title)+" "+(n+1)),l.createElement(l.Fragment,{key:n},l.createElement(t.StatusTable,{style:{position:"relative",marginTop:"19px"}},l.createElement("div",{style:{position:"absolute",maxWidth:"640px",top:0,left:0,bottom:0,right:0,width:"auto"}}),null==e||null===(a=e.values)||void 0===a?void 0:a.map(function(e,n){var a;return l.createElement(t.Row,!0===e.map&&"N/A"!==e.value?{key:i(e.title),label:i(e.title),text:l.createElement("img",{src:i(e.value),alt:""})}:{key:i(e.title),label:i(e.title)+":",text:i(e.value)||"NA",last:n===(null==e||null===(a=e.values)||void 0===a?void 0:a.length)-1,caption:e.caption,className:"border-none",rowContainerStyle:{justifyContent:"space-between",fontSize:"16px",lineHeight:"19px",color:"#0B0C0C"}})}))))}))}var da=[{title:"PT_PENDING_DUES_FROM_EARLIER",value:"Pending dues from earlier"},{title:"PT_MISCALCULATION_OF_EARLIER_ASSESSMENT",value:"Miscalculation of earlier Assessment"},{title:"PT_ONE_TIME_PENALITY",value:"One time penality"},{title:"PT_OTHERS",value:"Others"}],ma=[{title:"PT_ADVANCED_PAID_BY_CITIZEN_EARLIER",value:"Advanced Paid By Citizen Earlier"},{title:"PT_REBATE_PROVIDED_BY_COMMISSIONER_EO",value:"Rebate provided by commissioner/EO"},{title:"PT_ADDITIONAL_AMOUNT_CHARGED_FROM_THE_CITIZEN",value:"Additional amount charged from the citizen"},{title:"PT_OTHERS",value:"Others"}],va=function(e){var i,o,r,u,s=e.wsAdditionalDetails,d=a.useTranslation().t,m=Digit.Hooks.useSessionStorage("ADHOC_ADD_REBATE_DATA",{}),v=m[0],E=m[1],f=Digit.Hooks.useSessionStorage("ADHOC_BILL_ADD_REBATE_DATA",{})[1],p=!(null==s||null===(i=s.additionalDetails)||void 0===i||!i.isPaid),g=n.useState(!1),h=g[0],S=g[1],y=n.useState(v||{}),C=y[0],T=y[1],D=n.useState(null),b=D[0],N=D[1],A=n.useState(s.additionalDetails.data?s.additionalDetails.data:{}),O=A[0],w=A[1],L=n.useState(s.additionalDetails.values?s.additionalDetails.values:[]),I=L[0],R=L[1],x=Digit.ULBService.getStateId();Digit.Hooks.ws.useMDMS(x,"BillingService",["TaxHeadMaster"]),n.useEffect(function(){var e,t,n,l=c({},null==s||null===(e=s.additionalDetails)||void 0===e||null===(t=e.appDetails)||void 0===t?void 0:t.additionalDetails);if(E(l),T(l),(null==v||null===(n=v.billDetails)||void 0===n?void 0:n.length)>0){var a,i,o,r,u,d,m,f=[{title:"WS_APPLICATION_FEE_HEADER",value:null==v||null===(a=v.billDetails)||void 0===a||null===(i=a[0])||void 0===i?void 0:i.fee},{title:"WS_SERVICE_FEE_HEADER",value:null==v||null===(o=v.billDetails)||void 0===o||null===(r=o[0])||void 0===r?void 0:r.charge},{title:"WS_TAX_HEADER",value:null==v||null===(u=v.billDetails)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.taxAmount}];R(f),w(null==v||null===(m=v.billDetails)||void 0===m?void 0:m[0])}},[]);var M=function(e){return l.createElement("h1",{className:"heading-m"},e.label)},P=function(){return l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},F=function(e){return l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(P,null))},U=function(e,t,n){void 0===t&&(t=!1);var l=c({},C);t?(l[e+"_data"]=n,l[e]=n.title,"PT_OTHERS"==n.title&&"adhocPenaltyReason"==e&&(l.adhocPenaltyComment=""),"PT_OTHERS"==n.title&&"adhocRebateReason"==e&&(l.adhocRebateComment="")):l[e]=n.target.value,T(l)};return l.createElement(n.Fragment,null,l.createElement("div",{style:{lineHeight:"19px",maxWidth:"950px",minWidth:"280px"}},I&&l.createElement(t.StatusTable,null,l.createElement("div",null,null==I?void 0:I.map(function(e,n){return l.createElement(t.Row,{className:"border-none",key:""+e.title,label:""+d(""+e.title),text:null!=e&&e.value?Number(null==e?void 0:e.value).toFixed(2):""})})),l.createElement("hr",{style:{border:"1px solid #D6D5D4",color:"#D6D5D4",margin:"16px 0px"}}),l.createElement("div",null,l.createElement(t.Row,{className:"border-none",key:"WS_COMMON_TOTAL_AMT",label:""+d("WS_COMMON_TOTAL_AMT"),text:Number(null==O?void 0:O.totalAmount).toFixed(2)||0}),l.createElement(t.Row,{className:"border-none",key:"CS_INBOX_STATUS_FILTER",label:""+d("CS_INBOX_STATUS_FILTER"),text:d(p?"WS_COMMON_PAID_LABEL":"WS_COMMON_NOT_PAID"),textStyle:p?{color:"#00703C"}:{color:"#D4351C"}}))),null!=s&&null!==(o=s.additionalDetails)&&void 0!==o&&o.isAdhocRebate?l.createElement("div",{onClick:function(e){S(!0)}},l.createElement("span",{style:{cursor:"pointer",color:"#F47738"}},d("WS_PAYMENT_ADD_REBATE_PENALTY"))):null,h&&l.createElement(t.Modal,{headerBarMain:l.createElement(M,{label:d("PT_ADD_REBATE_PENALITY")}),headerBarEnd:l.createElement(F,{onClick:function(){T(v),S(!1)}}),actionCancelLabel:d("PT_CANCEL"),actionCancelOnSubmit:function(){T(v),S(!1)},actionSaveLabel:d("PT_ADD"),actionSaveOnSubmit:function(e){return function(e){var t,n,l=null!=C&&C.adhocPenalty?Number(null==C?void 0:C.adhocPenalty):0,a=null!=C&&C.adhocRebate?Number(null==C?void 0:C.adhocRebate):0;if(l||a)if(a>(null==s||null===(t=s.additionalDetails)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.totalAmount))N({isError:!1,isWarning:!0,key:"error",message:d("ERR_WS_REBATE_GREATER_THAN_AMOUNT")});else{var i,o,r,u,m,v,p,g,h,y,T=null==s||null===(i=s.additionalDetails)||void 0===i||null===(o=i.appDetails)||void 0===o?void 0:o.applicationNo,D=null==s||null===(r=s.additionalDetails)||void 0===r||null===(u=r.appDetails)||void 0===u?void 0:u.tenantId,b=c({},null==s||null===(m=s.additionalDetails)||void 0===m||null===(v=m.appDetails)||void 0===v?void 0:v.additionalDetails,C);s.additionalDetails.appDetails.additionalDetails=b;var A={CalculationCriteria:"WATER"==(null==s||null===(p=s.additionalDetails)||void 0===p||null===(g=p.appDetails)||void 0===g?void 0:g.service)?[{applicationNo:T,tenantId:D,waterConnection:s.additionalDetails.appDetails}]:[{applicationNo:T,tenantId:D,sewerageConnection:s.additionalDetails.appDetails}],isconnectionCalculation:!1},O="WATER"==(null==s||null===(h=s.additionalDetails)||void 0===h||null===(y=h.appDetails)||void 0===y?void 0:y.service)?"WS":"SW";Digit.WSService.wsCalculationEstimate(A,O).then(function(e,t){var n,l,a,i,o,r,u,c,s,d,m,v,p,g,h;(null==e||null===(n=e.Calculation)||void 0===n||null===(l=n[0])||void 0===l||null===(a=l.taxHeadEstimates)||void 0===a?void 0:a.length)>0&&(null==e||null===(p=e.Calculation)||void 0===p||null===(g=p[0])||void 0===g||null===(h=g.taxHeadEstimates)||void 0===h||h.forEach(function(e){return e.amount=e.estimateAmount})),e.Calculation[0].billSlabData=_.groupBy(null==e||null===(i=e.Calculation)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.taxHeadEstimates,"category");var y=[{title:"WS_APPLICATION_FEE_HEADER",value:null===(r=e.Calculation)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.fee},{title:"WS_SERVICE_FEE_HEADER",value:null===(c=e.Calculation)||void 0===c||null===(s=c[0])||void 0===s?void 0:s.charge},{title:"WS_TAX_HEADER",value:null===(d=e.Calculation)||void 0===d||null===(m=d[0])||void 0===m?void 0:m.taxAmount}];f(Rl(e.Calculation[0])),w(null==e||null===(v=e.Calculation)||void 0===v?void 0:v[0]),R(y),C.billDetails=null==e?void 0:e.Calculation,E(C),S(!1)}).catch(function(e){var t,n,l,a,i,o;N({isError:!0,isWarning:!1,key:"error",message:null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&null!==(l=n.Errors[0])&&void 0!==l&&l.message?d(""+(null==e||null===(a=e.response)||void 0===a||null===(i=a.data)||void 0===i||null===(o=i.Errors[0])||void 0===o?void 0:o.code)):d("PT_COMMON_ADD_REBATE_PENALITY")})})}else N({isError:!1,isWarning:!0,key:"warning",message:d("ERR_WS_ENTER_ATLEAST_ONE_FIELD")})}()},hideSubmit:!1,popupStyles:{overflowY:"auto"}},l.createElement("div",null,l.createElement(t.Card,{style:{padding:"10px 10px 1px 10px",margin:"0px 0px 15px 0px"}},l.createElement(t.CardSectionHeader,{style:{fontSize:"16px",fontWeight:"700",lineHeight:"18px",padding:"0px",margin:"0px 0px 10px 0px"}},d("PT_AD_PENALTY")),l.createElement(t.CardLabel,null,d("PT_TX_HEADS")),l.createElement("div",{className:"field"},l.createElement(t.Dropdown,{isMandatory:!0,option:da,optionKey:"title",select:function(e){return U("adhocPenaltyReason",!0,e)},selected:(null==C?void 0:C.adhocPenaltyReason_data)||"",isPropertyAssess:!0,name:"adhocPenaltyReason_data",t:d})),"PT_OTHERS"===(null==C||null===(r=C.adhocPenaltyReason_data)||void 0===r?void 0:r.title)&&l.createElement("div",{className:"field"},l.createElement(t.CardLabel,null,d("PT_REASON")),l.createElement("div",{className:"field"},l.createElement(t.TextInput,c({style:{background:"#FAFAFA"},t:d,type:"text",isMandatory:!1,name:"adhocPenaltyComment",value:(null==C?void 0:C.adhocPenaltyComment)||"",onChange:function(e){return U("adhocPenaltyComment",!1,e)}},{isRequired:!0,pattern:"^[a-zA-Z-.`' ]*$",type:"text",title:d("TL_NAME_ERROR_MESSAGE")})))),l.createElement(t.CardLabel,null,d("PT_HEAD_AMT")),l.createElement("div",{className:"field"},l.createElement(t.TextInput,c({style:{background:"#FAFAFA"},t:d,type:"number",isMandatory:!1,name:"adhocPenalty",value:(null==C?void 0:C.adhocPenalty)||"",onChange:function(e){return U("adhocPenalty",!1,e)}},{isRequired:!0,pattern:"^[1-9]+[0-9]*$",title:d("ERR_DEFAULT_INPUT_FIELD_MSG")})))),l.createElement(t.Card,{style:{padding:"10px 10px 1px 10px",margin:"0px 0px 15px 0px"}},l.createElement(t.CardSectionHeader,{style:{fontSize:"16px",fontWeight:"700",lineHeight:"18px",padding:"0px",margin:"0px 0px 10px 0px"}},d("PT_AD_REBATE")),l.createElement(t.CardLabel,null,d("PT_TX_HEADS")),l.createElement("div",{className:"field"},l.createElement(t.Dropdown,{isMandatory:!0,option:ma,optionKey:"title",select:function(e){return U("adhocRebateReason",!0,e)},selected:(null==C?void 0:C.adhocRebateReason_data)||"",name:"adhocRebateReason_data",isPropertyAssess:!0,t:d})),"PT_OTHERS"===(null==C||null===(u=C.adhocRebateReason_data)||void 0===u?void 0:u.title)&&l.createElement("div",{className:"field"},l.createElement(t.CardLabel,null,d("PT_REASON")),l.createElement(t.TextInput,c({style:{background:"#FAFAFA"},t:d,type:"text",isMandatory:!1,name:"adhocRebateComment",value:(null==C?void 0:C.adhocRebateComment)||"",onChange:function(e){return U("adhocRebateComment",!1,e)}},{isRequired:!0,pattern:"^[a-zA-Z-.`' ]*$",type:"text",title:d("TL_NAME_ERROR_MESSAGE")}))),l.createElement(t.CardLabel,null,d("PT_HEAD_AMT")),l.createElement("div",{className:"field"},l.createElement(t.TextInput,c({style:{background:"#FAFAFA"},t:d,type:"number",isMandatory:!1,name:"adhocRebate",value:(null==C?void 0:C.adhocRebate)||"",onChange:function(e){return U("adhocRebate",!1,e)}},{isRequired:!0,pattern:"^[1-9]+[0-9]*$",title:d("ERR_DEFAULT_INPUT_FIELD_MSG")})))))," "),b&&l.createElement(t.Toast,{style:{zIndex:"10000"},warning:null==b?void 0:b.isWarning,error:null==b||!b.isWarning,label:d(null==b?void 0:b.message),onClose:function(){N(!1)},isDleteBtn:!0})))},Ea=function(e){return l.createElement("span",null,l.createElement("svg",{style:c({},e.style),display:"inline",width:"22",height:"16",viewBox:"0 0 22 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{d:"M11 0.5C6 0.5 1.73 3.61 0 8C1.73 12.39 6 15.5 11 15.5C16 15.5 20.27 12.39 22 8C20.27 3.61 16 0.5 11 0.5ZM11 13C8.24 13 6 10.76 6 8C6 5.24 8.24 3 11 3C13.76 3 16 5.24 16 8C16 10.76 13.76 13 11 13ZM11 5C9.34 5 8 6.34 8 8C8 9.66 9.34 11 11 11C12.66 11 14 9.66 14 8C14 6.34 12.66 5 11 5Z",fill:"#F47738"})))},fa=function(e){var n=e.t,a=e.userType,i=void 0!==a&&a,o=e.infoBannerLabel,r=void 0===o?"":o,u=e.infoClickLable,c=void 0===u?"":u,s=e.infoClickInfoLabel,d=void 0===s?"":s,m=e.infoClickInfoLabel1,v=void 0===m?"":m;return i=i||Digit.SessionStorage.get("userType"),l.createElement(l.Fragment,null,l.createElement("div",{style:{width:"80%"}},l.createElement("div",{className:"info-banner-wrap",style:{color:"#3498DB",margin:"0px"}},l.createElement("div",null,l.createElement(t.InfoBannerIcon,null),l.createElement("h2",{style:{color:"#3498DB"}},n(r))),n(c)+" ",l.createElement(Ea,{style:{display:"inline",marginBottom:"5px"}})," "+n(d),l.createElement("div",null," "+n(v)))))},pa=function(e){var i,o,r,u,c,s,d,m=e.wsAdditionalDetails,v=a.useTranslation().t,E=n.useState(!1),f=E[0],p=E[1],g=n.useState({}),h=g[0],_=g[1],S=function(e){return l.createElement("h1",{className:"heading-m"},e.label)},y=function(){return l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},C=function(e){return l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(y,null))};return l.createElement(n.Fragment,null,l.createElement("div",{style:{lineHeight:"19px",maxWidth:"950px",minWidth:"280px"}},null!=m&&null!==(i=m.additionalDetails)&&void 0!==i&&i.isViewBreakup?l.createElement("div",{onClick:function(e){return n=m.additionalDetails.data||{},null!=(a=(l=sessionStorage.getItem("Digit.ADHOC_BILL_ADD_REBATE_DATA"))?JSON.parse(l):{})&&null!==(t=a.value)&&void 0!==t&&t.totalAmount&&(n=null==a?void 0:a.value),_(n),void p(!0);var t,n,l,a},style:{marginTop:"12px"}},l.createElement("span",{style:{cursor:"pointer",color:"#F47738"}},v("WS_PAYMENT_VIEW_BREAKUP"))):null,f&&l.createElement(t.Modal,{headerBarMain:l.createElement(S,{label:v("WS_CALCULATION_BREAKUP")}),headerBarEnd:l.createElement(C,{onClick:function(){p(!1)}}),hideSubmit:!0,popupStyles:{overflowY:"auto"},headerBarMainStyle:{marginBottom:"0px"},popupModuleMianStyles:{paddingTop:"0px"}},l.createElement(t.StatusTable,{style:{padding:"10px",paddingTop:"0px"}},l.createElement(t.CardSectionHeader,{style:{margin:"10px 0px"}},v("WS_APPLICATION_FEE_HEADER")),null==h||null===(o=h.billSlabData)||void 0===o||null===(r=o.FEE)||void 0===r?void 0:r.map(function(e){return l.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:""+(null==e?void 0:e.taxHeadCode),label:""+v(""+(null==e?void 0:e.taxHeadCode)),text:l.createElement("span",null,"₹",Number(null==e?void 0:e.amount)||0),textStyle:{textAlign:"right"}})}),l.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",marginBottom:"10px"}}),l.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:"PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT1",label:""+v("PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT"),text:l.createElement("span",null,"₹",Number(null==h?void 0:h.fee)||0),textStyle:{textAlign:"right",fontWeight:"700",fontSize:"24px"}}),l.createElement(t.CardSectionHeader,{style:{margin:"10px 0px"}},v("WS_SERVICE_FEE_HEADER")),null==h||null===(u=h.billSlabData)||void 0===u||null===(c=u.CHARGES)||void 0===c?void 0:c.map(function(e){return l.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:""+(null==e?void 0:e.taxHeadCode),label:""+v(""+(null==e?void 0:e.taxHeadCode)),text:l.createElement("span",null,"₹",Number(null==e?void 0:e.amount)||0),textStyle:{textAlign:"right"}})}),l.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",marginBottom:"10px"}}),l.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:"PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT2",label:""+v("PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT"),text:l.createElement("span",null,"₹",Number(null==h?void 0:h.charge)||0),textStyle:{textAlign:"right",fontWeight:"700",fontSize:"24px"}}),null==h||null===(s=h.billSlabData)||void 0===s||null===(d=s.TAX)||void 0===d?void 0:d.map(function(e){return l.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:""+(null==e?void 0:e.taxHeadCode),label:""+v(""+(null==e?void 0:e.taxHeadCode)),text:l.createElement("span",null,"₹",Number(null==e?void 0:e.amount)||0),textStyle:{textAlign:"right"}})}),l.createElement("hr",{style:{color:"#cccccc",backgroundColor:"#cccccc",marginBottom:"10px"}}),l.createElement(t.Row,{className:"border-none",rowContainerStyle:{margin:"0px"},labelStyle:{width:"50%"},key:"PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT3",label:""+v("PDF_STATIC_LABEL_CONSOLIDATED_TLAPP_TOTAL_AMOUNT"),text:l.createElement("span",null,"₹",Number(null==h?void 0:h.totalAmount)||0),textStyle:{textAlign:"right",fontWeight:"700",fontSize:"24px"}})))))},ga=function(e){var n,o,r=e.data,u=a.useTranslation().t,c=i.useHistory(),s=function(e){var t={};switch(e){case 1:t={width:"1vw"};break;case 2:t={width:"60vw"};break;case 3:t={width:"20vw"};break;case 4:t={width:"10vw"};break;default:t={width:"1vw"}}return t};return l.createElement("table",{className:"table reports-table sub-work-table"},l.createElement("thead",null,l.createElement("tr",null,null==(o=null==r?void 0:r.headers)?void 0:o.map(function(e,t){return l.createElement("th",{key:t,style:s(e)}," ",u(e)," ")}))),l.createElement("tbody",null,null==(n=null==r?void 0:r.tableRows)?void 0:n.map(function(e,n){return l.createElement("tr",{style:{height:"50%"}},l.createElement("td",{style:s(1)},e[0]),l.createElement("td",{style:s(2)}," ",e[1]===u("WORKS_TOTAL_AMT")?l.createElement("div",{style:{float:"right",fontWeight:"bold"}},e[1]):l.createElement("div",{className:"field"},e[1])),e[1]===u("WORKS_TOTAL_AMT")?l.createElement("td",{style:{width:"15vw"}},l.createElement("div",{style:{float:"right",fontWeight:"bold"}},e[2])):l.createElement("td",{style:{width:"15vw"}},l.createElement("div",{style:{float:"right"}},e[2])),e[3]&&l.createElement("td",{style:s(3)},l.createElement("div",{style:{display:"flex",flexDirection:"row",cursor:"pointer",color:"#F47738"},onClick:function(){var e,t,l,a,i;return c.push({pathname:"/digit-ui/employee/contracts/create-contract?estimateNumber="+(null==r||null===(e=r.state)||void 0===e?void 0:e.estimateNumber)+"&task="+(null==r||null===(t=r.state)||void 0===t||null===(l=t.estimateDetails[n])||void 0===l?void 0:l.name)+"&subEstimate="+(null==r||null===(a=r.state)||void 0===a||null===(i=a.estimateDetails[n])||void 0===i?void 0:i.estimateDetailNumber),state:{index:n,data:r}})}},l.createElement(t.EditIcon,null)," ",e[3])))})))};function ha(e){var o,r,u,s,d,m,v,E,f,p,g,h,_,S,y,C=e.applicationDetails,T=e.workflowDetails,D=e.isDataLoading,b=e.applicationData,N=e.timelineStatusPrefix,A=e.showTimeLine,O=void 0===A||A,w=e.statusAttribute,L=void 0===w?"status":w,I=e.paymentsList,R=e.isInfoLabel,x=void 0!==R&&R,M=e.noBoxShadow,P=void 0!==M&&M,F=e.sectionHeadStyle,U=void 0!==F&&F,B=a.useTranslation().t,k=n.useState(function(){return{}})[1];function V(e,t,n){var l;window.open(null==n||null===(l=n.fullImage)||void 0===l?void 0:l[0],"_blank")}n.useCallback(function(e){k(function(){return c({},e)})},[]);var H,W=function(e){if(null==e||null==e||""==e)return"NA";var t=new Date(e),n=t.getMonth()+1,l=t.getDate();return(l=(l>9?"":"0")+l)+"/"+(n=(n>9?"":"0")+n)+"/"+t.getFullYear()},j=function(e){if("OPEN"===e.state||"INITIATED"===e.status&&!window.location.href.includes("/obps/")){var t,n={date:W(null==b||null===(t=b.auditDetails)||void 0===t?void 0:t.createdTime),source:(null==b?void 0:b.channel)||""};return l.createElement(ua,{data:n})}if(window.location.href.includes("/obps/")||window.location.href.includes("/noc/")||window.location.href.includes("/ws/")){var a,i,o,r,u,c,s,d,m,v,E,f,p,g,h,_,S,y,C={uuid:null==e||null===(a=e.assignes)||void 0===a||null===(i=a[0])||void 0===i?void 0:i.uuid,fieldName:["connectionHoldersMobileNumber"],model:"WaterConnectionOwner"},T={date:null==e||null===(o=e.auditDetails)||void 0===o?void 0:o.lastModified,name:null==e||null===(r=e.assignes)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.name,mobileNumber:(null==b||null===(c=b.processInstance)||void 0===c||null===(s=c.assignes)||void 0===s||null===(d=s[0])||void 0===d?void 0:d.uuid)===(null==e||null===(m=e.assignes)||void 0===m||null===(v=m[0])||void 0===v?void 0:v.uuid)&&null!=b&&null!==(E=b.processInstance)&&void 0!==E&&null!==(f=E.assignes)&&void 0!==f&&null!==(p=f[0])&&void 0!==p&&p.mobileNumber?null==b||null===(g=b.processInstance)||void 0===g||null===(h=g.assignes)||void 0===h||null===(_=h[0])||void 0===_?void 0:_.mobileNumber:null==e||null===(S=e.assignes)||void 0===S||null===(y=S[0])||void 0===y?void 0:y.mobileNumber,comment:B(null==e?void 0:e.comment),wfComment:e.wfComment,thumbnailsToShow:null==e?void 0:e.thumbnailsToShow};return l.createElement(ua,{data:T,OpenImage:V,privacy:C})}var D,N,A,O,w,L,I,R={date:(null===(D=Digit.DateUtils)||void 0===D?void 0:D.ConvertTimestampToDate(e.auditDetails.lastModifiedEpoch))+" "+(null===(N=Digit.DateUtils)||void 0===N?void 0:N.ConvertEpochToTimeInHours(e.auditDetails.lastModifiedEpoch))+" "+(null===(A=Digit.DateUtils)||void 0===A?void 0:A.getDayfromTimeStamp(e.auditDetails.lastModifiedEpoch)),name:null==e||null===(O=e.assignes)||void 0===O||null===(w=O[0])||void 0===w?void 0:w.name,wfComment:null==e?void 0:e.wfComment,mobileNumber:null==e||null===(L=e.assignes)||void 0===L||null===(I=L[0])||void 0===I?void 0:I.mobileNumber};return l.createElement(ua,{data:R})},z=function(e,t){return e?t?e:B(e):B("NA")},G=window.location.href.includes("employee/tl")||window.location.href.includes("employee/obps")||window.location.href.includes("employee/noc"),Y=window.location.href.includes("employee/noc"),q=window.location.href.includes("employee/obps"),K=window.location.href.includes("employee/ws")||window.location.href.includes("employee/works")||window.location.href.includes("employee/project")||window.location.href.includes("employee/estimate"),X=function(e){return void 0===e&&(e=""),window.location.href.includes("employee/obps")||window.location.href.includes("employee/noc")||G?{justifyContent:"space-between",fontSize:"16px",lineHeight:"19px",color:"#0B0C0C"}:"fieldSurvey"===e?{justifyContent:"space-between",flexDirection:"column"}:{}},Q=function(e){return void 0===e&&(e=""),"fieldSurvey"===e?{width:"100%"}:{}},J=function(e){return null!=e&&e.skip?e.value:null!=e&&e.isUnit?null!=e&&e.value?z(null==e?void 0:e.value,null==e?void 0:e.isNotTranslated)+" "+B(null==e?void 0:e.isUnit):B("N/A"):"Approved"===(null==e?void 0:e.value)?l.createElement("span",{style:{color:"#0B6623"}},""+z(null==e?void 0:e.value,null==e?void 0:e.isNotTranslated)):"Rejected"===(null==e?void 0:e.value)?l.createElement("span",{style:{color:"#FF0000"}},B(null==e?void 0:e.value)):null!=e&&e.value?z(null==e?void 0:e.value,null==e?void 0:e.isNotTranslated):B("N/A")};return l.createElement(t.CollapseAndExpandGroups,{groupElements:null==C||null===(o=C.CollapseConfig)||void 0===o?void 0:o.collapseAll,groupHeader:null==C||null===(r=C.CollapseConfig)||void 0===r?void 0:r.groupHeader,headerLabel:null==C||null===(u=C.CollapseConfig)||void 0===u?void 0:u.headerLabel,headerValue:null==C||null===(s=C.CollapseConfig)||void 0===s?void 0:s.headerValue},l.createElement(t.Card,{style:(H={position:"relative"},P&&(H=c({},H,{boxShadow:"none"})),H),className:"employeeCard-override"},x?l.createElement(fa,{t:B,userType:!1,infoBannerLabel:"CS_FILE_APPLICATION_INFO_LABEL",infoClickLable:"WS_CLICK_ON_LABEL",infoClickInfoLabel:window.location.href.includes("disconnection")||window.location.href.includes("application")?"WS_DISCONNECTION_CLICK_ON_INFO_LABEL":"WS_CLICK_ON_INFO_LABEL",infoClickInfoLabel1:window.location.href.includes("disconnection")||window.location.href.includes("application")?"WS_DISCONNECTION_CLICK_ON_INFO1_LABEL":""}):null,null==C||null===(d=C.applicationDetails)||void 0===d?void 0:d.map(function(e,a){var o,r,u,c,s,d,m,v,E,f,p,g,h,_,S,y,D,b,N,A,O,w,L,R,x,M,P,F,k,V,H,W,j,z,Z,$,ee,te,ne,le,ae,ie,oe,re,ue,ce,se,de,me,ve,Ee;return l.createElement(t.CollapseAndExpandGroups,{groupElements:null==e||null===(o=e.expandAndCollapse)||void 0===o?void 0:o.groupComponents,groupHeader:null==e||null===(r=e.expandAndCollapse)||void 0===r?void 0:r.groupHeader,headerLabel:null==e||null===(u=e.expandAndCollapse)||void 0===u?void 0:u.headerLabel,headerValue:null==e||null===(c=e.expandAndCollapse)||void 0===c?void 0:c.headerValue,customClass:null==e||null===(s=e.expandAndCollapse)||void 0===s?void 0:s.customClass},l.createElement(l.Fragment,{key:a},l.createElement("div",{style:window.location.href.includes("employee/obps")||window.location.href.includes("employee/noc")||window.location.href.includes("employee/ws")||window.location.href.includes("employee/works")||window.location.href.includes("employee/contracts")?{lineHeight:"19px",maxWidth:"950px",minWidth:"280px"}:G?{lineHeight:"19px",maxWidth:"600px",minWidth:"280px"}:{}},0!==a||e.asSectionHeader?l.createElement(l.Fragment,null,l.createElement(t.CardSectionHeader,{style:0==a&&G?{marginBottom:"16px",fontSize:"24px"}:U||{marginBottom:"16px",marginTop:"32px",fontSize:"24px"}},Y?""+B(e.title):B(e.title),null!=e&&e.Component?l.createElement(e.Component,null):null)):l.createElement(t.CardSubHeader,{style:{marginBottom:"16px",fontSize:"24px"}},B(e.title)),(null==e?void 0:e.isTable)&&l.createElement(ga,{data:e}),l.createElement(t.StatusTable,{style:window.location.href.includes("employee/obps")||window.location.href.includes("employee/noc")||G?{position:"relative",marginTop:"19px"}:{}},(null==e?void 0:e.title)&&!(null!=e&&e.title.includes("NOC"))&&(null==e||null===(d=e.values)||void 0===d?void 0:d.map(function(n,a){var o,r,u;return l.createElement(t.Row,!0===n.map&&"N/A"!==n.value?{key:B(n.title),label:B(n.title),text:l.createElement("img",{src:B(n.value),alt:"",privacy:null==n?void 0:n.privacy})}:1==(null==n?void 0:n.isLink)?{key:B(n.title),label:window.location.href.includes("tl")||window.location.href.includes("ws")?l.createElement("div",{style:{width:"200%"}},l.createElement(i.Link,{to:null==n?void 0:n.to},l.createElement("span",{className:"link",style:{color:"#F47738"}},B(null==n?void 0:n.title)))):Y||q?""+B(n.title):B(n.title),text:l.createElement("div",null,l.createElement(i.Link,{to:null==n?void 0:n.to},l.createElement("span",{className:"link",style:{color:"#F47738"}},null==n?void 0:n.value))),last:a===(null==e||null===(r=e.values)||void 0===r?void 0:r.length)-1,caption:n.caption,className:"border-none",rowContainerStyle:X()}:{key:B(n.title),label:K?B(n.title)+":":B(n.title),text:null!=n&&n.isImages?l.createElement(t.ViewImages,{fileStoreIds:null==n?void 0:n.fileStoreIds,tenantId:null==n?void 0:n.tenant,onClick:function(){}}):J(n),last:a===(null==e||null===(o=e.values)||void 0===o?void 0:o.length)-1,caption:n.caption,className:"border-none",privacy:null==n?void 0:n.privacy,rowContainerStyle:X(null==e?void 0:e.tab),textStyle:(u=null==e?void 0:e.tab,void 0===u&&(u=""),"fieldSurvey"===u?{marginTop:"1rem",marginBottom:"1rem"}:{}),labelStyle:Q(null==e?void 0:e.tab)})})))),null!=e&&null!==(m=e.additionalDetails)&&void 0!==m&&m.table?(null==e||null===(v=e.additionalDetails)||void 0===v||null===(E=v.table)||void 0===E||null===(f=E.weekTable)||void 0===f?void 0:f.tableHeader)&&l.createElement(n.Fragment,null,l.createElement(t.CardSectionHeader,{style:{marginBottom:"16px",marginTop:"32px",fontSize:"24px"}},B(null==e||null===(p=e.additionalDetails)||void 0===p||null===(g=p.table)||void 0===g||null===(h=g.weekTable)||void 0===h?void 0:h.tableHeader))):null,(null==e||null===(_=e.additionalDetails)||void 0===_?void 0:_.inspectionReport)&&l.createElement(ia,{scrutinyDetails:null==e?void 0:e.additionalDetails,paymentsList:I}),(null==C||null===(S=C.applicationData)||void 0===S||null===(y=S.additionalDetails)||void 0===y||null===(D=y.fieldinspection_pending)||void 0===D?void 0:D.length)>0&&(null==e||null===(b=e.additionalDetails)||void 0===b?void 0:b.fiReport)&&l.createElement(Jl,{fiReport:null==C||null===(N=C.applicationData)||void 0===N||null===(A=N.additionalDetails)||void 0===A?void 0:A.fieldinspection_pending}),(null==e||null===(O=e.additionalDetails)||void 0===O?void 0:O.floors)&&l.createElement(la,{floors:null==e||null===(w=e.additionalDetails)||void 0===w?void 0:w.floors}),(null==e||null===(L=e.additionalDetails)||void 0===L?void 0:L.owners)&&l.createElement(aa,{owners:null==e||null===(R=e.additionalDetails)||void 0===R?void 0:R.owners}),(null==e||null===(x=e.additionalDetails)||void 0===x?void 0:x.units)&&l.createElement(sa,{units:null==e||null===(M=e.additionalDetails)||void 0===M?void 0:M.units}),(null==e||null===(P=e.additionalDetails)||void 0===P?void 0:P.accessories)&&l.createElement(ca,{units:null==e||null===(F=e.additionalDetails)||void 0===F?void 0:F.accessories}),(null==e||null===(k=e.additionalDetails)||void 0===k?void 0:k.permissions)&&(null==T||null===(V=T.data)||void 0===V||null===(H=V.nextActions)||void 0===H?void 0:H.length)>0&&l.createElement(ea,{applicationData:null==C?void 0:C.applicationData,t:B,permissions:null==e||null===(W=e.additionalDetails)||void 0===W?void 0:W.permissions}),(null==e||null===(j=e.additionalDetails)||void 0===j?void 0:j.obpsDocuments)&&l.createElement(Xl,{t:B,applicationData:null==C?void 0:C.applicationData,docs:e.additionalDetails.obpsDocuments,bpaActionsDetails:T}),(null==e||null===(z=e.additionalDetails)||void 0===z?void 0:z.noc)&&l.createElement($l,{t:B,isNoc:!0,NOCdata:e.values,applicationData:null==C?void 0:C.applicationData,docs:e.additionalDetails.noc,noc:null===(Z=e.additionalDetails)||void 0===Z?void 0:Z.data,bpaActionsDetails:T}),(null==e||null===($=e.additionalDetails)||void 0===$?void 0:$.scruntinyDetails)&&l.createElement(ia,{scrutinyDetails:null==e?void 0:e.additionalDetails}),(null==e||null===(ee=e.additionalDetails)||void 0===ee?void 0:ee.buildingExtractionDetails)&&l.createElement(ia,{scrutinyDetails:null==e?void 0:e.additionalDetails}),(null==e||null===(te=e.additionalDetails)||void 0===te?void 0:te.subOccupancyTableDetails)&&l.createElement(oa,{edcrDetails:null==e?void 0:e.additionalDetails,applicationData:null==C?void 0:C.applicationData}),(null==e||null===(ne=e.additionalDetails)||void 0===ne?void 0:ne.documentsWithUrl)&&l.createElement(Kl,{documents:null==e||null===(le=e.additionalDetails)||void 0===le?void 0:le.documentsWithUrl}),(null==e||null===(ae=e.additionalDetails)||void 0===ae?void 0:ae.documents)&&l.createElement(ta,{documents:null==e||null===(ie=e.additionalDetails)||void 0===ie?void 0:ie.documents}),(null==e||null===(oe=e.additionalDetails)||void 0===oe?void 0:oe.taxHeadEstimatesCalculation)&&l.createElement(na,{taxHeadEstimatesCalculation:null==e||null===(re=e.additionalDetails)||void 0===re?void 0:re.taxHeadEstimatesCalculation}),(null==e||null===(ue=e.additionalDetails)||void 0===ue?void 0:ue.redirectUrl)&&l.createElement("div",{style:{fontSize:"16px",lineHeight:"24px",fontWeight:"400",padding:"10px 0px"}},l.createElement(i.Link,{to:null==e||null===(ce=e.additionalDetails)||void 0===ce||null===(se=ce.redirectUrl)||void 0===se?void 0:se.url},l.createElement("span",{className:"link",style:{color:"#F47738"}},null==e||null===(de=e.additionalDetails)||void 0===de||null===(me=de.redirectUrl)||void 0===me?void 0:me.title))),(null==e||null===(ve=e.additionalDetails)||void 0===ve?void 0:ve.estimationDetails)&&l.createElement(va,{wsAdditionalDetails:e,workflowDetails:T}),(null==e||null===(Ee=e.additionalDetails)||void 0===Ee?void 0:Ee.estimationDetails)&&l.createElement(pa,{wsAdditionalDetails:e,workflowDetails:T})))}),O&&(null==T||null===(m=T.data)||void 0===m||null===(v=m.timeline)||void 0===v?void 0:v.length)>0&&l.createElement(l.Fragment,null,void 0===(null==T?void 0:T.breakLineRequired)||null!=T&&T.breakLineRequired?l.createElement(t.BreakLine,null):null,((null==T?void 0:T.isLoading)||D)&&l.createElement(t.Loader,null),!(null!=T&&T.isLoading)&&!D&&l.createElement(n.Fragment,null,l.createElement(t.CardSectionHeader,{style:{marginBottom:"16px",marginTop:"32px"}},B("WORKS_WORKFLOW_HISTORY")),null!=T&&null!==(E=T.data)&&void 0!==E&&E.timeline&&1===(null==T||null===(f=T.data)||void 0===f||null===(p=f.timeline)||void 0===p?void 0:p.length)?l.createElement(t.CheckPoint,{isCompleted:!0,label:B(""+N+(null==T||null===(g=T.data)||void 0===g||null===(h=g.timeline[0])||void 0===h?void 0:h.state)),customChild:j(null==T||null===(_=T.data)||void 0===_?void 0:_.timeline[0])}):l.createElement(t.ConnectingCheckPoints,null,(null==T||null===(S=T.data)||void 0===S?void 0:S.timeline)&&(null==T||null===(y=T.data)||void 0===y?void 0:y.timeline.map(function(e,n,a){return l.createElement(l.Fragment,{key:n},l.createElement(t.CheckPoint,{keyValue:n,isCompleted:0===n,info:e.comment,label:B(""+N+("EDIT"===(null==e?void 0:e.performedAction)?(null==e?void 0:e.performedAction)+"_ACTION":null==e?void 0:e[L])),customChild:j(e)}))})))))))}function _a(e){var n,a,i,o,r,u,c,s,d,m,v,E,f,p,g,h,_,S,y=e.t,C=e.showToast,T=e.closeToast,D=e.businessService;if(null!=D&&D.includes("NewTL")||null!=D&&D.includes("TL")||null!=D&&D.includes("EDITRENEWAL")){var b,N="";switch(null==C||null===(b=C.action)||void 0===b?void 0:b.action){case"SENDBACK":N="error"===(null==C?void 0:C.key)?null==C||null===(n=C.error)||void 0===n?void 0:n.message:y("TL_SENDBACK_CHECKLIST_MESSAGE_HEAD");break;case"FORWARD":N="error"===(null==C?void 0:C.key)?null==C||null===(a=C.error)||void 0===a?void 0:a.message:y("TL_FORWARD_SUCCESS_MESSAGE_MAIN");break;case"APPROVE":N="error"===(null==C?void 0:C.key)?null==C||null===(i=C.error)||void 0===i?void 0:i.message:y("TL_APPROVAL_CHECKLIST_MESSAGE_HEAD");break;case"SENDBACKTOCITIZEN":N="error"===(null==C?void 0:C.key)?null==C||null===(o=C.error)||void 0===o?void 0:o.message:y("TL_SENDBACK_TOCITIZEN_CHECKLIST_MESSAGE_HEAD");break;case"REJECT":N="error"===(null==C?void 0:C.key)?null==C||null===(r=C.error)||void 0===r?void 0:r.message:y("TL_APPROVAL_REJ_MESSAGE_HEAD");break;case"RESUBMIT":N="error"===(null==C?void 0:C.key)?null==C||null===(u=C.error)||void 0===u?void 0:u.message:y("TL_APPLICATION_RESUBMIT_SUCCESS_MESSAGE_MAIN");break;case"CANCEL":N="error"===(null==C?void 0:C.key)?null==C||null===(c=C.error)||void 0===c?void 0:c.message:y("TL_TL_CANCELLED_MESSAGE_HEAD");break;default:N="error"===(null==C?void 0:C.key)?null==C||null===(s=C.error)||void 0===s?void 0:s.message:y("ES_"+D+"_"+(null==C||null===(d=C.action)||void 0===d?void 0:d.action)+"_UPDATE_SUCCESS")}return l.createElement(l.Fragment,null,C&&l.createElement(t.Toast,{error:"error"===C.key,label:N,onClose:T}))}if(null!=D&&D.includes("BPA")||null!=D&&D.includes("BPA_LOW")||null!=D&&D.includes("BPA_OC")){var A,O=function(e){var t;return void 0===e&&(e=[]),2==(null===(t=e)||void 0===t?void 0:t.length)&&null!=D&&D.includes("BPA_OC")?y(e[1]):y(e[0])},w="";switch(null==C||null===(A=C.action)||void 0===A?void 0:A.action){case"REVOCATE":w="error"===(null==C?void 0:C.key)?null==C||null===(m=C.error)||void 0===m?void 0:m.message:O(["BPA_APPROVAL_REVOCATED_MESSAGE_HEAD","BPA_APPROVAL_OC_REVOCATED_MESSAGE_HEAD"]);break;case"VERIFY_AND_FORWARD":w="error"===(null==C?void 0:C.key)?null==C||null===(v=C.error)||void 0===v?void 0:v.message:O(["BPA_FORWARD_SUCCESS_MESSAGE_MAIN"]);break;case"SEND_BACK_TO_CITIZEN":w="error"===(null==C?void 0:C.key)?null==C||null===(E=C.error)||void 0===E?void 0:E.message:O(["BPA_SENDBACK_SUCCESS_MESSAGE_MAIN"]);break;case"APPROVE":w="error"===(null==C?void 0:C.key)?null==C||null===(f=C.error)||void 0===f?void 0:f.message:O(["BPA_APPROVAL_CHECKLIST_MESSAGE_HEAD"]);break;case"REJECT":w="error"===(null==C?void 0:C.key)?null==C||null===(p=C.error)||void 0===p?void 0:p.message:O(["BPA_APPROVAL_REJECTED_MESSAGE_HEAD","BPA_OC_APPROVAL_REJECTED_MESSAGE_HEAD"]);break;case"FORWARD":w="error"===(null==C?void 0:C.key)?null==C||null===(g=C.error)||void 0===g?void 0:g.message:O(["BPA_FORWARD_SUCCESS_MESSAGE_MAIN"]);break;case"SEND_BACK_FOR_DOCUMENT_VERIFICATION":case"SEND_BACK_FOR_FIELD_INSPECTION":w="error"===(null==C?void 0:C.key)?null==C||null===(h=C.error)||void 0===h?void 0:h.message:O(["BPA_SENDBACK_SUCCESS_MESSAGE_MAIN"]);break;default:w="error"===(null==C?void 0:C.key)?null==C||null===(_=C.error)||void 0===_?void 0:_.message:y("ES_"+D+"_"+(null==C||null===(S=C.action)||void 0===S?void 0:S.action)+"_UPDATE_SUCCESS")}return l.createElement(l.Fragment,null,C&&l.createElement(t.Toast,{error:"error"===C.key,label:w,onClose:T}))}var L,I,R="error"===(null==C?void 0:C.key)?null==C||null===(L=C.error)||void 0===L?void 0:L.message:"ES_"+D+"_"+(null==C||null===(I=C.action)||void 0===I?void 0:I.action)+"_UPDATE_SUCCESS";return l.createElement(l.Fragment,null,C&&l.createElement(t.Toast,{error:"error"===C.key,label:y(R),onClose:T}))}function Sa(e){var i,o,r,u,s,d,m,v,E,f,p,g,h,_,S,y,C,T,D,b,N,A,O,w=e.workflowDetails,L=e.displayMenu,I=e.onActionSelect,R=e.setDisplayMenu,x=e.businessService,M=e.forcedActionPrefix,P=e.ActionBarStyle,F=void 0===P?{}:P,U=e.MenuStyle,B=void 0===U?{}:U,k=e.saveAttendanceState,V=a.useTranslation().t,H=Digit.UserService.getUser(),W=n.useRef();if(window.location.href.includes("/obps")||window.location.href.includes("/noc")){var j=sessionStorage.getItem("Digit.citizen.userRequestObject"),z=j?JSON.parse(j):{};H=null==z?void 0:z.value}var G=null===(i=H)||void 0===i||null===(o=i.info)||void 0===o||null===(r=o.roles)||void 0===r?void 0:r.map(function(e){return e.code}),Y=!1,q=!1,K=(null==w||null===(u=w.data)||void 0===u||null===(s=u.actionState)||void 0===s||null===(d=s.nextActions)||void 0===d?void 0:d.filter(function(e){return G.some(function(t){var n;return null===(n=e.roles)||void 0===n?void 0:n.includes(t)})||!e.roles}))||(null==w||null===(m=w.data)||void 0===m||null===(v=m.nextActions)||void 0===v?void 0:v.filter(function(e){return G.some(function(t){var n;return null===(n=e.roles)||void 0===n?void 0:n.includes(t)})||!e.roles}));return Digit.Hooks.useClickOutside(W,function(){R(!1)},L),(window.location.href.includes("/obps")||window.location.href.includes("/noc"))&&1==(null===(E=K)||void 0===E?void 0:E.length)||null!==(f=K)&&void 0!==f&&null!==(p=f[0])&&void 0!==p&&null!==(g=p.redirectionUrl)&&void 0!==g&&g.pathname.includes("/pt/property-details/")&&1==(null===(h=K)||void 0===h?void 0:h.length)?(q=!1,Y=!0):(null===(_=K)||void 0===_?void 0:_.length)>0&&(q=!0,Y=!1),null!=k&&k.displaySave&&(q=!1,Y=!0,K=[{action:"SAVE",state:"UPDATED"}]),l.createElement(l.Fragment,null,!(null!=w&&w.isLoading)&&q&&!Y&&l.createElement(t.ActionBar,{style:c({},F)},L&&(null!=w&&null!==(S=w.data)&&void 0!==S&&null!==(y=S.actionState)&&void 0!==y&&y.nextActions||null!=w&&null!==(C=w.data)&&void 0!==C&&C.nextActions)?l.createElement(t.Menu,{localeKeyPrefix:M||"WORKS_"+(null==x?void 0:x.toUpperCase()),options:K,optionKey:"action",t:V,onSelect:I,style:B}):null,l.createElement(t.SubmitBar,{ref:W,label:V("WORKS_ACTIONS"),onSubmit:function(){return R(!L)}})),!(null!=w&&w.isLoading)&&!q&&Y&&l.createElement(t.ActionBar,{style:c({},F)},l.createElement("button",{style:{color:"#FFFFFF",fontSize:"18px"},className:"submit-bar",name:null===(T=K)||void 0===T||null===(D=T[0])||void 0===D?void 0:D.action,value:null===(b=K)||void 0===b||null===(N=b[0])||void 0===N?void 0:N.action,onClick:function(e){var t;I((null===(t=K)||void 0===t?void 0:t[0])||{})}},V((M||"WF_EMPLOYEE_"+(null==x?void 0:x.toUpperCase()))+"_"+(null===(A=K)||void 0===A||null===(O=A[0])||void 0===O?void 0:O.action)))))}var ya=function(){return l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},Ca=function(e){return l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(ya,null))};function Ta(e){var n=e.action,i=e.closeWarningPopup,o=a.useTranslation().t,r=window.Digit.Utils.browser.isMobile();return l.createElement(l.Fragment,null,l.createElement(t.Modal,{headerBarMain:l.createElement("h1",{className:"heading-m"},o("PT_DUES_ARE_PENDING")),headerBarEnd:l.createElement(Ca,{onClick:function(){i()}}),hideSubmit:!0,isDisabled:!1,popupStyles:r?{}:{width:"29%",marginTop:"auto"}},l.createElement(t.Card,null,l.createElement("div",{style:{marginBottom:"30px"}},l.createElement("h1",null,o("PT_YOU_HAVE")," ₹",null==n?void 0:n.AmountDueForPay," ",o("PT_DUE_WARNING_MSG2"))),l.createElement(t.Row,{rowContainerStyle:{display:"flex"},labelStyle:{fontSize:"24px",fontWeight:"700",marginRight:"10%"},textStyle:{fontSize:"24px",fontWeight:"700",marginBottom:"20px"},label:""+o("PT_AMOUNT_DUE"),text:"₹"+o(null==n?void 0:n.AmountDueForPay)}),l.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},l.createElement(t.ButtonSelector,{theme:"border",label:o("ES_PT_COMMON_CANCEL"),onSubmit:i,style:{marginLeft:"10px"}}),l.createElement(t.ButtonSelector,{label:o("PT_COLLECT"),onSubmit:function(){var e;return window.location.assign(""+window.location.origin+(null==n||null===(e=n.redirectionUrl)||void 0===e?void 0:e.pathname))},style:{marginLeft:"10px"}})))),")")}var Da=function(e){var o,u=Digit.ULBService.getCurrentTenantId(),s=Digit.ULBService.getStateId(),d=a.useTranslation().t,m=i.useHistory(),v=i.useParams().id,E=n.useState(!1),f=E[0],p=E[1],g=n.useState(null),h=g[0],_=g[1],S=n.useState(!1),y=S[0],C=S[1],T=n.useState(!1),D=T[0],b=T[1],N=n.useState(!1),A=N[0],O=N[1],w=n.useState(!1),L=w[0],I=w[1],R=n.useState({displaySave:!1,updatePayload:[]}),x=R[0],M=R[1],P=e.applicationDetails,F=e.showToast,U=e.setShowToast,B=e.isLoading,k=e.isDataLoading,V=e.applicationData,H=e.mutate,W=e.workflowDetails,j=e.businessService,z=e.closeToast,G=e.moduleCode,Y=e.timelineStatusPrefix,q=e.forcedActionPrefix,K=e.statusAttribute,X=e.ActionBarStyle,Q=e.MenuStyle,J=e.paymentsList,Z=e.showTimeLine,$=void 0===Z||Z,ee=e.oldValue,te=e.isInfoLabel,ne=void 0!==te&&te,le=e.clearDataDetails,ae=e.noBoxShadow,ie=e.sectionHeadStyle,oe=e.showActionBar,re=void 0===oe||oe;n.useEffect(function(){F&&W.revalidate()},[F]);var ue=r.useQueryClient(),ce=function(){_(null),C(!1)},se=function(e,t){return null!=e&&e.includes("CHECK")?d("WORKS_LOI_RESPONSE_MESSAGE_CHECK",{loiNumber:null==t?void 0:t.letterOfIndentNumber,name:"Nipun",designation:"SE"}):null!=e&&e.includes("APPROVE")?d("WORKS_LOI_RESPONSE_MESSAGE_APPROVE",{loiNumber:null==t?void 0:t.letterOfIndentNumber}):null!=e&&e.includes("REJECT")?d("WORKS_LOI_RESPONSE_MESSAGE_REJECT",{loiNumber:null==t?void 0:t.letterOfIndentNumber}):void 0},de=function(e){return null!=e&&e.includes("CHECK")||null!=e&&e.includes("TECHNICALSANCATION")?d("WORKS_ESTIMATE_RESPONSE_FORWARD_HEADER"):null!=e&&e.includes("ADMINSANCTION")?d("WORKS_ESTIMATE_RESPONSE_APPROVE_HEADER"):null!=e&&e.includes("REJECT")?d("WORKS_ESTIMATE_RESPONSE_REJECT_HEADER"):void 0},me=function(e,t){return null!=e&&e.includes("CHECK")||null!=e&&e.includes("TECHNICALSANCATION")?d("WORKS_ESTIMATE_RESPONSE_MESSAGE_CHECK",{estimateNumber:null==t?void 0:t.estimateNumber,Name:"Super",Designation:"SE",Department:"Health"}):null!=e&&e.includes("ADMINSANCTION")?d("WORKS_ESTIMATE_RESPONSE_MESSAGE_APPROVE",{estimateNumber:null==t?void 0:t.estimateNumber}):null!=e&&e.includes("REJECT")?d("WORKS_ESTIMATE_RESPONSE_MESSAGE_REJECT",{estimateNumber:null==t?void 0:t.estimateNumber}):void 0};return B||D?l.createElement(t.Loader,null):l.createElement(l.Fragment,null,B?l.createElement(t.Loader,null):l.createElement(l.Fragment,null,l.createElement(ha,{applicationDetails:P,workflowDetails:W,isDataLoading:k,applicationData:V,businessService:j,timelineStatusPrefix:Y,statusAttribute:K,paymentsList:J,showTimeLine:$,oldValue:ee,isInfoLabel:ne,noBoxShadow:ae,sectionHeadStyle:ie,modify:L,setSaveAttendanceState:M}),y?l.createElement(ql,{t:d,action:h,tenantId:u,state:s,id:v,applicationDetails:P,applicationData:null==P?void 0:P.applicationData,closeModal:ce,submitAction:function(e,t,n){void 0===n&&(n={});try{var l,a=null==e||null===(l=e.workflow)||void 0===l?void 0:l.action;return b(!0),H&&(b(!0),H(e,{onError:function(e,t){b(!1),U({key:"error",error:e}),setTimeout(z,5e3)},onSuccess:function(e,t){var l,i,o,r,u,c,s,v,E,f,p;if(b(!1),null!=e&&null!==(l=e.letterOfIndents)&&void 0!==l&&l[0]){var g,_=null==e||null===(g=e.letterOfIndents)||void 0===g?void 0:g[0],S={header:(v=a,null!=v&&v.includes("CHECK")?d("WORKS_LOI_RESPONSE_FORWARD_HEADER"):null!=v&&v.includes("APPROVE")?d("WORKS_LOI_RESPONSE_APPROVE_HEADER"):null!=v&&v.includes("REJECT")?d("WORKS_LOI_RESPONSE_REJECT_HEADER"):void 0),id:null==_?void 0:_.letterOfIndentNumber,info:d("WORKS_LOI_ID"),message:se(a,_),links:[{name:d("WORKS_CREATE_NEW_LOI"),redirectUrl:"/"+window.contextPath+"/employee/works/create-loi",code:"",svg:"CreateEstimateIcon",isVisible:!1,type:"add"},{name:d("WORKS_GOTO_LOI_INBOX"),redirectUrl:"/"+window.contextPath+"/employee/works/LOIInbox",code:"",svg:"CreateEstimateIcon",isVisible:!0,type:"inbox"}],responseData:e,requestData:t};m.push("/"+window.contextPath+"/employee/works/response",S)}if(null!=e&&null!==(i=e.estimates)&&void 0!==i&&i[0]){var y,C=null==e||null===(y=e.estimates)||void 0===y?void 0:y[0],T={header:de(a),id:null==C?void 0:C.estimateNumber,info:d("WORKS_ESTIMATE_ID"),message:me(a,C),links:[{name:d("WORKS_CREATE_ESTIMATE"),redirectUrl:"/"+window.contextPath+"/employee/works/create-estimate",code:"",svg:"CreateEstimateIcon",isVisible:!1,type:"add"},{name:d("WORKS_GOTO_ESTIMATE_INBOX"),redirectUrl:"/"+window.contextPath+"/employee/works/inbox",code:"",svg:"RefreshIcon",isVisible:!0,type:"inbox"}],responseData:e,requestData:t};m.push("/"+window.contextPath+"/employee/works/response",T)}if(null!==(o=n)&&void 0!==o&&o.bpa&&(e.selectedAction=h,m.replace("/"+(null===(E=window)||void 0===E?void 0:E.contextPath)+"/employee/obps/response",{data:e})),null!==(r=n)&&void 0!==r&&r.isStakeholder&&(e.selectedAction=h,m.push("/"+(null===(f=window)||void 0===f?void 0:f.contextPath)+"/employee/obps/stakeholder-response",{data:e})),null!==(u=n)&&void 0!==u&&u.isNoc&&m.push("/"+(null===(p=window)||void 0===p?void 0:p.contextPath)+"/employee/noc/response",{data:e}),(null==e||null===(c=e.Amendments)||void 0===c?void 0:c.length)>0){var D,N,A,O,w,L,I,R;null!=t&&null!==(D=t.AmendmentUpdate)&&void 0!==D&&null!==(N=D.workflow)&&void 0!==N&&N.action.includes("SEND_BACK")?U({key:"success",label:d("ES_MODIFYSWCONNECTION_SEND_BACK_UPDATE_SUCCESS")}):null!=t&&null!==(A=t.AmendmentUpdate)&&void 0!==A&&null!==(O=A.workflow)&&void 0!==O&&O.action.includes("RE-SUBMIT")?U({key:"success",label:d("ES_MODIFYSWCONNECTION_RE_SUBMIT_UPDATE_SUCCESS")}):null!=t&&null!==(w=t.AmendmentUpdate)&&void 0!==w&&null!==(L=w.workflow)&&void 0!==L&&L.action.includes("APPROVE")?U({key:"success",label:d("ES_MODIFYSWCONNECTION_APPROVE_UPDATE_SUCCESS")}):null!=t&&null!==(I=t.AmendmentUpdate)&&void 0!==I&&null!==(R=I.workflow)&&void 0!==R&&R.action.includes("REJECT")&&U({key:"success",label:d("ES_MODIFYWSCONNECTION_REJECT_UPDATE_SUCCESS")})}else{if(null!=e&&null!==(s=e.musterRolls)&&void 0!==s&&s[0]){var x,M=null==e||null===(x=e.musterRolls)||void 0===x?void 0:x[0],P=function(e){var t={};return null!=e&&e.includes("VERIFY")?(t.header=d("ATM_ATTENDANCE_VERIFIED"),t.message=d("ATM_ATTENDANCE_VERIFIED_SUCCESS")):null!=e&&e.includes("REJECT")?(t.header=d("ATM_ATTENDANCE_REJECTED"),t.message=d("ATM_ATTENDANCE_REJECTED_SUCCESS")):null!=e&&e.includes("APPROVE")&&(t.header=d("ATM_ATTENDANCE_APPROVED"),t.message=d("ATM_ATTENDANCE_APPROVED_SUCCESS")),t}(a),F={header:null==P?void 0:P.header,message:null==P?void 0:P.message,info:d("ATM_REGISTER_ID_WEEK"),id:M.registerId+" | "+Ae(new Date(M.startDate),"dd/MM/yyyy")+" - "+Ae(new Date(M.endDate),"dd/MM/yyyy")};m.push("/"+window.contextPath+"/employee/attendencemgmt/response",F)}U({key:"success",action:h}),le&&setTimeout(le,3e3),setTimeout(z,5e3),ue.clear(),ue.refetchQueries("APPLICATION_SEARCH")}}})),ce(),Promise.resolve()}catch(e){return Promise.reject(e)}},actionData:null==W||null===(o=W.data)||void 0===o?void 0:o.timeline,businessService:j,workflowDetails:W,moduleCode:G,saveAttendanceState:x}):null,A?l.createElement(Ta,{action:h,workflowDetails:W,businessService:j,isWarningPop:A,closeWarningPopup:function(){O(!1)}}):null,l.createElement(_a,{t:d,showToast:F,closeToast:z,businessService:j}),re&&l.createElement(Sa,{workflowDetails:W,displayMenu:f,onActionSelect:function(e){if(e)if(null!=e&&e.isToast)U({key:"error",error:{message:null==e?void 0:e.toastMessage}}),setTimeout(z,5e3);else if(null!=e&&e.isWarningPopUp)O(!0);else if(null!=e&&e.redirectionUrll){var t,n,l,a,i,o;"EDIT_LOI_APPLICATION"===(null==e||null===(t=e.redirectionUrll)||void 0===t?void 0:t.action)&&m.push(""+(null==e||null===(l=e.redirectionUrll)||void 0===l?void 0:l.pathname),{data:null==e||null===(a=e.redirectionUrll)||void 0===a?void 0:a.state}),"EDIT_ESTIMATE_APPLICATION"===(null==e||null===(n=e.redirectionUrll)||void 0===n?void 0:n.action)&&m.push(""+(null==e||null===(i=e.redirectionUrll)||void 0===i?void 0:i.pathname),{data:null==e||null===(o=e.redirectionUrll)||void 0===o?void 0:o.state})}else if(null!=e&&e.redirectionUrl){var r,u;m.push({pathname:null===(r=e.redirectionUrl)||void 0===r?void 0:r.pathname,state:c({},null===(u=e.redirectionUrl)||void 0===u?void 0:u.state)})}else"EDIT"===(null==e?void 0:e.action)?I(!0):C(!0);_(e),p(!1)},setDisplayMenu:p,businessService:j,forcedActionPrefix:q,ActionBarStyle:X,MenuStyle:Q,saveAttendanceState:x})))},ba=function(e){return l.createElement("h1",{className:"heading-m"},""+(0,e.t)(e.heading))},Na=function(){return l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},Aa=function(e){return l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(Na,null))},Oa=function(e){var t=e.title;return l.createElement("div",{className:"confirmation_box"},l.createElement("span",null," ",(0,e.t)("CONFIRM_DELETE_MSG")+" "," ",l.createElement("b",null," "+t)," "))},wa=function(e){var n=e.t,a=e.docName,i=e.closeModal,o=e.actionCancelLabel,r=e.actionCancelOnSubmit,u=e.actionSaveLabel,c=e.actionSaveOnSubmit;return l.createElement(t.Modal,{headerBarMain:l.createElement(ba,{t:n,heading:e.heading}),headerBarEnd:l.createElement(Aa,{onClick:i}),actionCancelLabel:n(o),actionCancelOnSubmit:r,actionSaveLabel:n(u),actionSaveOnSubmit:c,formId:"modal-action"},l.createElement(Oa,{t:n,title:a}))},La=["uploadedFilesData"],Ia=["EDIT","DELETE"],Ra=function(){var e,o,r,u,d,m,v,E,f,p,g,h,_,S,y,T,D,b,N=window.Digit.Utils.browser.isMobile(),A=i.useParams().id,O=a.useTranslation().t,w=i.useHistory(),L=n.useState(!1),I=L[0],R=L[1],x=n.useState(!1),M=x[0],P=x[1],F=Digit.ULBService.getCurrentTenantId(),U=Digit.Hooks.events.useEventDetails(F,{ids:A},{}),B=U.isLoading,k=U.data,V=Digit.Hooks.useSessionStorage("EMPLOYEE_MSG_MUTATION_HAPPENED",!1)[1],H=Digit.Hooks.useSessionStorage("EMPLOYEE_MSG_ERROR_DATA",!1)[2],W=Digit.Hooks.useSessionStorage("EMPLOYEE_MSG_MUTATION_SUCCESS_DATA",!1)[2];return n.useEffect(function(){V(!1),W(),H()},[]),B?l.createElement(t.Loader,null):l.createElement("div",null,I?l.createElement(wa,{t:O,heading:"CONFIRM_DELETE_PUB_BRCST",docName:null==k||null===(e=k.applicationData)||void 0===e?void 0:e.name,closeModal:function(){return R(!I)},actionCancelLabel:"CS_COMMON_CANCEL",actionCancelOnSubmit:function(){R(!1)},actionSaveLabel:"ES_COMMON_Y_DEL",actionSaveOnSubmit:function(){var e,t={events:[c({},s(null==k?void 0:k.applicationData,La),{status:"CANCELLED"})]};w.push("/"+(null===(e=window)||void 0===e?void 0:e.contextPath)+"/employee/engagement/messages/response?delete=true",t)}}):null,l.createElement(t.Header,null,O("CS_HEADER_PUBLIC_BRDCST")),l.createElement("div",{className:"notice_and_circular_main gap-ten"},l.createElement("div",{className:"documentDetails_wrapper"},l.createElement("div",{className:"documentDetails_row_items"},l.createElement("p",{className:"documentDetails_title"},O("EVENTS_ULB_LABEL")+":")," ",l.createElement("p",null,function(e){var t,n,l,a=null==e?void 0:e.split(".")[1];return""+(null===(t=a)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.toUpperCase())+(null===(l=a)||void 0===l?void 0:l.slice(1))+" "}(null==k?void 0:k.tenantId))," "),l.createElement("div",{className:"documentDetails_row_items"},l.createElement("p",{className:"documentDetails_title"},O("PUBLIC_BRDCST_TITLE_LABEL")+":")," ",l.createElement("p",null,null==k||null===(o=k.applicationData)||void 0===o?void 0:o.name)," "),l.createElement("div",{className:"documentDetails_row_items"},l.createElement("p",{className:"documentDetails_title"},O("EVENTS_COMMENTS_LABEL")+":")," ",l.createElement("p",{className:"documentDetails__description"},null!=k&&null!==(r=k.applicationData)&&void 0!==r&&null!==(u=r.description)&&void 0!==u&&u.length?null==k||null===(d=k.applicationData)||void 0===d?void 0:d.description:"NA")," "),l.createElement("div",{className:"documentDetails_row_items"},l.createElement("p",{className:"documentDetails_title"},O("EVENTS_FROM_DATE_LABEL")+":")," ",l.createElement("p",null,null!=k&&null!==(m=k.applicationData)&&void 0!==m&&null!==(v=m.eventDetails)&&void 0!==v&&v.fromDate?Ae(new Date(null==k||null===(E=k.applicationData)||void 0===E||null===(f=E.eventDetails)||void 0===f?void 0:f.fromDate),"dd/MM/yyyy"):null)," "),l.createElement("div",{className:"documentDetails_row_items"},l.createElement("p",{className:"documentDetails_title"},O("EVENTS_TO_DATE_LABEL")+":")," ",l.createElement("p",null,null!=k&&null!==(p=k.applicationData)&&void 0!==p&&null!==(g=p.eventDetails)&&void 0!==g&&g.toDate?Ae(new Date(null==k||null===(h=k.applicationData)||void 0===h||null===(_=h.eventDetails)||void 0===_?void 0:_.toDate),"dd/MM/yyyy"):null)," "),l.createElement("span",{className:"documentDetails_subheader"},""+O("CS_COMMON_DOCUMENTS")),null!=k&&null!==(S=k.applicationData)&&void 0!==S&&null!==(y=S.eventDetails)&&void 0!==y&&null!==(T=y.documents)&&void 0!==T&&T.length?function(e){var n=window.Digit.Utils.browser.isMobile();return e||e.length?l.createElement("div",{style:{display:"flex",flexDirection:n?"column":"row",gap:n?"40px":"100px"}},e.map(function(e){var n=e.fileStoreId,a=e.fileName;return l.createElement("div",{className:"documentDetails_pdf"},l.createElement("div",{style:{width:"100px"},onClick:function(){return C(n,a)}},l.createElement(t.GenericFileIcon,null),l.createElement("span",{className:"cell-text"},null==a?void 0:a.split(10))))})):null}(null==k||null===(D=k.applicationData)||void 0===D||null===(b=D.eventDetails)||void 0===b?void 0:b.documents):"NA")),l.createElement(t.ActionBar,null,M?l.createElement(t.Menu,{style:{width:N?"full":"240px"},localeKeyPrefix:"ES_CE",options:Ia,t:O,onSelect:function(e){var t;"EDIT"===e&&w.push("/"+(null===(t=window)||void 0===t?void 0:t.contextPath)+"/employee/engagement/messages/inbox/edit/"+A),"DELETE"===e&&R(!0),P(!1)}}):null,l.createElement(t.SubmitBar,{label:O("ES_COMMON_TAKE_ACTION"),onSubmit:function(){return P(!M)}})))},xa=function(e){var n=e.match,a=(void 0===n?{}:n).path,o=e.tenants,r=e.parentRoute;return l.createElement(i.Switch,null,l.createElement(t.PrivateRoute,{path:a+"/create",component:function(e){return l.createElement(rt,e)}}),l.createElement(t.PrivateRoute,{path:a+"/inbox/create",component:function(e){return l.createElement(rt,e)}}),l.createElement(t.PrivateRoute,{path:a+"/inbox/details/:id",component:function(e){return l.createElement(Ra,e)}}),l.createElement(t.PrivateRoute,{path:a+"/inbox/edit/:id",component:function(e){return l.createElement(st,e)}}),l.createElement(t.PrivateRoute,{path:a+"/inbox",component:function(e){return l.createElement(it,c({},e,{tenants:o,parentRoute:r}))}}),l.createElement(t.PrivateRoute,{path:a+"/response",component:function(e){return l.createElement(ct,e)}}))},Ma=/(.*?)(jpg|jpeg|png|image|pdf|msword|openxmlformats-officedocument)$/i,Pa=["header","actions","eventNotificationText","timePastAfterEventCreation","timeApproxiamationInUnits"],Fa=function(e){var t=e.header,n=e.actions,i=e.eventNotificationText,o=e.timePastAfterEventCreation,r=e.timeApproxiamationInUnits,u=s(e,Pa),c=a.useTranslation().t,d=u.eventDetails.documents;return l.createElement("div",{className:"WhatsNewCard"},l.createElement("h2",null,c(t)),l.createElement("p",null,i),null==n?void 0:n.map(function(e){return l.createElement("a",{href:null==e?void 0:e.actionUrl},""+c("CS_COMMON_"+("number"==typeof(t=null==e?void 0:e.code)?t:t&&t.toUpperCase().replace(/[.:-\s\/]/g,"_"))));var t}),(null==d?void 0:d.length)>1?function(e,t){return t.length?l.createElement("div",{className:"broadcastnotifications_actionswrapper-multi"},t.map(function(t,n){var a=t.fileName,i=t.fileStoreId;return l.createElement("div",{className:"display-flex-gap-2"},a.length?l.createElement("p",null,a," : "):null,i.length?l.createElement("span",{className:"link",onClick:function(){return C(i,a)}}," ",e("CE_DOCUMENT_VIEW_LINK")," "):null,i.length?l.createElement("span",{className:"link",onClick:function(){return D(i)}}," ",e("CE_DOCUMENT_DOWNLOAD_LINK")," "):null)})):null}(c,d):function(e,t){if(null==t||!t.length)return null;var n=null==t?void 0:t[0],a=n.fileStoreId,i=n.fileName;return l.createElement("div",{className:"display-flex-gap-2"},a&&a.length?l.createElement("span",{className:"link",onClick:function(){return C(a,i)}}," ",e("CE_DOCUMENT_VIEW_LINK")," "):null,a&&a.length?l.createElement("span",{className:"link",onClick:function(){return D(a)}}," ",e("CE_DOCUMENT_DOWNLOAD_LINK")," "):null)}(c,d),l.createElement("p",null,o+" "+c(r)))},Ua=function(e){return l.createElement("h1",{className:"heading-m"},e.label)},Ba=function(){return l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},ka=function(e){return l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(Ba,null))},Va=function(){var e=i.useParams().id,o=a.useTranslation().t,r=i.useHistory(),u=n.useState(!1),s=u[0],d=u[1],m=n.useState(!1),v=m[0],E=m[1],f=Digit.ULBService.getCurrentTenantId(),p=Digit.Hooks.events.useEventDetails(f,{ids:e}),g=p.isLoading,h=p.data,_=Digit.Hooks.useSessionStorage("EMPLOYEE_EVENT_MUTATION_HAPPENED",!1)[1],S=Digit.Hooks.useSessionStorage("EMPLOYEE_EVENT_ERROR_DATA",!1)[2],y=Digit.Hooks.useSessionStorage("EMPLOYEE_EVENT_MUTATION_SUCCESS_DATA",!1)[2];return n.useEffect(function(){_(!1),y(),S()},[]),l.createElement(n.Fragment,null,l.createElement(t.Header,null,o("ES_TITLE_APPLICATION_DETAILS")),l.createElement(Da,{applicationData:null==h?void 0:h.applicationData,applicationDetails:h,isLoading:g,isDataLoading:g}),l.createElement(t.ActionBar,null,v?l.createElement(t.Menu,{localeKeyPrefix:"ES_EVENT",options:["EDIT","DELETE"],t:o,onSelect:function(t){var n;"EDIT"===t&&r.push("/"+(null===(n=window)||void 0===n?void 0:n.contextPath)+"/employee/engagement/event/edit-event/"+e),"DELETE"===t&&d(!0),E(!1)}}):null,l.createElement(t.SubmitBar,{label:o("ES_COMMON_TAKE_ACTION"),onSubmit:function(){return E(!v)}})),s&&l.createElement(t.Modal,{headerBarMain:l.createElement(Ua,{label:o("ES_EVENT_DELETE_POPUP_HEADER")}),headerBarEnd:l.createElement(ka,{onClick:function(){return d(!1)}}),actionCancelLabel:o("CS_COMMON_CANCEL"),actionCancelOnSubmit:function(){return d(!1)},actionSaveLabel:o("ES_EVENT_DELETE"),actionSaveOnSubmit:function(){var e,t={events:[c({},null==h?void 0:h.applicationData,{status:"CANCELLED"})]};r.push("/"+(null===(e=window)||void 0===e?void 0:e.contextPath)+"/employee/engagement/event/response?delete=true",t)}},l.createElement(t.Card,{style:{boxShadow:"none"}},l.createElement(t.CardText,null,o("ES_EVENT_DELETE_TEXT")))))},Ha=function(e){var n=e.searchValue,a=e.onChange,i=e.handleKeyPress,o=e.handleSearch;return l.createElement("div",null,l.createElement(t.TextInput,{textInputStyle:{maxWidth:"960px"},className:"searchInput",placeholder:(0,e.t)("CE_SERACH_DOCUMENTS"),value:n,onChange:function(e){return a(e.target.value)},signature:!0,signatureImg:l.createElement(t.SearchIconSvg,{className:"signature-img",onClick:function(){return o()}}),onKeyPress:i}))},Wa=function(e,t){var l=n.useState(e),a=l[0],i=l[1];return n.useEffect(function(){var n=setTimeout(function(){i(e)},t);return function(){clearTimeout(n)}},[e,t]),a},ja=function(e){var n=e.documentTitle,a=e.documentSize,i=void 0===a?2.3:a,o=e.lastModifiedData,r=e.description,u=e.filestoreId,c=e.documentLink,s=e.t,d=window.Digit.Utils.browser.isMobile();return l.createElement("div",{className:"notice_and_circular_main"},l.createElement("div",{className:"notice_and_circular_image"},l.createElement(t.GenericFileIcon,{height:""+(d?66:100),width:""+(d?53:100)})),l.createElement("div",{className:"notice_and_circular_content"},l.createElement("div",{className:"notice_and_circular_heading_mb"},l.createElement(t.CardHeader,null,n),i?l.createElement(t.CardCaption,null,b(i)):null),l.createElement("div",{className:"notice_and_circular_caption"},l.createElement(t.CardCaption,null,s("CE_DCOUMENT_UPLOADED_ON")+" "+(o?Ae(new Date(o),"do MMMM yyyy"):"-"))),l.createElement("div",{className:"notice_and_circular_text"},l.createElement(t.CardText,null,null!=r&&r.length?r:"NA")),l.createElement("div",{className:"view_download_main"},u&&u.length?l.createElement(t.LinkButton,{label:l.createElement("div",{className:"views",onClick:function(){return C(u||null,n)}},l.createElement(t.ViewsIcon,null),l.createElement("p",null,s("CE_DOCUMENT_VIEW_LINK")))}):null,c&&c.length?l.createElement(t.LinkButton,{label:l.createElement("div",{className:"views",onClick:function(){return T(c,n)}},l.createElement(t.ExternalLinkIcon,null),l.createElement("p",null,s("CE_DOCUMENT_OPEN_LINK")))}):null,u&&u.length?l.createElement(t.LinkButton,{label:l.createElement("div",{className:"views download_views_padding"},l.createElement(t.DownloadImgIcon,null),l.createElement("p",null,s("CE_DOCUMENT_DOWNLOAD_LINK"))),onClick:function(){return D(u||null)}}):null)))},za=function(e,t){return e.map(function(e,n){return l.createElement(ja,{key:n,documentTitle:e.name,documentSize:e.fileSize,lastModifiedData:e.createdTime,description:e.description,documentLink:e.documentLink,filestoreId:e.filestoreId,t:t})})},Ga=function(e){var n=e.t,a=e.title,i=e.count,o=e.onClick,r=e.children,u=l.useState(!1),c=u[0],s=u[1];return l.createElement("div",{className:"accordion-wrapper",onClick:function(){return o(a,i)}},l.createElement("div",{className:"accordion-title "+(c?"open":""),onClick:function(){return s(!c)}},n(a)+" ("+i+")",l.createElement(t.PrevIcon,null)),l.createElement("div",{className:"accordion-item "+(c?"":"collapsed")},l.createElement("div",{className:"accordion-content"},r)))},Ya=function(e){var a,o,r,u,c,s,d=e.t,m=i.useHistory(),v=n.useState(""),E=v[0],f=v[1],p=Digit.ULBService.getCitizenCurrentTenant(),g=Wa(E,700),h=Digit.Hooks.engagement.useDocSearch({name:g,tenantIds:p},{select:function(e){var t;return{documentList:null==e||null===(t=e.Documents)||void 0===t?void 0:t.map(function(e){var t=e.auditDetails;return{docId:e.uuid,name:e.name,category:e.category,description:e.description,documentLink:e.documentLink,createdTime:null==t?void 0:t.createdTime,fileSize:e.fileSize,filestoreId:e.filestoreId}}),statusCount:null==e?void 0:e.statusCount}}}),_=h.data,S=h.isLoading;if(null===(a=Digit.UserService)||void 0===a||null===(o=a.getUser())||void 0===o||!o.access_token)return l.createElement(Redirect,{to:{pathname:"/"+(null===(s=window)||void 0===s?void 0:s.contextPath)+"/citizen/login",state:{from:location.pathname+location.search}}});var y=function(e,t){m.push("documents/list/"+e+"/"+t)};return l.createElement(t.AppContainer,null,l.createElement(t.Header,null,d("DOCUMENTS_DOCUMENT_HEADER")),l.createElement("div",{className:"Docs_CardWrapper"},l.createElement(Ha,{searchValue:E,handleKeyPress:function(e){"Enter"===e.key&&f("")},handleSearch:function(e){f("")},onChange:f,t:d}),l.createElement("hr",{style:{color:"#ccc"}}),S?l.createElement(t.Loader,null):l.createElement("div",{className:"wrapper"},E.length&&null!=_&&null!==(r=_.documentList)&&void 0!==r&&r.length?za(_.documentList,d):null!=_&&_.statusCount&&null!=_&&null!==(u=_.statusCount)&&void 0!==u&&u.length?null==_||null===(c=_.statusCount)||void 0===c?void 0:c.map(function(e,t){return l.createElement(Ga,{t:d,title:e.category,count:e.count,key:t,onClick:y})}):l.createElement(t.Card,null,l.createElement(t.CardCaption,null,d("COMMON_INBOX_NO_DATA"))))))},qa=function(e){var n=a.useTranslation().t,i=Digit.Hooks.useQueryParams(),o=Digit.Hooks.engagement.useDocSearch({uuid:i.applicationNumber,tenantId:i.tenantId},{select:function(e){var t;return{documentList:null==e||null===(t=e.Documents)||void 0===t?void 0:t.map(function(e){var t=e.auditDetails;return{docId:e.uuid,name:e.name,category:e.category,description:e.description,documentLink:e.documentLink,createdTime:null==t?void 0:t.createdTime,fileSize:e.fileSize,filestoreId:e.filestoreId}}),statusCount:null==e?void 0:e.statusCount}}}),r=o.isLoading,u=(o.data||{}).documentList,c=void 0===u?[]:u,s=(null==c?void 0:c[0])||{},d=s.name,m=void 0!==d&&d,v=s.createdTime,E=s.description,f=s.documentLink,p=s.fileSize,g=s.filestoreId;return l.createElement(t.AppContainer,null,l.createElement(t.Header,null,""+n("COMMON_VIEW_DOC")),r&&l.createElement(t.Loader,null),m&&l.createElement(ja,{key:1,documentTitle:m,documentSize:p,lastModifiedData:v,description:E,documentLink:f,filestoreId:g,t:n}),!m&&!r&&l.createElement(t.Card,null,l.createElement(t.CardCaption,null,n("COMMON_DOC_DATA_NOT_FOUND"))))},Ka=function(e){var n,i,o,r,u=a.useTranslation().t;return l.createElement(t.Banner,{message:u(e.mutation.isSuccess?"SURVEY_RESPONSE_SUBMITED":"SURVEY_RESPONSE_FAILED"),applicationNumber:(n=e.mutation,n.isSuccess?null===(i=n.data)||void 0===i||null===(o=i.Surveys)||void 0===o||null===(r=o[0])||void 0===r?void 0:r.uuid:""),info:e.mutation.isSuccess?e.surveyTitle:"",successful:e.mutation.isSuccess,whichSvg:"tick"})},Xa=function(e){var o,u,c=r.useQueryClient(),s=a.useTranslation().t,d=(Digit.ULBService.getCurrentTenantId(),Digit.Hooks.survey.useSubmitResponse()),m=e.location.state,v=null==m||null===(o=m.AnswerEntity)||void 0===o?void 0:o.surveyTitle;return n.useEffect(function(){d.mutate(m,{onSuccess:function(){c.clear()}})},[]),d.isLoading&&!d.isIdle?l.createElement(t.Loader,null):l.createElement(t.Card,null,l.createElement(Ka,{t:s,mutation:d,surveyTitle:v}),l.createElement(t.CardText,null,d.isSuccess?s("SURVEY_FORM_RESPONSE_MESSAGE"):null),l.createElement(t.ActionBar,null,l.createElement(i.Link,{to:"/"+(null===(u=window)||void 0===u?void 0:u.contextPath)+"/citizen/engagement/surveys/list"},l.createElement(t.SubmitBar,{label:s("CORE_COMMON_GO_TO_HOME")}))))},Qa=function(e){var n=e.path,o=i.useLocation(),r=a.useTranslation().t,u=Digit.ComponentRegistryService.getComponent("NotificationsAndWhatsNew"),c=Digit.ComponentRegistryService.getComponent("EventsListOnGround"),s=Digit.ComponentRegistryService.getComponent("EventDetails"),d=Digit.ComponentRegistryService.getComponent("DocumentList"),m=Digit.ComponentRegistryService.getComponent("SurveyList"),v=Digit.ComponentRegistryService.getComponent("FillSurvey"),E=Digit.ComponentRegistryService.getComponent("ShowSurvey");return l.createElement(l.Fragment,null,l.createElement("div",{className:"engagement-citizen-wrapper"},!o.pathname.includes("response")&&l.createElement(t.BackButton,null,r("CS_COMMON_BACK")),l.createElement(i.Switch,null,l.createElement(i.Route,{path:n+"/notifications",component:function(){return l.createElement(u,{variant:"notifications",parentRoute:n})}}),l.createElement(t.PrivateRoute,{path:n+"/whats-new",component:function(){return l.createElement(u,{variant:"whats-new",parentRoute:n})}}),l.createElement(t.PrivateRoute,{exact:!0,path:n+"/events",component:function(){return l.createElement(c,{variant:"events",parentRoute:n})}}),l.createElement(t.PrivateRoute,{path:n+"/events/details/:id",component:function(){return l.createElement(s,{parentRoute:n})}}),l.createElement(t.PrivateRoute,{path:n+"/docs",component:function(){return l.createElement(Ya,{t:r,path:n})}}),l.createElement(t.PrivateRoute,{path:n+"/documents/viewDocument",component:function(){return l.createElement(qa,{t:r,path:n})}}),l.createElement(t.PrivateRoute,{path:n+"/documents/list/:category/:count",component:function(e){return l.createElement(d,e)}}),l.createElement(t.PrivateRoute,{path:n+"/surveys/list",component:function(e){return l.createElement(m,e)}}),l.createElement(t.PrivateRoute,{path:n+"/surveys/fill-survey",component:function(e){return l.createElement(v,e)}}),l.createElement(t.PrivateRoute,{path:n+"/surveys/submit-response",component:function(e){return l.createElement(Xa,e)}}),l.createElement(t.PrivateRoute,{path:n+"/surveys/show-survey",component:function(e){return l.createElement(E,e)}}))))},Ja=[{body:[{type:"form",key:"ULB",component:"EngagementDocSelectULB",withoutLabel:!0},{type:"form",key:"documentName",component:"EnagementDocName",withoutLabel:!0},{type:"form",key:"docCategory",component:"EngagementDocCategory",withoutLabel:!0},{type:"form",key:"description",component:"EngagementDocDescription",withoutLabel:!0},{type:"form",key:"document",component:"EngagementDocUploadDocument",withoutLabel:!0,inputs:[{name:""}]}]}],Za=function(){var e=a.useTranslation().t,o=i.useHistory(),r=n.useState(!1),u=r[0],c=r[1];return l.createElement("div",null,l.createElement(t.Header,null,e("ES_ENGAGEMENT_DOCUMENTS")),l.createElement(t.FormComposer,{label:e("ES_COMMON_APPLICATION_SUBMIT"),config:Ja,onSubmit:function(e){var t,n,l,a,i,r,u,c,s,d={name:e.documentName,description:null!=e&&e.description.length?e.description:"",category:null===(t=e.docCategory)||void 0===t?void 0:t.name,documentLink:null===(n=e.document)||void 0===n?void 0:n.documentLink,filestoreId:null===(l=e.document)||void 0===l||null===(a=l.filestoreId)||void 0===a?void 0:a.fileStoreId,fileSize:null===(i=e.document)||void 0===i||null===(r=i.filestoreId)||void 0===r?void 0:r.fileSize,fileType:null===(u=e.document)||void 0===u||null===(c=u.filestoreId)||void 0===c?void 0:c.fileType,tenantIds:e.ULB.map(function(e){return e.code})};o.push("/"+(null===(s=window)||void 0===s?void 0:s.contextPath)+"/employee/engagement/documents/response",{DocumentEntity:d})},fieldStyle:{},onFormValueChange:function(e,t,n){var l;null!=t&&t.documentName&&null!=t&&t.docCategory&&(null!=t&&t.document.filestoreId||null!=t&&t.document.documentLink)&&null!=t&&null!==(l=t.ULB)&&void 0!==l&&l.length?c(!0):c(!1)},isDisabled:!u}))},$a=[{body:[{type:"form",key:"ULB",component:"EngagementULBDropdown",withoutLabel:!0},{type:"form",key:"documentName",component:"EnagementDocName",withoutLabel:!0},{type:"form",key:"docCategory",component:"EngagementDocCategory",withoutLabel:!0},{type:"form",key:"description",component:"EngagementDocDescription",withoutLabel:!0},{type:"form",key:"document",component:"EngagementDocUploadDocument",withoutLabel:!0,inputs:[{name:""}]}]}],ei=function(e){var o,r=a.useTranslation().t,u=i.useHistory(),s=n.useState(!1),d=s[0],m=s[1],v=n.useCallback(function(e,t,n){null!=t&&t.documentName&&null!=t&&t.docCategory&&(null!=t&&t.document.filestoreId||null!=t&&t.document.documentLink)&&null!=t&&t.ULB&&Object.keys(null==t?void 0:t.ULB).length?m(!0):m(!1)},[]);return l.createElement(l.Fragment,null,l.createElement(t.Header,null,r("ES_ENGAGEMENT_EDIT_DOC")),l.createElement(t.FormComposer,{label:r("ES_COMMON_UPDATE"),config:$a,onSubmit:function(t){!function(t){var n,l,a,i,o,r,s,d,m,v,E,f,p,g,h,_,S,y,C,T,D=null!==(n=t.document)&&void 0!==n&&null!==(l=n.filestoreId)&&void 0!==l&&l.fileSize?null===(a=t.document)||void 0===a||null===(i=a.filestoreId)||void 0===i?void 0:i.fileSize:null===(o=e.location.state)||void 0===o||null===(r=o.DocumentEntity)||void 0===r?void 0:r.fileSize,b=null!==(s=t.document)&&void 0!==s&&null!==(d=s.filestoreId)&&void 0!==d&&d.fileType?null===(m=t.document)||void 0===m||null===(v=m.filestoreId)||void 0===v?void 0:v.fileType:null===(E=e.location.state)||void 0===E||null===(f=E.DocumentEntity)||void 0===f?void 0:f.fileType,N=c({},null===(p=e.location)||void 0===p||null===(g=p.state)||void 0===g?void 0:g.DocumentEntity,{name:t.documentName,description:null!=t&&t.description.length?t.description:"",category:null===(h=t.docCategory)||void 0===h?void 0:h.name,filestoreId:null===(_=t.document)||void 0===_||null===(S=_.filestoreId)||void 0===S?void 0:S.fileStoreId,fileSize:D,fileType:b,documentLink:null===(y=t.document)||void 0===y?void 0:y.documentLink,tenantId:null==t||null===(C=t.ULB)||void 0===C?void 0:C.code});delete N.ULB,delete N.docCategory,delete N.documentName,u.push("/"+(null===(T=window)||void 0===T?void 0:T.contextPath)+"/employee/engagement/documents/update-response",{DocumentEntity:N})}(t)},fieldStyle:{},onFormValueChange:v,defaultValues:null===(o=e.location.state)||void 0===o?void 0:o.DocumentEntity,isDisabled:!d}))},ti=function(e){var n,i,o,r,u=a.useTranslation().t;return l.createElement(t.Banner,{message:u(e.isSuccess?"ENGAGEMENT_DOC_CREATED":"ENGAGEMENT_DOC_FAILURE"),applicationNumber:(n=e.mutation,n.isSuccess?null===(i=n.data)||void 0===i||null===(o=i.Documents)||void 0===o||null===(r=o[0])||void 0===r?void 0:r.uuid:""),info:e.isSuccess?u("ENGAGEMENT_DOCUMENT_ID"):"",successful:e.isSuccess})},ni=function(e){var o,u=r.useQueryClient(),c=a.useTranslation().t,s=(Digit.ULBService.getCurrentTenantId(),Digit.Hooks.engagement.useDocCreate()),d=e.location.state;return n.useEffect(function(){s.mutate(d,{onSuccess:function(){u.clear()}})},[]),s.isLoading||s.isIdle?l.createElement(t.Loader,null):l.createElement("div",null,l.createElement(t.Card,null,l.createElement(ti,{t:c,data:s.data,mutation:s,isSuccess:s.isSuccess,isLoading:s.isIdle||s.isLoading})),l.createElement(t.ActionBar,null,l.createElement(i.Link,{to:"/"+(null===(o=window)||void 0===o?void 0:o.contextPath)+"/employee"},l.createElement(t.SubmitBar,{label:c("CORE_COMMON_GO_TO_HOME")}))))},li=function(e){var n,i,o,r,u=a.useTranslation().t;return l.createElement(t.Banner,{message:u(e.isSuccess?"ENGAGEMENT_DOC_UPDATED":"ENGAGEMENT_DOC_UPDATE_FAILURE"),applicationNumber:(n=e.mutation,n.isSuccess?null===(i=n.data)||void 0===i||null===(o=i.Documents)||void 0===o||null===(r=o[0])||void 0===r?void 0:r.uuid:""),info:e.isSuccess?u("ENGAGEMENT_DOCUMENT_ID"):"",successful:e.isSuccess})},ai=function(e){var o,u=r.useQueryClient(),c=a.useTranslation().t,s=(Digit.ULBService.getCurrentTenantId(),Digit.Hooks.engagement.useDocUpdate()),d=e.location.state;return n.useEffect(function(){s.mutate(d,{onSuccess:function(){u.clear()}})},[]),s.isLoading||s.isIdle?l.createElement(t.Loader,null):l.createElement("div",null,l.createElement(t.Card,null,l.createElement(li,{t:c,data:s.data,mutation:s,isSuccess:s.isSuccess,isLoading:s.isIdle||s.isLoading})),l.createElement(t.ActionBar,null,l.createElement(i.Link,{to:"/"+(null===(o=window)||void 0===o?void 0:o.contextPath)+"/employee"},l.createElement(t.SubmitBar,{label:c("CORE_COMMON_GO_TO_HOME")}))))},ii=function(e){var n,i=a.useTranslation().t;return l.createElement(t.Banner,{message:i(e.isSuccess?"ENGAGEMENT_DOC_DELETED":"ENGAGEMENT_DOC_DELETE_FAILURE"),applicationNumber:null!==(n=e.mutation)&&void 0!==n&&n.isSuccess?e.uuid:"",info:e.isSuccess?i("ENGAGEMENT_DOCUMENT_ID"):"",successful:e.isSuccess})},oi=function(e){var o,u,c=r.useQueryClient(),s=a.useTranslation().t,d=(Digit.ULBService.getCurrentTenantId(),Digit.Hooks.engagement.useDocDelete()),m=e.location.state;return n.useEffect(function(){d.mutate(m,{onSuccess:function(){c.clear()}})},[]),d.isLoading||d.isIdle?l.createElement(t.Loader,null):l.createElement("div",null,l.createElement(t.Card,null,l.createElement(ii,{t:s,data:d.data,mutation:d,uuid:null==m||null===(o=m.DocumentEntity)||void 0===o?void 0:o.uuid,isSuccess:d.isSuccess,isLoading:d.isIdle||d.isLoading})),l.createElement(t.ActionBar,null,l.createElement(i.Link,{to:"/"+(null===(u=window)||void 0===u?void 0:u.contextPath)+"/employee"},l.createElement(t.SubmitBar,{label:s("CORE_COMMON_GO_TO_HOME")}))))},ri=function(e){return l.createElement(t.Table,{t:e.t,data:e.data,columns:e.columns,onSearch:e.onSearch,globalSearch:e.globalSearch,manualGlobalFilter:!0,manualPagination:!0,currentPage:e.currentPage,onNextPage:e.onNextPage,onPrevPage:e.onPrevPage,pageSizeLimit:e.pageSizeLimit,onPageSizeChange:e.onPageSizeChange,getCellProps:e.getCellProps,totalRecords:e.totalRecords,onSort:e.onSort,sortParams:e.sortParams})},ui=function(e){var a=e.onSearch,i=e.searchFields,r=e.type,u=e.onClose,s=e.isInboxPage,d=e.t,m=o.useForm({defaultValues:e.searchParams}),v=m.handleSubmit,E=m.formState,f=m.reset,p=m.control,g=innerWidth<=640,_=Digit.SessionStorage.get("ENGAGEMENT_TENANTS"),S=Digit.ULBService.getCurrentTenantId(),y=Digit.UserService.getUser().info,C=_.filter(function(e){var t;return null==y||null===(t=y.roles)||void 0===t?void 0:t.some(function(t){return(null==t?void 0:t.tenantId)===(null==e?void 0:e.code)})}).sort(h),T=n.useMemo(function(){return _.filter(function(e){return e.code===S})},[S,_]),D=function(){f({name:"",ulbs:{code:S.code},postedBy:""}),a({name:"",ulbs:{code:S.code},postedBy:""})},b=function(e){return l.createElement(t.LinkLabel,{style:c({display:"inline"},e?{margin:0}:{}),onClick:D},d("ES_COMMON_CLEAR_SEARCH"))};return l.createElement("form",{onSubmit:v(function(e){a(e),"mobile"===r&&u()})},l.createElement("div",{className:"search-container",style:{width:"auto",marginLeft:s?"24px":"revert"}},l.createElement("div",{className:"search-complaint-container"},("mobile"===r||g)&&l.createElement("div",{className:"complaint-header"},l.createElement("h2",null,d("ES_COMMON_SEARCH_BY")),l.createElement("span",{onClick:u},l.createElement(t.CloseSvg,null))),l.createElement("div",{className:"complaint-input-container for-pt "+(s?"":"for-search"),style:{width:"100%"}},null==i?void 0:i.map(function(e,n){var a,i,r;return l.createElement("div",{key:e.name,className:"input-fields"},l.createElement("span",{className:"mobile-input"},l.createElement(t.Label,null,d(e.label)+" "+(e.isMendatory?"*":"")),function(e){switch(e.type){case"ulb":return l.createElement(o.Controller,{rules:{required:!0},defaultValue:null==T?void 0:T[0],render:function(e){return l.createElement(t.Dropdown,{option:C,optionKey:"i18nKey",selected:e.value,select:e.onChange,t:d})},name:e.name,control:p});default:return l.createElement(o.Controller,{render:function(e){return l.createElement(t.TextInput,{onChange:e.onChange,value:e.value})},name:e.name,control:p,defaultValue:null})}}(e)),null!=E&&null!==(a=E.dirtyFields)&&void 0!==a&&a[e.name]?l.createElement("span",{style:{fontWeight:"700",color:"rgba(212, 53, 28)",paddingLeft:"8px",marginTop:"-20px",fontSize:"12px"},className:"inbox-search-form-error"},null==E||null===(i=E.errors)||void 0===i||null===(r=i[e.name])||void 0===r?void 0:r.message):null)}),"desktop"===r&&!g&&l.createElement("div",{style:{maxWidth:"unset",marginLeft:"unset"},className:"search-submit-wrapper"},l.createElement(t.SubmitBar,{className:"submit-bar-search",label:d("ES_COMMON_SEARCH"),submit:!0})),"desktop"===r&&!g&&l.createElement("div",{className:"document-clear-all"},b())))),("mobile"===r||g)&&l.createElement(t.ActionBar,{className:"clear-search-container"},l.createElement("button",{className:"clear-search",style:{flex:1}},b(g)),l.createElement(t.SubmitBar,{disabled:!!Object.keys(E.errors).length,label:d("ES_COMMON_SEARCH"),style:{flex:1},submit:!0})))},ci=function(e){var i=e.type,o=void 0===i?"desktop":i,r=e.onClose,u=e.onFilterChange,s=e.searchParams,d=a.useTranslation().t,m=n.useState(function(){return c({},s)}),v=m[0],E=m[1],f=Digit.ULBService.getCurrentTenantId(),p=null==f?void 0:f.split(".")[0],g=Digit.ULBService.getCurrentUlb(),h=Digit.Hooks.engagement.useMDMS(p,"DocumentUploader",["UlbLevelCategories"],{select:function(e){var t,n,l;return(null==e||null===(t=e.DocumentUploader)||void 0===t||null===(n=t.UlbLevelCategories)||void 0===n||null===(l=n.filter)||void 0===l?void 0:l.call(n,function(e){return e.ulb===g.code}))[0].categoryList.map(function(e){return{category:e}})}}),_=h.data,S=function(){E({category:null,name:null,postedBy:null}),u({category:null,name:null,postedBy:null}),null==r||r()};return h.isLoading?l.createElement(t.Loader,null):l.createElement("div",{className:"filter"},l.createElement("div",{className:"filter-card"},l.createElement("div",{className:"heading"},l.createElement("div",{className:"filter-label"},d("ES_COMMON_FILTER_BY"),":"),l.createElement("div",{className:"clearAll",onClick:S},d("ES_COMMON_CLEAR_ALL")),"desktop"===o&&l.createElement("span",{className:"clear-search",onClick:S},l.createElement(t.RefreshIcon,null)),"mobile"===o&&l.createElement("span",{onClick:r},l.createElement(t.CloseSvg,null))),l.createElement("div",{className:"filter-label"},""+d("DOCUMENTS_CATEGORY_CARD_LABEL")),l.createElement(t.Dropdown,{option:_,optionKey:"category",selected:v,select:function(e){E(c({},v,e))},t:d}),l.createElement("div",null,l.createElement(t.SubmitBar,{style:{width:"100%"},onSubmit:function(){return u(v),void(null==r||r())},label:d("ES_COMMON_APPLY")}))))},si=function(e){return l.createElement("span",{className:"cell-text styled-cell"},e)},di=function(e){var n,a=e.isLoading,o=e.data,r=e.t,u=e.onSearch,c=e.title,s=e.iconName,d=e.links,m=e.onSort,v=e.sortParams,E=e.globalSearch,f=e.searchFields,p=e.searchParams,g=e.onFilterChange,h=e.pageSizeLimit,_=e.totalRecords,S=e.currentPage,y=e.onNextPage,D=e.onPrevPage,b=e.onPageSizeChange,N=l.useMemo(function(){return[{Header:r("CE_TABLE_DOCUMENT_NAME"),accessor:function(e){return function(e,t,n){return void 0===e&&(e=""),l.createElement("span",{className:"document-table-docs-columns"},l.createElement(i.Link,{className:"link",to:t},e.length?e:n("CE_DOCUMENT_TITLE")))}(null==e?void 0:e.name,{pathname:"inbox/details/"+(t=e).name,state:{details:t}},r);var t}},{Header:r("DOCUMENTS_CATEGORY_CARD_LABEL"),accessor:function(e){return si(null!=e&&e.category?r(""+(null==e?void 0:e.category)):"")}},{Header:r("CE_TABLE_DOCUMENT_LINK"),accessor:function(e){return function(e,t,n,a){return void 0===e&&(e="mSeva"),l.createElement("span",{className:"document-table-docs-columns"},null!=t&&t.length?l.createElement("span",{className:"link",onClick:function(){return C(t,e)}}," ",a("CE_DOCUMENT_VIEW_LINK")," "):null,n.length?l.createElement("span",{className:"link",onClick:function(){return T(n,e)}}," ",a("CE_DOCUMENT_OPEN_LINK")," "):null)}(null==e?void 0:e.name,e.filestoreId,e.documentLink||"",r)}},{Header:r("CE_TABLE_DOCUMENT_POSTED_BY"),accessor:function(e){return si(e.postedBy)}}]},[]);if(a)n=l.createElement(t.Loader,null);else if(o&&0!==(null==o?void 0:o.length))(null==o?void 0:o.length)>0&&(n=l.createElement(ri,{t:r,data:o,columns:N,onSort:m,sortParams:v,globalSearch:E,onSearch:p,pageSizeLimit:h,totalRecords:_,currentPage:S,onNextPage:y,onPrevPage:D,onPageSizeChange:b,getCellProps:function(e){return{style:{minWidth:e.column.Header===r("CE_TABLE_DOCUMENT_NAME")?"240px":"",padding:"20px 18px",fontSize:"16px"}}}}));else{var A;n=l.createElement(t.Card,{style:{marginTop:20,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},r("CE_DOCUMENTS_NOT_FOUND"),l.createElement("br",null),l.createElement(i.Link,{className:"link",to:"/"+(null===(A=window)||void 0===A?void 0:A.contextPath)+"/employee/engagement/documents/inbox/new-doc"},r("NEW_DOCUMENT_TEXT")))}return l.createElement("div",{className:"inbox-container"},l.createElement("div",{className:"filters-container"},l.createElement(Ue,{title:c,icon:s,links:d}),l.createElement("div",null,l.createElement(ci,{onFilterChange:g,searchParams:p}))),l.createElement("div",{style:{flex:1}},l.createElement(ui,{t:r,onSearch:u,type:"desktop",searchFields:f,isInboxPage:!0,searchParams:p}),l.createElement("div",{className:"result",style:{marginLeft:"24px",flex:1}},n)))},mi=function(e){var a=e.searchFields,o=e.searchParams,r=e.onFilterChange,u=e.onSearch,c=e.t,s=e.data,d=e.responseData,m=n.useState(""),v=m[0],E=m[1],f=n.useState(!1),p=f[0],g=f[1],h=n.useState(o),_=h[0],y=h[1],C=(Digit.ULBService.getCurrentTenantId(),i.useHistory());n.useEffect(function(){v&&g(!0)},[v]);var T,D,b=function(){g(!1),y(o)};return 0===(null==s?void 0:s.length)?T=l.createElement(t.Card,{style:{marginTop:20,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},c("CE_DOCUMENTS_NOT_FOUND"),l.createElement("br",null),l.createElement(i.Link,{className:"link",to:"/"+(null===(D=window)||void 0===D?void 0:D.contextPath)+"/employee/engagement/documents/inbox/new-doc"},c("NEW_DOCUMENT_TEXT"))):s&&(null==s?void 0:s.length)>0&&(T=l.createElement(t.DetailsCard,{data:s,handleSelect:function(){},handleDetailCardClick:function(e){var t,n=null==d?void 0:d.find(function(t){return S(t.postedBy,e["Posted By"])&&S(t.name,e["Document Name"])});n&&C.push("/"+(null===(t=window)||void 0===t?void 0:t.contextPath)+"/employee/engagement/documents/inbox/details/"+(null==n?void 0:n.name),{details:n})}})),l.createElement(l.Fragment,null,l.createElement("div",{className:"searchBox"},u&&l.createElement(t.SearchAction,{text:"SEARCH",handleActionClick:function(){E("SEARCH"),g(!0)}}),l.createElement(t.FilterAction,{text:"FILTER",handleActionClick:function(){E("FILTER"),g(!0)}})),T,p&&l.createElement(t.PopUp,null,"FILTER"===v&&l.createElement("div",{className:"popup-module"},l.createElement(ci,{onFilterChange:r,onClose:b,onSearch:u,type:"mobile",searchParams:_})),"SEARCH"===v&&l.createElement("div",{className:"popup-module"},l.createElement(ui,{t:c,type:"mobile",onClose:b,onSearch:u,searchParams:o,searchFields:a}))))},vi=function(e){var t=e.data,n=e.t,a=e.searchFields,i=e.searchParams,o=e.onFilterChange,r=e.onSearch,u=e.isLoading;return l.createElement("div",{style:{padding:0}},l.createElement("div",{className:"inbox-container"},l.createElement("div",{className:"filters-container"},l.createElement(Ue,{title:e.title,icon:e.iconName,links:e.links}),l.createElement(mi,{t:n,data:null==t?void 0:t.filter(function(e){var t,n,l,a,o,r,u,c;return(!((null==i||null===(t=i.tenantIds)||void 0===t?void 0:t.length)>0)||(null==i||null===(n=i.tenantIds)||void 0===n?void 0:n.includes(e.tenantId)))&&(null==i||!i.name||(null===(l=e.name)||void 0===l?void 0:l.toUpperCase().startsWith(null==i||null===(a=i.name)||void 0===a?void 0:a.toUpperCase())))&&(null==i||!i.postedBy||(null===(o=e.postedBy)||void 0===o||null===(r=o.trim())||void 0===r?void 0:r.toLowerCase())===(null==i||null===(u=i.postedBy)||void 0===u||null===(c=u.trim())||void 0===c?void 0:c.toLowerCase()))&&(null==i||!i.category||e.category===(null==i?void 0:i.category))}).map(function(e){var t;return(t={})[n("CE_TABLE_DOCUMENT_NAME")]=null==e?void 0:e.name,t[n("DOCUMENTS_CATEGORY_CARD_LABEL")]=n(""+(null==e?void 0:e.category)),t[n("CE_TABLE_DOCUMENT_LINK")]=l.createElement("div",{className:"mobileInbox_attachments"},null!=e&&e.filestoreId?l.createElement("div",{className:"link",onClick:function(t){C(e.filestoreId,e.name)}},n("CE_DOCUMENT_VIEW_LINK")):null,null!=e&&e.documentLink?l.createElement("div",{className:"link",onClick:function(t){T(e.documentLink,e.name)}},n("CE_DOCUMENT_OPEN_LINK")):null),t[n("CE_TABLE_DOCUMENT_POSTED_BY")]=null==e?void 0:e.postedBy,t}),onFilterChange:o,isLoading:u,onSearch:r,searchParams:i,searchFields:a,responseData:t}))))},Ei=function(e){var i,o,r=e.tenants,u=a.useTranslation().t;Digit.SessionStorage.set("ENGAGEMENT_TENANTS",r);var s=Digit.ULBService.getCurrentTenantId(),d=n.useState({tenantIds:s,offset:0,limit:10}),m=d[0],v=d[1],E=window.Digit.Utils.browser.isMobile(),f=Digit.Hooks.engagement.useDocSearch(m,{select:function(e){return{documentsList:e.Documents,totalCount:e.totalCount}}}),p=f.data,g=f.isLoading,h=function(e){var t,n,l,a=null!=e&&null!==(t=e.ulbs)&&void 0!==t&&null!==(n=t.code)&&void 0!==n&&n.length?null==e||null===(l=e.ulbs)||void 0===l?void 0:l.code:s,i=e.name,o=e.postedBy;v(function(e){return c({},e,{name:i,postedBy:o,tenantIds:a})})},_=function(e){v(function(t){return c({},t,e)})},S=n.useCallback(function(){v(function(e){return c({},e,{offset:parseInt(null==e?void 0:e.offset)+parseInt(null==e?void 0:e.limit)})})},[]);n.useEffect(function(){v(function(e){return c({},e,{tenantIds:s})})},[s]);var y=function(){return[{label:u("LABEL_FOR_ULB"),name:"ulbs",type:"ulb"},{label:u("DOCUMENTS_DOCUMENT_HEADER"),name:"name"},{label:u("CE_TABLE_DOCUMENT_POSTED_BY"),name:"postedBy"}]},C=[{text:u("NEW_DOCUMENT_TEXT"),link:"/"+(null===(i=window)||void 0===i?void 0:i.contextPath)+"/employee/engagement/documents/inbox/new-doc"}];return E?l.createElement(vi,{data:null==p?void 0:p.documentsList,searchParams:m,searchFields:y(),t:u,onFilterChange:_,onSearch:h,isLoading:g,title:"DOCUMENTS_DOCUMENT_HEADER",iconName:"document",links:C}):l.createElement("div",null,l.createElement(t.Header,null,u("DOCUMENTS_DOCUMENT_HEADER"),Number(null==p?void 0:p.totalCount)?l.createElement("p",{className:"inbox-count"},Number(null==p?void 0:p.totalCount)):null),l.createElement(di,((o={t:u,isLoading:g,data:null==p?void 0:p.documentsList,links:C,searchParams:m,onSearch:h,searchFields:y(),onFilterChange:_,pageSizeLimit:null==m?void 0:m.limit,totalRecords:null==p?void 0:p.totalCount,title:"DOCUMENTS_DOCUMENT_HEADER",iconName:"document"}).links=C,o.currentPage=parseInt(m.offset/m.limit),o.onNextPage=S,o.onPrevPage=function(){v(function(e){return c({},e,{offset:parseInt(null==e?void 0:e.offset)-parseInt(null==e?void 0:e.limit)})})},o.onPageSizeChange=function(e){v(function(t){return c({},t,{limit:e.target.value})})},o)))},fi=function(e){var n=e.header,i=e.about,o=e.activeTime,r=e.postedAt,u=e.responseStatus,c=e.onCardClick,s=a.useTranslation().t;return l.createElement("div",{className:"WhatsNewCard",onClick:c},l.createElement("h2",null,n),l.createElement("p",null,i),l.createElement("div",{className:"surveyListclockDiv"},l.createElement(t.Clock,null)," ",l.createElement("span",null,"Active till "+Ae(new Date(o),"do MMM HH:mm"))),l.createElement("div",{className:"surveyListstatus"},l.createElement("p",null,function(e,t){return v(1,arguments),Le(e,Date.now(),t)}(new Date(r),{addSuffix:!0})),l.createElement("span",{className:"CS_SURVEY_RESPONDED"===u?"surveyLisResponded":"surveyLisNotResponded"},s(u))))},pi=function(e,t){var n=(new Date).getTime();return e<n&&n<=t},gi=["EDIT_DOCUMENT","DELETE"],hi=function(e){var i,o,r,u,s,d=e.location,m=e.history,v=window.Digit.Utils.browser.isMobile(),E=a.useTranslation().t,f=(null==d?void 0:d.state).details,p=l.useState(!1),g=p[0],h=p[1],_=n.useState(!1),S=_[0],y=_[1],T=(Digit.Hooks.useTenants(),Digit.ULBService.getCurrentUlb()),D=Digit.ULBService.getStateId(),b=Digit.Hooks.engagement.useMDMS(D,"DocumentUploader",["UlbLevelCategories"],{select:function(e){var t,n,l;return(null==e||null===(t=e.DocumentUploader)||void 0===t||null===(n=t.UlbLevelCategories)||void 0===n||null===(l=n.filter)||void 0===l?void 0:l.call(n,function(e){return e.ulb===T.code}))[0].categoryList.map(function(e){return{name:e}})}}).data;return l.createElement("div",null,S?l.createElement(wa,{t:E,heading:"CONFIRM_DELETE_DOC",docName:null==f?void 0:f.name,closeModal:function(){return y(!S)},actionCancelLabel:"CS_COMMON_CANCEL",actionCancelOnSubmit:function(){y(!1)},actionSaveLabel:"ES_COMMON_Y_DEL",actionSaveOnSubmit:function(){var e;y(!1);var t=c({},f);m.push({pathname:"/"+(null===(e=window)||void 0===e?void 0:e.contextPath)+"/employee/engagement/documents/delete-response",state:{DocumentEntity:t}})}}):null,l.createElement(t.Header,null,E("CE_DOCUMENT_DETAILS")),l.createElement("div",{className:"notice_and_circular_main gap-ten"},l.createElement("div",{className:"documentDetails_wrapper"},l.createElement("div",{className:"documentDetails_row_items"},l.createElement("p",{className:"documentDetails_title"},E("ULB")+":")," ",l.createElement("p",null,s=""+(null===(r=(s=null==(o=null==f?void 0:f.tenantId)?void 0:o.split(".")[1])[0])||void 0===r?void 0:r.toUpperCase())+(null===(u=s)||void 0===u?void 0:u.slice(1))+" ")," "),l.createElement("div",{className:"documentDetails_row_items"},l.createElement("p",{className:"documentDetails_title"},E("DOCUMENT_NAME")+":")," ",l.createElement("p",null,null==f?void 0:f.name)," "),l.createElement("div",{className:"documentDetails_row_items"},l.createElement("p",{className:"documentDetails_title"},E("DOCUMENT_CATEGORY")+":")," ",l.createElement("p",null,E(null==f?void 0:f.category))," "),l.createElement("div",{className:"documentDetails_row_items"},l.createElement("p",{className:"documentDetails_title"},E("DCOUMENT_DESCRIPTION")+":")," ",l.createElement("p",{className:"documentDetails__description"},null!=f&&null!==(i=f.description)&&void 0!==i&&i.length?null==f?void 0:f.description:"NA")," "),null!=f&&f.filestoreId?l.createElement("div",{className:"documentDetails_pdf"},l.createElement("span",{className:"documentDetails_subheader"},""+E("Document")),l.createElement("div",{style:{width:"100px"},onClick:function(){return C(null==f?void 0:f.filestoreId,null==f?void 0:f.name)}},l.createElement(t.GenericFileIcon,null))):null)),l.createElement(t.ActionBar,null,g?l.createElement(t.Menu,{style:{width:v?"full":"240px"},localeKeyPrefix:"ES_CE",options:gi,t:E,onSelect:function(e){if(h(!1),null!=e&&e.includes("EDIT")){var t,n,l=c({tenantIds:null==f?void 0:f.tenantId,documentName:null==f?void 0:f.name,docCategory:null==b||null===(t=b.filter(function(e){return e.name===(null==f?void 0:f.category)}))||void 0===t?void 0:t[0],document:{filestoreId:{fileStoreId:null==f?void 0:f.filestoreId},documentLink:null==f?void 0:f.documentLink},ULB:{code:null==f?void 0:f.tenantId}},f);m.push({pathname:"/"+(null===(n=window)||void 0===n?void 0:n.contextPath)+"/employee/engagement/documents/inbox/update",state:{DocumentEntity:l}})}null!=e&&e.includes("DELETE")&&y(!0)}}):null,l.createElement(t.SubmitBar,{label:E("ES_COMMON_TAKE_ACTION"),onSubmit:function(){return h(!g)}})))},_i=function(e){var i=e.statuses,r=e.controlFilterForm,u=a.useTranslation().t;return l.createElement(n.Fragment,null,l.createElement(t.FilterFormField,null,l.createElement(o.Controller,{name:"status",control:r,render:function(e){var a=e.ref,o=e.onChange,r=e.value;return l.createElement(n.Fragment,null,l.createElement("div",{className:"filter-label"},u("CS_SURVEY_STATUS")),l.createElement(t.Dropdown,{inputRef:a,option:i,optionKey:"code",t:u,select:o,selected:r}))}})))},Si=function(e){var i,r,u,c,s=e.registerRef,d=e.controlSearchForm,m=e.searchFormState,v=a.useTranslation().t,E=Digit.SessionStorage.get("ENGAGEMENT_TENANTS"),f=Digit.ULBService.getCurrentTenantId(),p=Digit.SessionStorage.get("citizen.userRequestObject"),g=E.filter(function(e){var t,n;return null==p||null===(t=p.info)||void 0===t||null===(n=t.roles)||void 0===n?void 0:n.some(function(t){return(null==t?void 0:t.tenantId)===(null==e?void 0:e.code)})}).sort(h),_=n.useMemo(function(){return E.filter(function(e){return e.code===f})},[E]);return l.createElement(n.Fragment,null,l.createElement(t.SearchField,null,l.createElement("label",null,v("LABEL_FOR_ULB")),l.createElement(o.Controller,{rules:{required:!0},defaultValue:null==_?void 0:_[0],render:function(e){return l.createElement(t.Dropdown,{option:g,optionKey:"i18nKey",selected:e.value,select:function(t){return e.onChange(t)},t:v})},name:"tenantIds",control:d})),l.createElement(t.SearchField,null,l.createElement("label",null,v("CS_SURVEY_NAME")),l.createElement(t.TextInput,{name:"title",type:"text",inputRef:s({maxLength:{value:60,message:v("EXCEEDS_60_CHAR_LIMIT")}})}),l.createElement(t.CardLabelError,null,null==m||null===(i=m.errors)||void 0===i||null===(r=i.title)||void 0===r?void 0:r.message)),l.createElement(t.SearchField,null,l.createElement("label",null,v("EVENTS_POSTEDBY_LABEL")),l.createElement(t.TextInput,{name:"postedBy",type:"text",inputRef:s({maxLength:{value:30,message:v("EXCEEDS_30_CHAR_LIMIT")}})}),l.createElement(t.CardLabelError,null,null==m||null===(u=m.errors)||void 0===u||null===(c=u.postedBy)||void 0===c?void 0:c.message)))},yi=function(e){var o,r=e.parentRoute,u=a.useTranslation().t,s=Digit.ULBService.getCurrentTenantId(),d=Digit.SessionStorage.get("ENGAGEMENT_TENANTS"),m=Digit.UserService.getUser().info,v=d.filter(function(e){var t;return null==m||null===(t=m.roles)||void 0===t?void 0:t.some(function(t){return(null==t?void 0:t.tenantId)===(null==e?void 0:e.code)})}),E=[{code:"ALL",name:""+u("ES_COMMON_ALL")},{code:"ACTIVE",name:""+u("ES_COMMON_ACTIVE")},{code:"INACTIVE",name:""+u("ES_COMMON_INACTIVE")}],f={tenantIds:v[0],postedBy:"",title:""},p={status:E[0]},g={sortBy:"",limit:10,offset:0,sortOrder:"DESC"},h=Digit.SessionStorage.get("CITIZENSURVEY.INBOX"),_=n.useMemo(function(){return h||{filterForm:p,searchForm:f,tableForm:g}},[Object.values((null==h?void 0:h.filterForm)||{}),Object.values((null==h?void 0:h.searchForm)||{}),Object.values((null==h?void 0:h.tableForm)||{})]),S=n.useReducer(function(e,t){switch(t.action){case"mutateSearchForm":return Digit.SessionStorage.set("CITIZENSURVEY.INBOX",c({},e,{searchForm:t.data})),c({},e,{searchForm:t.data});case"mutateFilterForm":return Digit.SessionStorage.set("CITIZENSURVEY.INBOX",c({},e,{filterForm:t.data})),c({},e,{filterForm:t.data});case"mutateTableForm":return Digit.SessionStorage.set("CITIZENSURVEY.INBOX",c({},e,{tableForm:t.data})),c({},e,{tableForm:t.data})}},_),y=S[0],C=S[1],T=Digit.Hooks.survey.useSurveyInbox(y),D=T.data,b=void 0===D?{}:D,N=b.Surveys,A=b.TotalCount,O=T.isLoading,w={logoIcon:l.createElement(t.DocumentIcon,null),headerText:"CS_COMMON_SURVEYS",links:[{text:u("CS_COMMON_NEW_SURVEY"),link:"/"+(null===(o=window)||void 0===o?void 0:o.contextPath)+"/employee/engagement/surveys/inbox/create"}]},L=n.useCallback(function(e){return l.createElement(Si,{registerRef:e.registerRef,searchFormState:e.searchFormState,controlSearchForm:e.controlSearchForm})},[]),I=n.useCallback(function(e){return l.createElement(_i,{statuses:E,registerRef:e.registerRef,controlFilterForm:e.controlFilterForm,setFilterFormValue:e.setFilterFormValue,filterFormState:null==y?void 0:y.filterForm,getFilterFormValue:e.getFilterFormValue})},[E]),R={SearchFormFields:L,onSearchFormSubmit:function(e){C({action:"mutateTableForm",data:c({},y.tableForm,{offset:0})}),e.hasOwnProperty("")&&(null==e||delete e[""]),C({action:"mutateSearchForm",data:e})},searchFormDefaultValues:null==y?void 0:y.searchForm,resetSearchFormDefaultValues:f,onSearchFormReset:function(e){e("postedBy",""),e("title",""),e("tenantIds",s),C({action:"mutateSearchForm",data:f})}},x={FilterFormFields:I,onFilterFormSubmit:function(e){e.hasOwnProperty("")&&(null==e||delete e[""]),C({action:"mutateFilterForm",data:e})},filterFormDefaultValues:null==y?void 0:y.filterForm,resetFilterFormDefaultValues:p,onFilterFormReset:function(e){e("status",E[0]),C({action:"mutateFilterForm",data:p})}},M=function(e){var o,r,u,s,d=e.parentRoute,m=e.onPageSizeChange,v=e.formState,E=e.totalCount,f=e.table,p=e.dispatch,g=e.inboxStyles,h=void 0===g?{}:g,_=function(e){return l.createElement("span",{className:"cell-text styled-cell"},e)},S=a.useTranslation().t,y=n.useMemo(function(){return[{Header:S("CS_SURVEY_TITLE"),accessor:"uuid",Cell:function(e){var t=e.row;return l.createElement("div",null,l.createElement(i.Link,{to:d+"/surveys/inbox/details/"+t.original.uuid},l.createElement("span",{className:"link"},t.original.title)))}},{Header:S("EVENTS_START_DATE_LABEL"),accessor:"startDate",Cell:function(e){var t,n,l=e.row;return null!==(t=l.original)&&void 0!==t&&t.startDate?_(Ae(new Date(null===(n=l.original)||void 0===n?void 0:n.startDate),"dd/MM/yyyy")):""}},{Header:S("EVENTS_END_DATE_LABEL"),accessor:"endDate",Cell:function(e){var t,n,l=e.row;return null!==(t=l.original)&&void 0!==t&&t.endDate?_(Ae(new Date(null===(n=l.original)||void 0===n?void 0:n.endDate),"dd/MM/yyyy")):""}},{Header:S("CS_RESPONSE_COUNT"),accessor:"answersCount",Cell:function(e){var t,n,l=e.row;return null!==(t=l.original)&&void 0!==t&&t.answersCount?_(Number(null===(n=l.original)||void 0===n?void 0:n.answersCount)):"-"}},{Header:l.createElement("div",null,S("EVENTS_STATUS_LABEL"),l.createElement("div",{className:"tooltip"},l.createElement(t.InfoBannerIcon,{fill:"#0b0c0c",style:!0}),l.createElement("span",{className:"tooltiptext",style:{whiteSpace:"pre-wrap",fontSize:"small",wordWrap:"break-word"}},""+S("SURVEY_STATUS_TOOLTIP")))),accessor:"status",Cell:function(e){var t,n;return"active"===(null==(n=null===(t=e.row.original)||void 0===t?void 0:t.status)?void 0:n.toLowerCase())?l.createElement("span",{className:"sla-cell-success"},n):l.createElement("span",{className:"sla-cell-error"},n)}},{Header:S("EVENTS_POSTEDBY_LABEL"),accessor:function(e){return e.postedBy}},{Header:S("CS_SURVEY_RESULTS"),accessor:"results",Cell:function(e){return l.createElement("div",{style:{display:"flex",justifyContent:"center"}},l.createElement(i.Link,{to:d+"/surveys/inbox/results/"+e.row.original.uuid},l.createElement("span",{className:"link"},l.createElement("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{d:"M5.5 18H0V6H5.5V18ZM12.75 0H7.25V18H12.75V0ZM20 8H14.5V18H20V8Z",fill:"#F47738"})))))}}]});return{getCellProps:function(e){return{style:{padding:"20px 18px",fontSize:"16px"}}},disableSort:!1,autoSort:!0,manualPagination:!0,initSortI:"endDate",onPageSizeChange:m,currentPage:parseInt((null===(o=v.tableForm)||void 0===o?void 0:o.offset)/(null===(r=v.tableForm)||void 0===r?void 0:r.limit)),onNextPage:function(){var e,t;return p({action:"mutateTableForm",data:c({},v.tableForm,{offset:parseInt(null===(e=v.tableForm)||void 0===e?void 0:e.offset)+parseInt(null===(t=v.tableForm)||void 0===t?void 0:t.limit)})})},onPrevPage:function(){var e,t;return p({action:"mutateTableForm",data:c({},v.tableForm,{offset:parseInt(null===(e=v.tableForm)||void 0===e?void 0:e.offset)-parseInt(null===(t=v.tableForm)||void 0===t?void 0:t.limit)})})},pageSizeLimit:null===(u=v.tableForm)||void 0===u?void 0:u.limit,totalRecords:parseInt(E),onSearch:null==v||null===(s=v.searchForm)||void 0===s?void 0:s.message,data:f,columns:y,noResultsMessage:"CS_NO_SURVEYS_FOUND",inboxStyles:c({},h)}}(c({},{parentRoute:r,onPageSizeChange:function(e){C({action:"mutateTableForm",data:c({},y.tableForm,{limit:e.target.value})})},formState:y,totalCount:A,table:N,noResultsMessage:"CS_SURVEYS_NOT_FOUND",dispatch:C,inboxStyles:{overflowX:"scroll",overflowY:"hidden"}})),P=function(e){var t=e.parentRoute,n=e.table,l=a.useTranslation().t;return{data:null==n?void 0:n.map(function(e){var t,n=e.title,a=e.startDate,i=e.endDate,o=e.answersCount,r=e.status,u=e.postedBy;return(t={})[l("CS_SURVEY_TITLE")]=n,t[l("EVENTS_START_DATE_LABEL")]=Ae(new Date(a),"dd/MM/yyyy"),t[l("EVENTS_END_DATE_LABEL")]=Ae(new Date(i),"dd/MM/yyyy"),t[l("CS_RESPONSE_COUNT")]=o,t[l("EVENTS_STATUS_LABEL")]=r,t[l("EVENTS_POSTEDBY_LABEL")]=u,t}),linkPrefix:t+"/inbox/",serviceRequestIdKey:l("TL_COMMON_TABLE_COL_APP_NO")}}({parentRoute:r,table:N});return l.createElement(t.InboxComposer,c({isInboxLoading:O,PropsForInboxLinks:w},R,x,{propsForInboxMobileCards:P,propsForInboxTable:M,formState:y}))},Ci=function(e){var a,i,r,u,c,s,d,m=e.t,v=e.registerRef,E=e.controlSurveyForm,f=e.surveyFormState,p=e.surveyFormData,g=e.disableInputs,_=e.enableDescriptionOnly,S=Digit.SessionStorage.get("ENGAGEMENT_TENANTS"),y=Digit.ULBService.getCurrentTenantId(),C=Digit.UserService.getUser().info,T=S.filter(function(e){var t;return null==C||null===(t=C.roles)||void 0===t?void 0:t.some(function(t){return(null==t?void 0:t.tenantId)===(null==e?void 0:e.code)})}).sort(h),D=n.useMemo(function(){return S.filter(function(e){return e.code===y})},[S]);return l.createElement("div",{className:"surveydetailsform-wrapper"},l.createElement("span",{className:"surveyformfield"},l.createElement("label",null,m("LABEL_FOR_ULB")+" * :"),l.createElement(o.Controller,{name:"tenantIds",control:E,defaultValue:D,rules:{required:!0},render:function(e){return n.useMemo(function(){var n;return null==e||null===(n=e.value)||void 0===n?void 0:n.map(function(n,a){return l.createElement(t.RemoveableTag,{key:a,text:n.name,disabled:(i=g,o=_,!(o||!i)||!!o),onClick:function(){var t;e.onChange(null==e||null===(t=e.value)||void 0===t?void 0:t.filter(function(e){return e.code!==n.code}))}});var i,o})},[null==e?void 0:e.value]),l.createElement("div",{style:{display:"grid",gridAutoFlow:"row"}},l.createElement(t.MultiSelectDropdown,{options:T,isSurvey:!0,optionsKey:"i18nKey",props:e,isPropsNeeded:!0,onSelect:function(t){var n,l;e.onChange([].concat((null===(n=p("tenantIds"))||void 0===n||null===(l=n.filter)||void 0===l?void 0:l.call(n,function(e){return t.code!==(null==e?void 0:e.code)}))||[],[t]))},selected:null==e?void 0:e.value,defaultLabel:m("ES_COMMON_USER_ULBS"),defaultUnit:m("CS_SELECTED_TEXT")}))}}),(null==f||null===(a=f.errors)||void 0===a?void 0:a.tenantIds)&&l.createElement(t.CardLabelError,null,m("ES_ERROR_REQUIRED"))),l.createElement("span",{className:"surveyformfield"},l.createElement("label",null,m("CS_SURVEY_NAME")+" * :"),l.createElement(t.TextInput,{name:"title",type:"text",inputRef:v({required:m("ES_ERROR_REQUIRED"),maxLength:{value:60,message:m("EXCEEDS_60_CHAR_LIMIT")},pattern:{value:/^[A-Za-z_-][A-Za-z0-9_\ -]*$/,message:m("ES_SURVEY_DONT_START_WITH_NUMBER")}}),disable:g}),(null==f||null===(i=f.errors)||void 0===i?void 0:i.title)&&l.createElement(t.CardLabelError,null,null==f||null===(r=f.errors)||void 0===r||null===(u=r.title)||void 0===u?void 0:u.message)),l.createElement("span",{className:"surveyformfield"},l.createElement("label",null,m("CS_SURVEY_DESCRIPTION")+" :"),l.createElement(t.TextInput,{name:"description",type:"text",inputRef:v({maxLength:{value:140,message:m("EXCEEDS_140_CHAR_LIMIT")},pattern:{value:/^[A-Za-z_-][A-Za-z0-9_\ -]*$/,message:m("ES_SURVEY_DONT_START_WITH_NUMBER")}}),disable:_?!_:g}),(null==f||null===(c=f.errors)||void 0===c?void 0:c.description)&&l.createElement(t.CardLabelError,null,null==f||null===(s=f.errors)||void 0===s||null===(d=s.description)||void 0===d?void 0:d.message)))},Ti=function(e){var t=e.t,n=e.options,a=void 0===n?checkboxlist:n,i=e.updateOption,o=e.addOption,r=e.removeOption,u=e.createNewSurvey,c=e.formDisabled,s=e.maxLength,d=e.titleHover,m=e.inputRef;return l.createElement("div",{className:"options_checkboxes"},a.map(function(e,t){return l.createElement(Di,{key:t,index:t,title:e,updateOption:i,removeOption:r,maxLength:s,titleHover:d,inputRef:m})}),l.createElement("div",null,l.createElement("button",{className:"unstyled-button link",type:"button",disabled:!u&&c,onClick:function(){return o()}},t("CS_COMMON_ADD_OPTION"))))},Di=function(e){var a=e.index,i=e.updateOption,o=e.removeOption,r=e.maxLength,u=e.titleHover,c=e.inputRef,s=n.useState(e.title),d=s[0],m=s[1],v=n.useState(!1),E=v[0],f=v[1];return n.useEffect(function(){i({value:d,id:a})},[d]),l.createElement("div",{className:"optioncheckboxwrapper"},l.createElement(t.CheckBox,null),l.createElement("input",{ref:c,type:"text",value:d,onChange:function(e){return m(e.target.value)},onBlur:function(){return f(!1)},onFocus:function(){return f(!0)},className:E?"simple_editable-input":"simple_readonly-input",maxLength:r,title:u}),l.createElement("div",{className:"pointer",onClick:function(){return o(a)}},l.createElement(t.CloseSvg,null)))},bi=function(e){var t=e.t,n=e.options,a=void 0===n?checkboxlist:n,i=e.updateOption,o=e.addOption,r=e.removeOption,u=e.createNewSurvey,c=e.formDisabled,s=e.inputRef,d=e.maxLength,m=e.titleHover;return l.createElement("div",{className:"options_checkboxes"},a.map(function(e,t){return l.createElement(Ni,{key:t,index:t,title:e,updateOption:i,removeOption:r,inputRef:s,maxLength:d,titleHover:m})}),l.createElement("div",null,l.createElement("button",{className:"unstyled-button link",type:"button",disabled:!u&&c,onClick:function(){return o()}},t("CS_COMMON_ADD_OPTION"))))},Ni=function(e){var a=e.index,i=e.updateOption,o=e.removeOption,r=e.inputRef,u=e.maxLength,c=e.titleHover,s=n.useState(e.title),d=s[0],m=s[1],v=n.useState(!1),E=v[0],f=v[1];return n.useEffect(function(){i({value:d,id:a})},[d]),l.createElement("div",{className:"optionradiobtnwrapper"},l.createElement("input",{type:"radio",className:"customradiobutton"}),l.createElement("input",{type:"text",ref:r,value:d,onChange:function(e){return m(e.target.value)},onBlur:function(){return f(!1)},onFocus:function(){return f(!0)},className:E?"simple_editable-input":"simple_readonly-input",maxLength:u,title:c}),l.createElement("div",{className:"pointer",onClick:function(){return o(a)}},l.createElement(t.CloseSvg,null)))},Ai=function(e){var a,i,r=e.t,u=e.index,s=e.questionStatement,d=e.type,m=e.required,v=e.options,E=e.disableInputs,f=e.dispatch,p=e.isPartiallyEnabled,g=e.addOption,h=e.formDisabled,_=[{title:r("Surveys_Short_Answer"),value:"SHORT_ANSWER_TYPE"},{title:r("Surveys_Multiple_Choice"),value:"MULTIPLE_ANSWER_TYPE"},{title:r("Surveys_Check_Boxes"),value:"CHECKBOX_ANSWER_TYPE"},{title:r("Surveys_Paragraph"),value:"LONG_ANSWER_TYPE"},{title:r("Surveys_Date"),value:"DATE_ANSWER_TYPE"},{title:r("Surveys_Time"),value:"TIME_ANSWER_TYPE"}],S=_.filter(function(e){return(null==e?void 0:e.title)===d}),y=n.useState({questionStatement:s,type:d?null==S?void 0:S[0]:{title:"Short Answer",value:"SHORT_ANSWER_TYPE"},required:m,options:(null==v?void 0:v.length)>0?v:["option 1"]}),C=y[0],T=y[1],D=o.useFormContext(),b=D.register,N=D.formState,A=function(){return T(function(e){var t=c({},e);return t.options.push("option "+(t.options.length+1)),t})},O=function(e){var t=e.value,n=e.id;T(function(e){var l=c({},e);return l.options.splice(n,1,t),l})},w=function(e){1!==C.options.length&&T(function(t){var n=c({},t);return n.options.splice(e,1),n})};return n.useEffect(function(){f({type:"updateForm",payload:{index:u,formConfig:C}})},[C]),l.createElement("div",{className:"newSurveyForm_wrapper"},l.createElement("span",{className:"newSurveyForm_quesno"},r("CS_COMMON_QUESTION")+" "+(u+1)+" * :"),l.createElement("span",{className:"newSurveyForm_mainsection"},l.createElement("div",{className:"newSurveyForm_questions"},l.createElement("div",{style:{width:"80%"}},l.createElement(t.TextInput,{placeholder:r("CS_COMMON_TYPE_QUESTION"),value:C.questionStatement,onChange:function(e){T(function(t){return c({},t,{questionStatement:e.target.value})})},textInputStyle:{width:"100%"},name:"QUESTION_SURVEY_"+u,disable:E,inputRef:b({required:r("ES_ERROR_REQUIRED"),maxLength:{value:100,message:r("EXCEEDS_100_CHAR_LIMIT")},pattern:{value:/^[A-Za-z_-][A-Za-z0-9_\ -?]*$/,message:r("ES_SURVEY_DONT_START_WITH_NUMBER")}})}),(null==N?void 0:N.errors)&&l.createElement(t.CardLabelError,null,null==N||null===(a=N.errors)||void 0===a||null===(i=a["QUESTION_SURVEY_"+u])||void 0===i?void 0:i.message)),l.createElement(t.Dropdown,{option:_,select:function(e){T(function(t){return c({},t,{type:{title:e.title,value:e.value}})})},optionKey:"title",disable:E,selected:null==C?void 0:C.type})),l.createElement("div",{className:"newSurveyForm_answer"},function(e){var n,a,i,o;switch(null==e?void 0:e.title){case"Paragraph":return l.createElement("div",null,l.createElement(t.TextArea,{placeholder:"LONG ANSWER",name:"longAnsDescription",inputRef:b({maxLength:{value:500,message:r("EXCEEDS_500_CHAR_LIMIT")}})}),(null==N?void 0:N.errors)&&l.createElement(t.CardLabelError,null,null==N||null===(n=N.errors)||void 0===n||null===(a=n.longAnsDescription)||void 0===a?void 0:a.message));case"Date":return l.createElement(t.DatePicker,{stylesForInput:{width:"calc(100% - 290px)"},style:{width:"202px"}});case"Time":return l.createElement(t.TextInput,{type:"time",textInputStyle:{width:"202px"}});case"Multiple Choice":return l.createElement(bi,{maxLength:60,titleHover:r("MAX_LENGTH_60"),t:r,addOption:A,updateOption:O,removeOption:w,options:null==C?void 0:C.options,createNewSurvey:g,isPartiallyEnabled:p,formDisabled:h});case"Check Boxes":return l.createElement("div",null,l.createElement(Ti,{t:r,addOption:A,updateOption:O,removeOption:w,options:null==C?void 0:C.options,isPartiallyEnabled:p,createNewSurvey:g,formDisabled:h,maxLength:60,titleHover:r("MAX_LENGTH_60")}));default:return l.createElement("div",null,l.createElement(t.TextInput,{placeholder:"SHORT ANSWER",name:"shortAnsDescription",inputRef:b({maxLength:{value:200,message:r("EXCEEDS_200_CHAR_LIMIT")}})}),(null==N?void 0:N.errors)&&l.createElement(t.CardLabelError,null,null==N||null===(i=N.errors)||void 0===i||null===(o=i.shortAnsDescription)||void 0===o?void 0:o.message))}}(C.type)),l.createElement("div",{className:"newSurveyForm_actions"},l.createElement("div",null,l.createElement(t.CheckBox,{onChange:function(e){return T(function(e){return c({},e,{required:!e.required})})},checked:C.required,label:r("CS_COMMON_REQUIRED"),pageType:"employee",disable:E,style:{marginTop:"2px"}})),0!==u&&l.createElement("div",{className:"newSurveyForm_seprator"}),0!==u&&l.createElement("div",{className:"pointer "+(E?"disabled-btn":""),onClick:function(){return f({type:"removeForm",payload:{index:u}})}},l.createElement("div",{className:"tooltip"},l.createElement("div",{style:{display:"flex",gap:"0 4px"}},l.createElement(t.DustbinIcon,null),l.createElement("span",{className:"tooltiptext",style:{position:"absolute",width:"100px",marginLeft:"50%",fontSize:"medium"}},r("CS_INFO_DELETE"))))))))},Oi=function(e){var t=e.t,a=e.setSurveyConfig,i=e.disableInputs,o=e.isPartiallyEnabled,r=e.addOption,u=e.formDisabled,s=e.controlSurveyForm,d={question:"",answerType:"Short Answer",required:!1,options:[]},m=n.useReducer(function(e,t){var n=t.payload;switch(t.type){case"addNewForm":var l=[].concat(e,[d]);return n.setSurveyConfig("questions",l),l;case"updateForm":var a=[].concat(e);return a.splice(n.index,1,n),n.setSurveyConfig("questions",a),a;case"removeForm":if(1===e.length)return e;var i=[].concat(e);return i.splice(n.index,1),n.setSurveyConfig("questions",i),i}},e.formsConfig||[d]),v=m[0],E=m[1],f=function(e){E({type:e.type,payload:c({},e.payload,{setSurveyConfig:a})})};return l.createElement("div",{className:"surveyformslist_wrapper"},l.createElement("div",{className:"heading"},t("CS_SURVEYS_QUESTIONS")),v.length?v.map(function(e,n){return l.createElement(Ai,c({key:n},e,{addOption:r,t:t,index:n,disableInputs:i,dispatch:f,isPartiallyEnabled:o,formDisabled:u,controlSurveyForm:s}))}):null,l.createElement("div",{className:"pointer"},v.length<30&&l.createElement("button",{className:"unstyled-button link "+(i?"disabled-btn":"")+" "+(v.length>=30?"disabled-btn":"")+" ",type:"button",onClick:function(){return f({type:"addNewForm"})},disabled:v.length>=30},t("CS_COMMON_ADD_QUESTION"))))},wi=function(e){if(null==e||null==e||""==e)return"NA";var t=new Date(e),n=t.getMonth()+1,l=t.getDate();return t.getFullYear()+"-"+(n=(n>9?"":"0")+n)+"-"+(l>9?"":"0")+l},Li=function(e){var n,a,i,r,u,c,s,d,m,v=e.t,E=e.controlSurveyForm,f=e.surveyFormState,p=e.disableInputs,g=e.enableEndDateTimeOnly,h=null==f?void 0:f.errors,_=o.useFormContext().getValues,S=(new Date).getTime();return l.createElement("div",{className:"surveydetailsform-wrapper"},l.createElement("div",{className:"heading"},v("CS_COMMON_SETTINGS")),l.createElement("span",{className:"surveyformfield"},l.createElement("label",null,v("LABEL_SURVEY_START_DATE")+" * :"),l.createElement(o.Controller,{control:E,name:"fromDate",defaultValue:null==f?void 0:f.fromDate,rules:{required:!0,validate:g?null:{isValidFromDate:function(e){var t=new Date(e).getTime(),n=_("toDate")?new Date(_("toDate")).getTime():(new Date).getTime();return e===_("toDate")&&e>=wi(S)||n>=t&&e>=wi(S)}}},render:function(e){return l.createElement(t.TextInput,{type:"date",onChange:e.onChange,defaultValue:e.value,disable:p})}}),h&&(null==h?void 0:h.fromDate)&&"required"===(null==h||null===(n=h.fromDate)||void 0===n?void 0:n.type)&&l.createElement(t.CardLabelError,null,v("EVENTS_TO_DATE_ERROR_REQUIRED")),h&&(null==h?void 0:h.fromDate)&&"isValidFromDate"===(null==h||null===(a=h.fromDate)||void 0===a?void 0:a.type)&&l.createElement(t.CardLabelError,null,v("EVENTS_FROM_DATE_ERROR_INVALID"))),l.createElement("span",{className:"surveyformfield"},l.createElement("label",null,v("LABEL_SURVEY_START_TIME")+" * :"),l.createElement(o.Controller,{control:E,name:"fromTime",defaultValue:null==f?void 0:f.fromTime,rules:{required:!0,validate:{isValidFromTime:function(){return!0}}},render:function(e){return l.createElement(t.TextInput,{type:"time",onChange:e.onChange,defaultValue:e.value,disable:p})}}),h&&(null==h?void 0:h.fromTime)&&"required"===(null==h||null===(i=h.fromTime)||void 0===i?void 0:i.type)&&l.createElement(t.CardLabelError,null,v("EVENTS_TO_DATE_ERROR_REQUIRED")),h&&(null==h?void 0:h.fromTime)&&"isValidFromDate"===(null==h||null===(r=h.fromTime)||void 0===r?void 0:r.type)&&l.createElement(t.CardLabelError,null,v("EVENTS_TO_DATE_ERROR_INVALID"))),l.createElement("span",{className:"surveyformfield"},l.createElement("label",null,v("LABEL_SURVEY_END_DATE")+" * :"),l.createElement(o.Controller,{control:E,name:"toDate",defaultValue:null==f?void 0:f.toDate,rules:{required:!0,validate:{isValidToDate:function(e){return new Date(e).getTime()>=(_("fromDate")?new Date(_("fromDate")).getTime():(new Date).getTime())}}},render:function(e){return l.createElement(t.TextInput,{type:"date",onChange:e.onChange,defaultValue:e.value,disable:g?!g:p})}}),h&&(null==h?void 0:h.toDate)&&"required"===(null==h||null===(u=h.toDate)||void 0===u?void 0:u.type)&&l.createElement(t.CardLabelError,null,v("EVENTS_TO_DATE_ERROR_REQUIRED")),h&&(null==h?void 0:h.toDate)&&"isValidToDate"===(null==h||null===(c=h.toDate)||void 0===c?void 0:c.type)&&l.createElement(t.CardLabelError,null,v("EVENTS_TO_DATE_ERROR_INVALID"))," "),l.createElement("span",{className:"surveyformfield"},l.createElement("label",null,v("LABEL_SURVEY_END_TIME")+" * :"),l.createElement(o.Controller,{control:E,name:"toTime",defaultValue:null==f?void 0:f.toTime,rules:{required:!0,validate:{isValidToTime:function(){return!0}}},render:function(e){return l.createElement(t.TextInput,{type:"time",onChange:e.onChange,defaultValue:e.value,disable:g?!g:p})}}),h&&(null==h?void 0:h.toTime)&&"required"===(null==h||null===(s=h.toTime)||void 0===s?void 0:s.type)&&l.createElement(t.CardLabelError,null,v("EVENTS_TO_DATE_ERROR_REQUIRED")),h&&(null==h?void 0:h.toTime)&&"isValidToDate"===(null==h||null===(d=h.toTime)||void 0===d?void 0:d.type)&&l.createElement(t.CardLabelError,null,v("EVENTS_TO_DATE_ERROR_INVALID"))),l.createElement("span",{className:"surveyformfield"},l.createElement("label",null,v("LABEL_SURVEY_EMAIL_MOBILE")+" * :"),l.createElement(o.Controller,{control:E,name:"collectCitizenInfo",defaultValue:null==f?void 0:f.collectCitizenInfo,rules:{required:!0},render:function(e){return l.createElement(t.RadioButtons,{onSelect:e.onChange,selectedOption:e.value,optionsKey:"name",options:[{code:!0,name:v("ES_COMMON_YES")},{code:!1,name:v("ES_COMMON_NO")}],disabled:p})}}),h&&(null==h?void 0:h.collectCitizenInfo)&&"required"===(null==h||null===(m=h.collectCitizenInfo)||void 0===m?void 0:m.type)&&l.createElement(t.CardLabelError,null,v("EVENTS_TO_DATE_ERROR_REQUIRED"))))},Ii=["register","control","handleSubmit","setValue","getValues","reset","formState","clearErrors"],Ri=function(e){var a=e.t,i=e.onSubmit,r=o.useForm({defaultValues:e.initialFormValues}),u=r.register,d=r.control,m=r.handleSubmit,v=r.setValue,E=r.getValues,f=r.reset,p=r.formState,g=r.clearErrors,h=s(r,Ii);return n.useEffect(function(){u("questions")},[]),l.createElement("div",{style:{margin:"8px"}},l.createElement(o.FormProvider,c({register:u,control:d,handleSubmit:m,setValue:v,getValues:E,reset:f,formState:p,clearErrors:g},h),l.createElement("form",{onSubmit:m(i)},l.createElement(t.Card,null,l.createElement(Ci,{t:a,registerRef:u,controlSurveyForm:d,surveyFormState:p,surveyFormData:E}),l.createElement(Oi,{t:a,setSurveyConfig:v,addOption:!0,controlSurveyForm:d}),l.createElement(Li,{t:a,controlSurveyForm:d,surveyFormState:p})),l.createElement(t.ActionBar,null,l.createElement(t.SubmitBar,{label:a("CS_CREATE_SURVEY"),submit:"submit"})))))},xi={"Short Answer":"SHORT_ANSWER_TYPE",Paragraph:"LONG_ANSWER_TYPE","Multiple Choice":"MULTIPLE_ANSWER_TYPE","Check Boxes":"CHECKBOX_ANSWER_TYPE",Date:"DATE_ANSWER_TYPE",Time:"TIME_ANSWER_TYPE"},Mi=function(e){if(void 0===e&&(e=[]),(e=e.map(function(e){var t;return null!=e&&null!==(t=e.formConfig)&&void 0!==t&&t.type?e:c({},e,{formConfig:c({},null==e?void 0:e.formConfig,{type:"Short Answer"})})})).length)return e.map(function(e,t){var n=e.formConfig,l=n.type,a={questionStatement:n.questionStatement,required:n.required,type:xi[l.title]};return"Multiple Choice"!==(null==l?void 0:l.title)&&"Check Boxes"!==(null==l?void 0:l.title)||(a.options=n.options),a})},Pi=function(){var e=a.useTranslation().t,o=i.useHistory(),r=(Digit.ULBService.getCurrentTenantId(),Digit.SessionStorage.get("ENGAGEMENT_TENANTS")),u=Digit.UserService.getUser().info,c={fromDate:"",fromTime:"",toDate:"",toTime:"",questions:{},collectCitizenInfo:"",tenantIds:r.filter(function(e){var t;return null==u||null===(t=u.roles)||void 0===t?void 0:t.some(function(t){return(null==t?void 0:t.tenantId)===(null==e?void 0:e.code)})})};return l.createElement(n.Fragment,null,l.createElement(t.Header,null,e("CREATE_NEW_SURVEY")),l.createElement("div",{style:{marginLeft:"-20px"}},l.createElement(Ri,{t:e,onSubmit:function(e){var t,n=e.collectCitizenInfo,l=e.title,a=e.description,i=e.tenantIds,r=e.fromDate,u=e.toDate,c=e.fromTime,s=e.toTime,d=Mi(e.questions),m={SurveyEntity:{tenantIds:i.map(function(e){return e.code}),title:l,description:a,collectCitizenInfo:n.code,startDate:new Date(r+" "+c).getTime(),endDate:new Date(u+" "+s).getTime(),questions:d}};o.push("/"+(null===(t=window)||void 0===t?void 0:t.contextPath)+"/employee/engagement/surveys/create-response",m)},initialFormValues:c})))},Fi=function(e){var n,i,o,r,u=a.useTranslation().t;return l.createElement(t.Banner,{message:u(e.mutation.isSuccess?"SURVEY_FORM_CREATED":"SURVEY_FORM_FAILURE"),applicationNumber:(n=e.mutation,n.isSuccess?null===(i=n.data)||void 0===i||null===(o=i.Surveys)||void 0===o||null===(r=o[0])||void 0===r?void 0:r.uuid:""),info:e.mutation.isSuccess?u("SURVEY_FORM_ID"):"",successful:e.mutation.isSuccess})},Ui=function(e){var o,u,c=r.useQueryClient(),s=a.useTranslation().t,d=(Digit.ULBService.getCurrentTenantId(),Digit.Hooks.survey.useCreate()),m=e.location.state,v=i.useHistory(),E=n.useState(!1),f=E[0],p=E[1];if(n.useEffect(function(){m&&d.mutate(m,{onSuccess:function(){c.clear(),window.history.replaceState(null,"CREATE_SURVEY_STATE")}})},[]),d.isLoading&&!d.isIdle)return l.createElement(t.Loader,null);var g=null===(o=d.data)||void 0===o||null===(u=o.Surveys)||void 0===u?void 0:u[0];return l.createElement(t.Card,null,l.createElement(Fi,{t:s,mutation:d}),l.createElement(t.CardText,null,d.isSuccess?s("SURVEY_FORM_CREATION_MESSAGE",{surveyName:null==g?void 0:g.title,fromDate:Digit.DateUtils.ConvertTimestampToDate(null==g?void 0:g.startDate),toDate:Digit.DateUtils.ConvertTimestampToDate(null==g?void 0:g.endDate)}):null),l.createElement(t.ActionBar,null,l.createElement("button",{onClick:function(){p(function(e){return!e})}},l.createElement(t.SubmitBar,{label:"Action"}),f&&l.createElement(t.Menu,{options:[s("GO_BACK_TO_HOME"),s("CREATE_ANOTHER_SURVEY")],onSelect:function(e){var t,n;e===s("GO_BACK_TO_HOME")?v.push("/"+(null===(t=window)||void 0===t?void 0:t.contextPath)+"/employee"):e===s("CREATE_ANOTHER_SURVEY")&&v.push("/"+(null===(n=window)||void 0===n?void 0:n.contextPath)+"/employee/engagement/surveys/create")}}))))},Bi=function(e){var n,i,o,r,u,c,s,d,m,v,E=a.useTranslation().t;return l.createElement(t.Banner,{message:E(e.isSuccess?"ENGAGEMENT_SURVEY_UPDATED":"ENGAGEMENT_SURVEY_UPDATE_FAILURE"),applicationNumber:(n=e.mutation,n.isSuccess&&null!=n&&null!==(i=n.data)&&void 0!==i&&null!==(o=i.Surveys)&&void 0!==o&&null!==(r=o[0])&&void 0!==r&&r.uuid?null==n||null===(d=n.data)||void 0===d||null===(m=d.Surveys)||void 0===m||null===(v=m[0])||void 0===v?void 0:v.uuid:n.isSuccess?null===(u=n.data)||void 0===u||null===(c=u.Documents)||void 0===c||null===(s=c[0])||void 0===s?void 0:s.uuid:""),info:e.isSuccess?E("SURVEY_FORM_ID"):"",successful:e.isSuccess})},ki=function(e){var o,u=r.useQueryClient(),c=a.useTranslation().t,s=(Digit.ULBService.getCurrentTenantId(),Digit.Hooks.survey.useUpdate()),d=e.location.state;return n.useEffect(function(){d&&s.mutate(d,{onSuccess:function(){u.clear(),window.history.replaceState(null,"UPDATE_SURVEY_STATE")}})},[]),s.isLoading||s.isIdle?l.createElement(t.Loader,null):l.createElement("div",null,l.createElement(t.Card,null,l.createElement(Bi,{t:c,data:s.data,mutation:s,isSuccess:s.isSuccess,isLoading:s.isIdle||s.isLoading})),l.createElement(t.ActionBar,null,l.createElement(i.Link,{to:"/"+(null===(o=window)||void 0===o?void 0:o.contextPath)+"/employee"},l.createElement(t.SubmitBar,{label:c("CORE_COMMON_GO_TO_HOME")}))))},Vi=function(e){var n=a.useTranslation().t;return l.createElement(t.Banner,{message:n(e.isSuccess?"ENGAGEMENT_SURVEY_DELETED":"ENGAGEMENT_SURVEY_DELETE_FAILURE"),successful:e.isSuccess})},Hi=function(e){var o,u,c=r.useQueryClient(),s=a.useTranslation().t,d=(Digit.ULBService.getCurrentTenantId(),Digit.Hooks.survey.useDelete()),m=e.location.state;return n.useEffect(function(){m&&d.mutate(m,{onSuccess:function(){c.clear(),window.history.replaceState(null,"DELETE_SURVEY_STATE")}})},[]),d.isLoading||d.isIdle?l.createElement(t.Loader,null):l.createElement("div",null,l.createElement(t.Card,null,l.createElement(Vi,{t:s,data:d.data,mutation:d,uuid:null==m||null===(o=m.DocumentEntity)||void 0===o?void 0:o.uuid,isSuccess:d.isSuccess,isLoading:d.isIdle||d.isLoading})),l.createElement(t.ActionBar,null,l.createElement(i.Link,{to:"/"+(null===(u=window)||void 0===u?void 0:u.contextPath)+"/employee"},l.createElement(t.SubmitBar,{label:s("CORE_COMMON_GO_TO_HOME")}))))},Wi=function(e){var n=e.t,a=e.userType;return a=a||Digit.SessionStorage.get("userType"),l.createElement(l.Fragment,null,l.createElement("div",{style:"citizen"===a?{maxWidth:"970px"}:{width:"80%"}},l.createElement("div",{className:"info-banner-wrap",style:window.location.href.includes("/connection-details")?{color:"#3498DB",margin:"0px"}:{color:"#3498DB"}},l.createElement("div",null,l.createElement(t.InfoBannerIcon,null),l.createElement("h2",{style:{color:"#3498DB"}},n("SURVEY_INFO_HEADER")))," "+n("SURVEY_INFO_LABEL"))))},ji=function(e){var a,i=e.t,r=e.onEdit,u=e.menuOptions,s=e.initialSurveysConfig,d=e.isFormDisabled,m=e.isPartiallyEnabled,v=e.displayMenu,E=e.setDisplayMenu,f=e.onActionSelect,p=e.isSurveyActive,g="ACTIVE"===(null==s?void 0:s.status)?!m:d,h=o.useForm({defaultValues:c({},s,{collectCitizenInfo:null!=s&&null!==(a=s.collectCitizenInfo)&&void 0!==a&&a.code?{code:!0,name:i("ES_COMMON_YES")}:{code:!1,name:i("ES_COMMON_NO")}})}),_=h.register,S=h.control,y=h.handleSubmit,C=h.setValue,T=h.getValues,D=h.reset,b=h.formState,N=h.clearErrors;return n.useEffect(function(){_("questions")},[]),l.createElement(o.FormProvider,{register:_,control:S,handleSubmit:y,setValue:C,getValues:T,reset:D,formState:b,clearErrors:N},l.createElement("form",{onSubmit:y(r)},l.createElement(t.Card,null,m&&"ACTIVE"===(null==s?void 0:s.status)&&l.createElement(Wi,{t:i}),l.createElement(Ci,{t:i,registerRef:_,controlSurveyForm:S,surveyFormState:b,disableInputs:d,enableDescriptionOnly:m,surveyFormData:T}),l.createElement(Oi,{t:i,setSurveyConfig:C,disableInputs:d,formsConfig:s.questions,isPartiallyEnabled:m,formDisabled:d,controlSurveyForm:S}),l.createElement(Li,{t:i,controlSurveyForm:S,surveyFormState:b,disableInputs:d,enableEndDateTimeOnly:m}),l.createElement("span",{className:"edit-action-btn"},!p&&!d&&l.createElement(t.SubmitBar,{label:i("CS_EDIT_SURVEY"),submit:"submit",disabled:m?!m:d}),m&&p&&l.createElement(t.SubmitBar,{label:i("CS_EDIT_SURVEY"),submit:"submit",disabled:m?!m:d})))),g&&l.createElement(t.ActionBar,null,v?l.createElement(t.Menu,{localeKeyPrefix:"ES_SURVEY",options:u,t:i,onSelect:f}):null,l.createElement(t.SubmitBar,{label:i("ES_COMMON_TAKE_ACTION"),onSubmit:function(){return E(!v)}})))},zi=function(e){return l.createElement("h1",{className:"heading-m"},e.t(e.heading))},Gi=function(){return l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},Yi=function(e){return l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(Gi,null))},qi=function(e){var t=e.t,n=e.title;return l.createElement("div",{className:"confirmation_box"},l.createElement("span",null," ",t("CONFIRM_DELETE_MSG_NEW")," ",l.createElement("b",null," "+n),t("COMPLETELY_DELETE")," ",l.createElement("br",null),l.createElement("br",null),t("COMPLETELY_DELETE_WARN_MSG")))},Ki=function(e){var n=e.t,a=e.surveyTitle,i=e.closeModal,o=e.actionCancelLabel,r=e.actionCancelOnSubmit,u=e.actionSaveLabel,c=e.actionSaveOnSubmit;return l.createElement(t.Modal,{headerBarMain:l.createElement(zi,{t:n,heading:e.heading}),headerBarEnd:l.createElement(Yi,{onClick:i}),actionCancelLabel:n(o),actionCancelOnSubmit:r,actionSaveLabel:n(u),actionSaveOnSubmit:c,formId:"modal-action"},l.createElement(qi,{t:n,title:a}))},Xi=function(e){return l.createElement("h1",{className:"heading-m"},e.t(e.heading))},Qi=function(){return l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},Ji=function(e){return l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(Qi,null))},Zi=function(){return!0},$i=function(){return!0},eo=function(){return!0},to=function(){return!0},no=function(e){var n,a,i,r,u,c,s,d,m=e.t,v=e.heading,E=e.surveyTitle,f=e.initialValues,p=e.onSubmit,g=e.closeModal,h=e.actionCancelLabel,_=e.actionCancelOnSubmit,S=e.actionSaveLabel,y=e.actionSaveOnSubmit,C=o.useForm({defaultValues:{fromDate:f.fromDate,fromTime:f.fromTime,toDate:f.toDate,toTime:f.toTime}}),T=C.control,D=C.handleSubmit,b=C.formState,N=null==b?void 0:b.errors;return l.createElement(t.Modal,{headerBarMain:l.createElement(Xi,{t:m,heading:v}),headerBarEnd:l.createElement(Ji,{onClick:g}),actionCancelLabel:m(h),actionCancelOnSubmit:_,actionSaveLabel:m(S),actionSaveOnSubmit:D(y),formId:"modal-action",headerBarMainStyle:{marginLeft:"20px"}},l.createElement(t.Card,{style:{boxShadow:"none"}},l.createElement("p",null,m("CONFIRM_ACTIVE_SURVEY_MSG")," ",l.createElement("br",null)," ",E," ",m("CONFIRM_ACTIVE_SURVEY_MSG_END")),l.createElement("br",null),l.createElement("form",{onSubmit:D(p)},l.createElement("span",{className:"surveyformfield"},l.createElement("label",null,m("LABEL_SURVEY_START_DATE")),l.createElement(o.Controller,{control:T,name:"fromDate",defaultValue:null==b?void 0:b.fromDate,rules:{required:!0,validate:{isValidFromDate:Zi}},render:function(e){return l.createElement(t.TextInput,{type:"date",isRequired:!0,onChange:e.onChange,defaultValue:e.value})}}),N&&(null==N?void 0:N.fromDate)&&"required"===(null==N||null===(n=N.fromDate)||void 0===n?void 0:n.type)&&l.createElement(t.CardLabelError,null,m("EVENTS_TO_DATE_ERROR_REQUIRED")),N&&(null==N?void 0:N.fromDate)&&"isValidToDate"===(null==N||null===(a=N.fromDate)||void 0===a?void 0:a.type)&&l.createElement(t.CardLabelError,null,m("EVENTS_TO_DATE_ERROR_INVALID"))),l.createElement("span",{className:"surveyformfield"},l.createElement("label",null,m("LABEL_SURVEY_START_TIME")),l.createElement(o.Controller,{control:T,name:"fromTime",defaultValue:null==b?void 0:b.fromTime,rules:{required:!0,validate:{isValidFromTime:eo}},render:function(e){return l.createElement(t.TextInput,{type:"time",isRequired:!0,onChange:e.onChange,defaultValue:e.value})}}),N&&(null==N?void 0:N.fromTime)&&"required"===(null==N||null===(i=N.fromTime)||void 0===i?void 0:i.type)&&l.createElement(t.CardLabelError,null,m("EVENTS_TO_DATE_ERROR_REQUIRED")),N&&(null==N?void 0:N.fromTime)&&"isValidToDate"===(null==N||null===(r=N.fromTime)||void 0===r?void 0:r.type)&&l.createElement(t.CardLabelError,null,m("EVENTS_TO_DATE_ERROR_INVALID"))),l.createElement("span",{className:"surveyformfield"},l.createElement("label",null,m("LABEL_SURVEY_END_DATE")),l.createElement(o.Controller,{control:T,name:"toDate",defaultValue:null==b?void 0:b.toDate,rules:{required:!0,validate:{isValidToDate:$i}},render:function(e){return l.createElement(t.TextInput,{type:"date",isRequired:!0,onChange:e.onChange,defaultValue:e.value})}}),N&&(null==N?void 0:N.toDate)&&"required"===(null==N||null===(u=N.toDate)||void 0===u?void 0:u.type)&&l.createElement(t.CardLabelError,null,m("EVENTS_TO_DATE_ERROR_REQUIRED")),N&&(null==N?void 0:N.toDate)&&"isValidToDate"===(null==N||null===(c=N.toDate)||void 0===c?void 0:c.type)&&l.createElement(t.CardLabelError,null,m("EVENTS_TO_DATE_ERROR_INVALID"))," "),l.createElement("span",{className:"surveyformfield"},l.createElement("label",null,m("LABEL_SURVEY_END_TIME")),l.createElement(o.Controller,{control:T,name:"toTime",defaultValue:null==b?void 0:b.toTime,rules:{required:!0,validate:{isValidToTime:to}},render:function(e){return l.createElement(t.TextInput,{type:"time",isRequired:!0,onChange:e.onChange,defaultValue:e.value})}}),N&&(null==N?void 0:N.toTime)&&"required"===(null==N||null===(s=N.toTime)||void 0===s?void 0:s.type)&&l.createElement(t.CardLabelError,null,m("EVENTS_TO_DATE_ERROR_REQUIRED")),N&&(null==N?void 0:N.toTime)&&"isValidToDate"===(null==N||null===(d=N.toTime)||void 0===d?void 0:d.type)&&l.createElement(t.CardLabelError,null,m("EVENTS_TO_DATE_ERROR_INVALID"))))))},lo=function(e){return l.createElement("h1",{className:"heading-m"},e.t(e.heading))},ao=function(){return l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},l.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},io=function(e){return l.createElement("div",{className:"icon-bg-secondary",onClick:e.onClick},l.createElement(ao,null))},oo=function(e){var t=e.t,n=e.title;return l.createElement("div",{className:"confirmation_box"},l.createElement("span",null," ",t("CONFIRM_INACTIVE_SURVEY_MSG_NEW")," ",l.createElement("b",null," "+n),t("CONFIRM_INACTIVE_SURVEY_MSG_TO_INACTIVE"),l.createElement("br",null),l.createElement("br",null),t("CONFIRM_INACTIVE_SURVEY_WARN_MSG")))},ro=function(e){var n=e.t,a=e.surveyTitle,i=e.closeModal,o=e.actionCancelLabel,r=e.actionCancelOnSubmit,u=e.actionSaveLabel,c=e.actionSaveOnSubmit;return l.createElement(t.Modal,{headerBarMain:l.createElement(lo,{t:n,heading:e.heading}),headerBarEnd:l.createElement(io,{onClick:i}),actionCancelLabel:n(o),actionCancelOnSubmit:r,actionSaveLabel:n(u),actionSaveOnSubmit:c,formId:"modal-action"},l.createElement(oo,{t:n,title:a}))},uo=function(e){if(e)return c({},e,{type:xi[e.type],options:null==e?void 0:e.options})},co={SHORT_ANSWER_TYPE:"Short Answer",LONG_ANSWER_TYPE:"Paragraph",MULTIPLE_ANSWER_TYPE:"Multiple Choice",CHECKBOX_ANSWER_TYPE:"Check Boxes",DATE_ANSWER_TYPE:"Date",TIME_ANSWER_TYPE:"Time"},so=function(e){window.Digit.Utils.browser.isMobile();var o,r,u,s,d,m=i.useParams().id,v=a.useTranslation().t,E=i.useHistory(),f=n.useState(!1),p=f[0],g=f[1],h=n.useState(!0),_=h[0],S=h[1],y=n.useState(!1),C=y[0],T=y[1],D=n.useState(!1),b=D[0],N=D[1],A=n.useState(void 0),O=A[0],w=A[1],L=Digit.ULBService.getCurrentTenantId(),I=(null===(o=window)||void 0===o||null===(r=o.Digit.SessionStorage)||void 0===r||null===(u=r.get("CITIZENSURVEY.INBOX"))||void 0===u||null===(s=u.searchForm)||void 0===s||null===(d=s.tenantIds)||void 0===d?void 0:d.code)||L,R=Digit.Hooks.survey.useSearch({tenantIds:I,uuid:m},{select:function(e){var t,n=null==e||null===(t=e.Surveys)||void 0===t?void 0:t[0];return{uuid:n.uuid,title:n.title,description:n.description,collectCitizenInfo:{code:n.collectCitizenInfo},fromDate:Ae(new Date(n.startDate),"yyyy-MM-dd"),toDate:Ae(new Date(n.endDate),"yyyy-MM-dd"),fromTime:Ae(new Date(n.startDate),"hh:mm"),toTime:Ae(new Date(n.endDate),"hh:mm"),questions:n.questions.map(function(e){return{questionStatement:e.questionStatement,type:co[e.type],required:e.required,options:e.options,uuid:e.uuid,surveyId:e.surveyId}}),status:n.status}}}),x=R.isLoading,M=R.data,P=n.useMemo(function(){var e=new Date((null==M?void 0:M.fromDate)+" "+(null==M?void 0:M.fromTime)).getTime(),t=new Date((null==M?void 0:M.toDate)+" "+(null==M?void 0:M.toTime)).getTime(),n=(new Date).getTime();return e<n&&n<t},[null==M?void 0:M.fromDate,null==M?void 0:M.fromTime,null==M?void 0:M.toDate,null==M?void 0:M.toTime]),F=function(e){var t,n=e.toDate,l=e.toTime,a={SurveyEntity:c({},M,{status:"ACTIVE",startDate:new Date(e.fromDate+" "+e.fromTime).getTime(),endDate:new Date(n+" "+l).getTime(),collectCitizenInfo:M.collectCitizenInfo.code,questions:M.questions.map(uo),tenantId:L})};E.push("/"+(null===(t=window)||void 0===t?void 0:t.contextPath)+"/employee/engagement/surveys/update-response",a)},U=n.useMemo(function(){var e=["EDIT","DELETE"];return P&&"ACTIVE"===(null==M?void 0:M.status)?e.splice(1,0,"INACTIVE"):P||e.splice(1,0,"ACTIVE"),e},[P,null==M?void 0:M.status]);return x?l.createElement(t.Loader,null):l.createElement(n.Fragment,null,l.createElement(t.Header,null,v("CS_COMMON_SURVEYS")),l.createElement(ji,{t:v,onEdit:function(e){var t,n,l=e.collectCitizenInfo,a=e.title,i=e.description,o=e.tenantIds,r=e.fromDate,u=e.toDate,c=e.fromTime,s=e.toTime,d=Mi(e.questions),m={SurveyEntity:{uuid:M.uuid,tenantId:null===(t=o[0])||void 0===t?void 0:t.code,title:a,description:i,collectCitizenInfo:l.code,startDate:new Date(r+" "+c).getTime(),endDate:new Date(u+" "+s).getTime(),questions:d,status:P?"ACTIVE":"INACTIVE"}};E.push("/"+(null===(n=window)||void 0===n?void 0:n.contextPath)+"/employee/engagement/surveys/update-response",m)},menuOptions:U,displayMenu:b,isFormDisabled:_,isPartiallyEnabled:C,setDisplayMenu:N,onActionSelect:function(e){"EDIT"===e&&(P?T(!C):S(!_),w("EDIT")),"INACTIVE"===e&&(g(!0),w("INACTIVE")),"ACTIVE"===e&&(g(!0),w("ACTIVE")),"DELETE"===e&&(g(!0),w("DELETE")),N(!1)},initialSurveysConfig:M,isSurveyActive:P,formDisabled:_}),p&&"DELETE"===O&&l.createElement(Ki,{t:v,heading:"CONFIRM_DELETE_SURVEY",surveyTitle:M.title,closeModal:function(){return g(!1)},actionCancelLabel:"CS_COMMON_CANCEL",actionCancelOnSubmit:function(){return g(!1)},actionSaveLabel:"ES_COMMON_DEL",actionSaveOnSubmit:function(){var e,t={SurveyEntity:c({},M,{collectCitizenInfo:M.collectCitizenInfo.code})};E.push("/"+(null===(e=window)||void 0===e?void 0:e.contextPath)+"/employee/engagement/surveys/delete-response",t)}}),p&&"ACTIVE"===O&&l.createElement(no,{t:v,heading:"CONFIRM_MARKACTIVE_SURVEY",initialValues:M,closeModal:function(){return g(!1)},actionCancelLabel:"CS_COMMON_CANCEL",actionCancelOnSubmit:function(){return g(!1)},actionSaveLabel:"ES_COMMON_SAVE",actionSaveOnSubmit:F,onSubmit:F,surveyTitle:M.title}),p&&"INACTIVE"===O&&l.createElement(ro,{t:v,heading:"CONFIRM_MARKINACTIVE_SURVEY",surveyTitle:M.title,closeModal:function(){return g(!1)},actionCancelLabel:"CS_COMMON_CANCEL",actionCancelOnSubmit:function(){return g(!1)},actionSaveLabel:"ES_COMMON_Y_MARKINACTIVE",actionSaveOnSubmit:function(){var e,t={SurveyEntity:c({},M,{tenantId:L,questions:M.questions.map(uo),status:"INACTIVE",collectCitizenInfo:M.collectCitizenInfo.code})};E.push("/"+(null===(e=window)||void 0===e?void 0:e.contextPath)+"/employee/engagement/surveys/update-response",t)}}))},mo=function(e){var a=e.t,i=e.question,r=e.control,u=e.register,c=e.formState,s=e.formDisabled,d=null==c?void 0:c.errors;if(i)return l.createElement(t.Card,null,l.createElement("div",{className:"surveyQuestion-wrapper"},l.createElement("span",{className:"question-title"},i.questionStatement," ",null!=i&&i.required?"*":""),l.createElement("span",null,function(e){var c,m,v,E,f,p,g,h;switch(e){case"SHORT_ANSWER_TYPE":return l.createElement(n.Fragment,null,l.createElement(t.TextInput,{name:i.uuid,disabled:s,type:"text",inputRef:u({maxLength:{value:200,message:a("EXCEEDS_200_CHAR_LIMIT")},required:i.required})}),d&&(null==d?void 0:d[i.uuid])&&"required"===(null==d||null===(c=d[i.uuid])||void 0===c?void 0:c.type)&&l.createElement(t.CardLabelError,null,a("CS_COMMON_REQUIRED")),d&&(null==d?void 0:d[i.uuid])&&"maxLength"===(null==d||null===(m=d[i.uuid])||void 0===m?void 0:m.type)&&l.createElement(t.CardLabelError,null,a("EXCEEDS_200_CHAR_LIMIT")));case"LONG_ANSWER_TYPE":return l.createElement(n.Fragment,null,l.createElement(t.TextArea,{name:i.uuid,disabled:s,inputRef:u({maxLength:{value:500,message:a("EXCEEDS_500_CHAR_LIMIT")},required:i.required})}),d&&(null==d?void 0:d[i.uuid])&&"required"===(null==d||null===(v=d[i.uuid])||void 0===v?void 0:v.type)&&l.createElement(t.CardLabelError,null,a("CS_COMMON_REQUIRED")),d&&(null==d?void 0:d[i.uuid])&&"maxLength"===(null==d||null===(E=d[i.uuid])||void 0===E?void 0:E.type)&&l.createElement(t.CardLabelError,null,a("EXCEEDS_500_CHAR_LIMIT")));case"MULTIPLE_ANSWER_TYPE":return l.createElement(n.Fragment,null,l.createElement(o.Controller,{control:r,name:i.uuid,rules:{required:i.required},render:function(e){return l.createElement(t.RadioButtons,{disabled:s,onSelect:e.onChange,selectedOption:e.value,optionsKey:"",options:[].concat(i.options)})}}),d&&(null==d?void 0:d[i.uuid])&&"required"===(null==d||null===(f=d[i.uuid])||void 0===f?void 0:f.type)&&l.createElement(t.CardLabelError,null,a("EVENTS_TO_DATE_ERROR_REQUIRED")));case"CHECKBOX_ANSWER_TYPE":return l.createElement(n.Fragment,null,l.createElement(o.Controller,{control:r,name:i.uuid,rules:{required:i.required},render:function(e){var n=e.onChange,a=e.value;return l.createElement("div",{className:"align-columns"},i.options.map(function(e){var i;return l.createElement(t.CheckBox,{disable:s,key:e,onChange:function(t){t.target.checked?n([e].concat(a||[])):a&&n(null==a?void 0:a.filter(function(t){return t!==e}))},checked:"string"==typeof a?!(null===(i=[a])||void 0===i||!i.find(function(t){return t===e})):!(null==a||!a.find(function(t){return t===e})),label:e})}))}}),d&&(null==d?void 0:d[i.uuid])&&"required"===(null==d||null===(p=d[i.uuid])||void 0===p?void 0:p.type)&&l.createElement(t.CardLabelError,{style:{marginTop:"20px"}},a("CS_COMMON_REQUIRED")));case"DATE_ANSWER_TYPE":return l.createElement(n.Fragment,null,l.createElement(o.Controller,{control:r,name:i.uuid,rules:{required:i.required},render:function(e){return l.createElement(t.TextInput,{disabled:s,type:"date",onChange:e.onChange,defaultValue:e.value})}}),d&&(null==d?void 0:d[i.uuid])&&"required"===(null==d||null===(g=d[i.uuid])||void 0===g?void 0:g.type)&&l.createElement(t.CardLabelError,null,a("EVENTS_TO_DATE_ERROR_REQUIRED")));case"TIME_ANSWER_TYPE":return l.createElement(n.Fragment,null,l.createElement(o.Controller,{control:r,name:i.uuid,rules:{required:i.required},render:function(e){return l.createElement(t.TextInput,{type:"time",disabled:s,onChange:e.onChange,defaultValue:e.value})}}),d&&(null==d?void 0:d[i.uuid])&&"required"===(null==d||null===(h=d[i.uuid])||void 0===h?void 0:h.type)&&l.createElement(t.CardLabelError,null,a("EVENTS_TO_DATE_ERROR_REQUIRED")));default:return l.createElement(t.TextInput,{name:i.uuid,disabled:s,type:"text",inputRef:u({maxLength:{value:60,message:a("EXCEEDS_60_CHAR_LIMIT")},required:i.required})})}}(i.type))))},vo=function(e){var n,i=e.surveyData,r=e.onFormSubmit,u=e.submitDisabled,c=e.formDisabled,s=e.isLoading,d=o.useForm({defaultValues:e.formDefaultValues}),m=d.register,v=d.control,E=d.handleSubmit,f=d.getValues,p=d.formState,g=a.useTranslation().t;return s?l.createElement(t.Loader,null):l.createElement("div",{className:"citizenSurvey-wrapper"},l.createElement(t.Header,null,null==i||null===(n=i.title)||void 0===n?void 0:n.toUpperCase()),l.createElement("form",{onSubmit:E(r)},i.questions.length?i.questions.map(function(e,t){return l.createElement(mo,{key:t,t:g,question:e,control:v,register:m,values:f,formState:p,formDisabled:c})}):null,l.createElement(t.ActionBar,null,!u&&l.createElement(t.SubmitBar,{label:g("CS_SUBMIT_SURVEY"),submit:"submit"}))))},Eo=function(e,t){var n=[];return e.map(function(e){var l={};"Check Boxes"===e.type?(l.type=e.type,l.questionStatement=e.questionStatement,l.options=e.options,l.answers=[],t.map(function(t){var n,a;e.uuid===t.questionId&&(l.timeStamp=Digit.DateUtils.ConvertEpochToDate(null==t||null===(n=t.auditDetails)||void 0===n?void 0:n.lastModifiedTime)+" "+Digit.DateUtils.ConvertEpochToTimeInHours(null==t||null===(a=t.auditDetails)||void 0===a?void 0:a.lastModifiedTime),l.answers=[].concat(l.answers,[t.answer]))})):(l.type=e.type,l.questionStatement=e.questionStatement,l.options=e.options,t.map(function(t){if(e.uuid===t.questionId){var n,a;l.timeStamp=Digit.DateUtils.ConvertEpochToDate(null==t||null===(n=t.auditDetails)||void 0===n?void 0:n.lastModifiedTime)+" "+Digit.DateUtils.ConvertEpochToTimeInHours(null==t||null===(a=t.auditDetails)||void 0===a?void 0:a.lastModifiedTime);var i=l.answers;i&&i.push(t.answer[0]),l.answers=i||[t.answer[0]]}})),n.push(l)}),n},fo=function(e){var t=e.t,n=Object.entries(e.userInfo);return l.createElement("div",{style:{margin:"30px"}},l.createElement("header",{style:{fontSize:"30px",fontWeight:"bold"}},t("WHO_RESPONDED")),l.createElement("div",{style:{display:"flex",padding:"8px 4px","background-color":"#FAFAFA",border:"1px solid #D6D5D4",boxSizing:"borderBox",borderRadius:"4px",marginTop:"20px",marginBottom:"20px"}},l.createElement("div",{style:{flex:"50%",padding:"10px"}},l.createElement("header",{style:{fontWeight:"bold",fontSize:"25px"}},"Email"),n.map(function(e){return l.createElement("p",{style:{margin:"10px 0px 10px 0px"}},e[1])})),l.createElement("div",{style:{flex:"50%",padding:"10px"}},l.createElement("header",{style:{fontWeight:"bold",fontSize:"25px"}},"Phone Number"),n.map(function(e){return l.createElement("p",{style:{margin:"10px 0px 10px 0px"}},e[0])}))))},po=function(e){var a=e.surveyTitle,o=e.surveyDesc,r=e.t,u=e.surveyId,c=i.useHistory(),s=Digit.SessionStorage.get("ENGAGEMENT_TENANTS"),d=Digit.ULBService.getCurrentTenantId(),m=Digit.UserService.getUser().info,v=s.filter(function(e){var t;return null==m||null===(t=m.roles)||void 0===t?void 0:t.some(function(t){return(null==t?void 0:t.tenantId)===(null==e?void 0:e.code)})}),E=n.useMemo(function(){return s.filter(function(e){return e.code===d})},[s]);return l.createElement("div",{className:"surveydetailsform-wrapper"},l.createElement("span",{className:"surveyformfield"},l.createElement("label",null,r("LABEL_FOR_ULB")+" * :"),l.createElement("div",{style:{display:"grid",gridAutoFlow:"row"}},l.createElement(t.Dropdown,{allowMultiselect:!0,optionKey:"i18nKey",option:v,selected:E,keepNull:!0,disable:!0,t:r}),l.createElement(t.RemoveableTag,{key:"tag",text:v[0].name})),l.createElement("button",{type:"button",style:{border:"2px solid #F47738",backgroundColor:"white",padding:"8px 8px",width:"200px",marginLeft:"50px",marginTop:"-45px"},onClick:function(){var e;return c.push("/"+(null===(e=window)||void 0===e?void 0:e.contextPath)+"/employee/engagement/surveys/inbox/details/"+u)}},l.createElement("header",{style:{color:"#F47738"}},r("SURVEY_QUESTIONS")))),l.createElement("span",{className:"surveyformfield"},l.createElement("label",null,r("CS_SURVEY_NAME")),l.createElement(t.TextInput,{name:"title",type:"text",disable:!0,value:a})),l.createElement("span",{className:"surveyformfield"},l.createElement("label",null,r("CS_SURVEY_DESCRIPTION")),l.createElement(t.TextInput,{name:"description",type:"text",disable:!0,value:o})))},go=["#8E29BF","#FBC02D","#048BD0","#EA8A3B","#0BABDE","#800080","#ee82ee","#616161","#3cb371","#6a5acd"],ho=Math.PI/180,_o=function(e){var t=e.cx,n=e.cy,a=e.midAngle,i=e.innerRadius,o=e.percent,r=i+.5*(e.outerRadius-i),u=t+r*Math.cos(-a*ho),c=n+r*Math.sin(-a*ho);return l.createElement("text",{x:u,y:c,fill:"white",textAnchor:u>t?"start":"end",dominantBaseline:"central"},(100*o).toFixed(0)+"%")},So=function(e){var t=e.payload;return l.createElement("div",{style:{display:"flex",flexDirection:"column",height:"300px"}},l.createElement("div",{style:{overflow:"auto",flex:"1"}},l.createElement("ul",{style:{listStyle:"disc"}},null==t?void 0:t.map(function(e,t){return l.createElement("li",{key:"item-"+t,style:{display:"list-item",color:e.color,fontSize:"19px"}},e.value)}))))},yo=function(e){var t=function(e){var t=e.options,n=e.answers,l=[];return null==t||t.map(function(e){return l.push({name:e,value:0})}),null==n||n.map(function(e,t){null==l||l.map(function(t,n){t.name===e&&(l[n].value=l[n].value+1)})}),l}(e.data);return l.createElement(u.PieChart,{width:400,height:400},l.createElement(u.Pie,{data:t,cx:200,cy:200,labelLine:!1,label:_o,outerRadius:120,fill:"#8884d8",dataKey:"value"},null==t?void 0:t.map(function(e,t){return l.createElement(u.Cell,{key:"cell-"+t,fill:go[t%go.length]})})),l.createElement(u.Tooltip,null),l.createElement(u.Legend,{content:So,width:100,align:"right",wrapperStyle:{top:40,right:20,left:500,backgroundColor:"#FAFAFA",borderRadius:3,lineHeight:"40px"}}))},Co=function(e){var t,n,a,i=(n=[],a=(t=e.data).answers,t.options.map(function(e){var t={};t.name=e,t.value=0,a.map(function(n){n.map(function(n){n===e&&(t.value=t.value+1)})}),n.push(t)}),n);return l.createElement("div",{style:{padding:"10px",width:"700px",height:"260px",backgroundColor:"#fafafa"}},l.createElement(u.ResponsiveContainer,null,l.createElement(u.BarChart,{data:i,layout:"vertical",margin:{top:0,right:50,left:0,bottom:0},barCategoryGap:8},l.createElement(u.CartesianGrid,{strokeDasharray:"3 3"}),l.createElement(u.XAxis,{type:"number"}),l.createElement(u.YAxis,{type:"category",width:150,padding:{left:20},dataKey:"name"}),l.createElement(u.Bar,{dataKey:"value",fill:"#048BD0"}),l.createElement(u.Tooltip,null))))},To=function(e){var t=e.split("-");return{day:t[2],date:["January","February","March","April","May","June","July","August","September","October","November","December"][t[1]-1]+" "+t[0]}},Do=function(e){var i=e.surveyInfo,o=e.responsesInfoMutation,r=a.useTranslation().t,u=n.useState(null),c=u[0],s=u[1],d=n.useState(null),m=d[0],v=d[1];return n.useEffect(function(){if(o.isSuccess){var e=Eo(null==i?void 0:i.questions,o.data.answers);s(e);var t=function(e){var t={};return null==e||e.map(function(e){t[e.mobileNumber]=e.emailId}),t}(o.data.answers);v(t)}},[o]),c?l.createElement("div",{className:"custom-group-merge-container"},l.createElement(t.Header,null,r("CS_COMMON_SURVEYS")),l.createElement(t.MultiLink,{style:{marginTop:"-45px"},onHeadClick:function(){return e=function(e,t){for(var n=parseInt(t.length/e.length),l=Eo(null==i?void 0:i.questions,o.data.answers),a=[],r=function(t){var n={TimeStamp:""};null==e||e.map(function(e){n[e.questionStatement]=""});var i=null==e?void 0:e.map(function(e){return e.questionStatement});null==i||i.map(function(e){var a,i,o,r,u,c,s,d,m,v,E,f,p,g,h,_,S=null==l?void 0:l.filter(function(t){return(null==t?void 0:t.questionStatement)===e}),y="object"==typeof(null==S||null===(a=S[0])||void 0===a||null===(i=a.answers)||void 0===i?void 0:i[t])?null!=S&&null!==(o=S[0])&&void 0!==o&&null!==(r=o.answers)&&void 0!==r&&null!==(u=r[t])&&void 0!==u&&null!==(c=u.join())&&void 0!==c&&c.includes("ul")?"NA":null==S||null===(s=S[0])||void 0===s||null===(d=s.answers)||void 0===d||null===(m=d[t])||void 0===m?void 0:m.join():"ul"===(null==S||null===(v=S[0])||void 0===v||null===(E=v.answers)||void 0===E?void 0:E[t])||""===(null==S||null===(f=S[0])||void 0===f||null===(p=f.answers)||void 0===p?void 0:p[t])?"NA":null==S||null===(g=S[0])||void 0===g||null===(h=g.answers)||void 0===h?void 0:h[t];n[e]=y,n.TimeStamp=null==S||null===(_=S[0])||void 0===_?void 0:_.timeStamp}),a.push(n)},u=0;u<n;u++)r(u);return a}(null==i?void 0:i.questions,o.data.answers),Digit.Download.Excel(e,o.data.title);var e},downloadBtnClassName:"employee-download-btn-className",label:r("SURVEY_REPORT")}),l.createElement(t.Card,null,l.createElement("div",{style:{margin:"30px"}},l.createElement(po,{surveyTitle:i.title,surveyDesc:i.description,t:r,surveyId:i.uuid})),l.createElement(fo,{t:r,userInfo:m}),null==c?void 0:c.map(function(e){var n;return function(e,n,a,i){switch(void 0===i&&(i=0),a){case"Short Answer":return l.createElement("div",{style:{margin:"30px"}},l.createElement(t.CardSectionHeader,null,e.questionStatement),l.createElement("header",{style:{fontWeight:"bold"}},i+" Responses"),l.createElement("div",{className:"responses-container"},null==n?void 0:n.map(function(e){return l.createElement("div",{className:"response-result responses-container-line"},e,l.createElement(t.BreakLine,{style:{marginTop:"10px"}}))})));case"Date":return l.createElement("div",{style:{margin:"30px"}},l.createElement(t.CardSectionHeader,null,e.questionStatement),l.createElement("header",{style:{fontWeight:"bold"}},i+" Responses"),l.createElement("div",{className:"date-container"},null==n?void 0:n.map(function(e){return l.createElement("div",{className:"date-response"},l.createElement("div",null,To(e).date),l.createElement("div",{className:"divide"}),l.createElement("div",null,To(e).day))})));case"Time":return l.createElement("div",{style:{margin:"30px"}},l.createElement(t.CardSectionHeader,null,e.questionStatement),l.createElement("header",{style:{fontWeight:"bold"}},i+" Responses"),l.createElement("div",{className:"date-container"},null==n?void 0:n.map(function(e){return l.createElement("div",{className:"date-response"},l.createElement("div",null,e),l.createElement("div",{className:"divide"}),l.createElement("div",null,((t=(t=e).toString().match(/^([01]\d|2[0-3])(:)([0-5]\d)(:[0-5]\d)?$/)||[t]).length>1&&((t=t.slice(1))[5]=+t[0]<12?" AM":" PM",t[0]=+t[0]%12||12),t.join(""))));var t})));case"Paragraph":return l.createElement("div",{style:{margin:"30px"}},l.createElement(t.CardSectionHeader,null,e.questionStatement),l.createElement("header",{style:{fontWeight:"bold"}},i+" Responses"),l.createElement("div",{className:"responses-container"},null==n?void 0:n.map(function(e){return l.createElement("div",{className:"response-result responses-container-line"},e,l.createElement(t.BreakLine,{style:{marginTop:"10px"}}))})));case"Check Boxes":return l.createElement("div",{style:{margin:"30px"}},l.createElement(t.CardSectionHeader,null,e.questionStatement),l.createElement("header",{style:{fontWeight:"bold"}},i+" Responses"),l.createElement("div",{className:"responses-container",style:{padding:"30px"}},l.createElement(Co,{data:e})));case"Multiple Choice":return l.createElement("div",{style:{margin:"30px"}},l.createElement(t.CardSectionHeader,null,e.questionStatement),l.createElement("header",{style:{fontWeight:"bold"}},i+" Responses"),l.createElement("div",{className:"responses-container",style:{overflow:"-moz-hidden-unscrollable"}},l.createElement(yo,{data:e})))}}(e,null==e?void 0:e.answers,null==e?void 0:e.type,null==e||null===(n=e.answers)||void 0===n?void 0:n.length)}))):l.createElement(t.Loader,null)},bo={SHORT_ANSWER_TYPE:"Short Answer",LONG_ANSWER_TYPE:"Paragraph",MULTIPLE_ANSWER_TYPE:"Multiple Choice",CHECKBOX_ANSWER_TYPE:"Check Boxes",DATE_ANSWER_TYPE:"Date",TIME_ANSWER_TYPE:"Time"},No=function(){var e=Digit.ULBService.getCurrentTenantId(),a=i.useParams(),o=Digit.Hooks.survey.useShowResults(),u=r.useQueryClient();n.useEffect(function(){o.mutate({surveyId:a.id},{onSuccess:function(){u.clear()}})},[]);var c=Digit.Hooks.survey.useSearch({tenantIds:e,uuid:a.id},{select:function(e){var t,n=null==e||null===(t=e.Surveys)||void 0===t?void 0:t[0];return{uuid:n.uuid,title:n.title,description:n.description,collectCitizenInfo:{code:n.collectCitizenInfo},fromDate:Ae(new Date(n.startDate),"yyyy-MM-dd"),toDate:Ae(new Date(n.endDate),"yyyy-MM-dd"),fromTime:Ae(new Date(n.startDate),"hh:mm"),toTime:Ae(new Date(n.endDate),"hh:mm"),questions:n.questions.map(function(e){return{questionStatement:e.questionStatement,type:bo[e.type],required:e.required,options:e.options,uuid:e.uuid,surveyId:e.surveyId}}),status:n.status,answersCount:n.answersCount}}}),s=c.data;return c.isLoading?l.createElement(t.Loader,null):l.createElement(Do,{surveyInfo:s,responsesInfoMutation:o})},Ao=function(e){var n=e.match,a=(void 0===n?{}:n).path,o=e.tenants,r=e.parentRoute;return l.createElement(i.Switch,null,l.createElement(t.PrivateRoute,{path:a+"/inbox/create",component:function(e){return l.createElement(Pi,e)}}),l.createElement(t.PrivateRoute,{path:a+"/create",component:function(e){return l.createElement(Pi,e)}}),l.createElement(t.PrivateRoute,{path:a+"/inbox/details/:id",component:function(e){return l.createElement(so,e)}}),l.createElement(t.PrivateRoute,{path:a+"/inbox/results/:id",component:function(e){return l.createElement(No,e)}}),l.createElement(t.PrivateRoute,{path:a+"/inbox",component:function(e){return l.createElement(yi,c({},e,{tenants:o,parentRoute:r}))}}),l.createElement(t.PrivateRoute,{path:a+"/create-response",component:function(e){return l.createElement(Ui,e)}}),l.createElement(t.PrivateRoute,{path:a+"/update-response",component:function(e){return l.createElement(ki,e)}}),l.createElement(t.PrivateRoute,{path:a+"/delete-response",component:function(e){return l.createElement(Hi,e)}}))},Oo=function(e){if(e){var t=[];for(var n in e)t.push({questionId:n,answer:[e[n]]});return t}},wo=function(e){var n,i,o,r,u,c,s,d,m,v,E,f,p,g,h,_,S,y,C,T,D,b,N,A,O,w,L,I=e.location,R=a.useTranslation().t,x=[{path:"/"+(null===(n=window)||void 0===n?void 0:n.contextPath)+"/employee",content:R("ES_COMMON_HOME"),show:!0},{path:"/"+(null===(i=window)||void 0===i?void 0:i.contextPath)+"/employee/engagement/event/inbox",content:R("ES_EVENT_INBOX"),show:!!I.pathname.includes("event/inbox")},{path:"/"+(null===(o=window)||void 0===o?void 0:o.contextPath)+"/employee/event/new-event",content:R("ES_EVENT_NEW_EVENT"),show:!!I.pathname.includes("event/new-event")},{path:"/"+(null===(r=window)||void 0===r?void 0:r.contextPath)+"/employee/event/inbox/new-event",content:R("ES_EVENT_NEW_EVENT"),show:!!I.pathname.includes("event/inbox/new-event")},{path:"/"+(null===(u=window)||void 0===u?void 0:u.contextPath)+"/employee/event/inbox/event-details",content:R("ES_EVENT_EVENT_DETAILS"),show:!!I.pathname.includes("event-details")},{path:"/"+(null===(c=window)||void 0===c?void 0:c.contextPath)+"/employee/engagement/event/edit-event",content:R("ES_EVENT_EDIT_EVENT"),show:!!I.pathname.includes("event/edit-event")},{path:"/"+(null===(s=window)||void 0===s?void 0:s.contextPath)+"/employee/event/response",content:R("ES_EVENT_NEW_EVENT_RESPONSE"),show:!!I.pathname.includes("event/response")},{path:"/"+(null===(d=window)||void 0===d?void 0:d.contextPath)+"/employee/engagement/documents/inbox",content:R("ES_EVENT_INBOX"),show:!!I.pathname.includes("/documents/inbox")},{path:"/"+(null===(m=window)||void 0===m?void 0:m.contextPath)+"/employee/engagement/documents/new-doc",content:R("NEW_DOCUMENT_TEXT"),show:!!I.pathname.includes("/documents/new-doc")},{path:"/"+(null===(v=window)||void 0===v?void 0:v.contextPath)+"/employee/engagement/documents/inbox/new-doc",content:R("NEW_DOCUMENT_TEXT"),show:!!I.pathname.includes("/documents/inbox/new-doc")},{path:"/"+(null===(E=window)||void 0===E?void 0:E.contextPath)+"/employee/engagement/documents/response",content:R("ES_EVENT_NEW_EVENT_RESPONSE"),show:!!I.pathname.includes("/documents/response")},{path:"/"+(null===(f=window)||void 0===f?void 0:f.contextPath)+"/employee/engagement/documents/delete-response",content:R("ES_EVENT_NEW_EVENT_RESPONSE"),show:!!I.pathname.includes("/documents/delete-response")},{path:"/"+(null===(p=window)||void 0===p?void 0:p.contextPath)+"/employee/engagement/documents/update-response",content:R("ES_EVENT_NEW_EVENT_RESPONSE"),show:!!I.pathname.includes("/documents/update-response")},{path:"/"+(null===(g=window)||void 0===g?void 0:g.contextPath)+"/employee/engagement/documents/inbox/details/:id",content:R("CE_DOCUMENT_DETAILS"),show:!!I.pathname.includes("/documents/inbox/details")},{path:"/"+(null===(h=window)||void 0===h?void 0:h.contextPath)+"/employee/engagement/documents/inbox/update",content:R("DOCUMENTS_EDIT_HEADER"),show:!!I.pathname.includes("/documents/inbox/update")},{path:"/"+(null===(_=window)||void 0===_?void 0:_.contextPath)+"/employee/engagement/messages/inbox",content:R("ES_EVENT_INBOX"),show:!!I.pathname.includes("/messages/inbox")},{path:"/"+(null===(S=window)||void 0===S?void 0:S.contextPath)+"/employee/engagement/messages/create",content:R("NEW_PUBLIC_BRDCST"),show:!!I.pathname.includes("/messages/create")},{path:"/"+(null===(y=window)||void 0===y?void 0:y.contextPath)+"/employee/engagement/messages/inbox/create",content:R("NEW_PUBLIC_BRDCST"),show:!!I.pathname.includes("/messages/inbox/create")},{path:"/"+(null===(C=window)||void 0===C?void 0:C.contextPath)+"/employee/engagement/messages/inbox/details/:id",content:R("CS_HEADER_PUBLIC_BRDCST"),show:!!I.pathname.includes("/messages/inbox/details")},{path:"/"+(null===(T=window)||void 0===T?void 0:T.contextPath)+"/employee/engagement/messages/inbox/edit/:id",content:R("EDIT_PUBLIC_BRDCST"),show:!!I.pathname.includes("/messages/inbox/edit")},{path:"/"+(null===(D=window)||void 0===D?void 0:D.contextPath)+"/employee/engagement/messages/response",content:R("ES_EVENT_NEW_EVENT_RESPONSE"),show:!!I.pathname.includes("/messages/response")},{path:"/"+(null===(b=window)||void 0===b?void 0:b.contextPath)+"/employee/engagement/messages/response?update=true",content:R("ES_EVENT_NEW_EVENT_RESPONSE"),show:!!I.pathname.includes("/messages/response?update=true")},{path:"/"+(null===(N=window)||void 0===N?void 0:N.contextPath)+"/employee/engagement/messages/response?delete=true",content:R("ES_EVENT_NEW_EVENT_RESPONSE"),show:!!I.pathname.includes("/messages/response?delete=true")},{path:"/"+(null===(A=window)||void 0===A?void 0:A.contextPath)+"/employee/engagement/surveys/inbox",content:R("ES_EVENT_INBOX"),show:!!I.pathname.includes("/surveys/inbox")},{path:"/"+(null===(O=window)||void 0===O?void 0:O.contextPath)+"/employee/engagement/surveys/inbox/create",content:R("CS_COMMON_SURVEYS"),show:!!I.pathname.includes("/surveys/inbox/create")},{path:"/"+(null===(w=window)||void 0===w?void 0:w.contextPath)+"/employee/engagement/surveys/create",content:R("CS_COMMON_SURVEYS"),show:!!I.pathname.includes("/surveys/create")},{path:"/"+(null===(L=window)||void 0===L?void 0:L.contextPath)+"/employee/engagement/survey/create-response",content:R("ES_EVENT_NEW_EVENT_RESPONSE"),show:!!I.pathname.includes("/engagement/survey/create-response")}];return l.createElement(t.BreadCrumb,{crumbs:x})},Lo=function(e){var t=e.path,a=e.tenants,o=i.useLocation();return l.createElement(n.Fragment,null,l.createElement(wo,{location:o}),l.createElement(i.Switch,null,l.createElement(i.Route,{path:t+"/event/inbox",exact:!0},l.createElement(Ye,{tenants:a,parentRoute:t})),l.createElement(i.Route,{path:t+"/event/response",component:function(e){return l.createElement(xe,e)}}),l.createElement(i.Route,{path:t+"/event/inbox/new-event"},l.createElement(L,null)),l.createElement(i.Route,{path:t+"/event/new-event"},l.createElement(L,null)),l.createElement(i.Route,{path:t+"/event/edit-event/:id"},l.createElement(Ie,null)),l.createElement(i.Route,{path:t+"/event/inbox/event-details/:id"},l.createElement(Va,null)),l.createElement(i.Route,{exact:!0,path:t+"/documents/inbox/update",component:function(e){return l.createElement(ei,e)}}),l.createElement(i.Route,{exact:!0,path:t+"/documents/inbox/new-doc",component:function(){return l.createElement(Za,{path:t})}}),l.createElement(i.Route,{exact:!0,path:t+"/documents/new-doc",component:function(){return l.createElement(Za,{path:t})}}),l.createElement(i.Route,{path:t+"/documents/inbox/details/:id",component:function(e){return l.createElement(hi,e)}}),l.createElement(i.Route,{path:t+"/documents/response",component:function(e){return l.createElement(ni,e)}}),l.createElement(i.Route,{path:t+"/documents/update-response",component:function(e){return l.createElement(ai,e)}}),l.createElement(i.Route,{path:t+"/documents/delete-response",component:function(e){return l.createElement(oi,e)}}),l.createElement(i.Route,{path:t+"/documents/inbox",component:function(e){return l.createElement(Ei,{tenants:a})}}),l.createElement(i.Route,{path:t+"/messages",component:function(e){return l.createElement(xa,c({},e,{tenants:a,parentRoute:t}))}}),l.createElement(i.Route,{path:t+"/surveys",component:function(e){return l.createElement(Ao,c({},e,{tenants:a,parentRoute:t}))}})))},Io={EngagementModule:function(e){var n=e.stateCode,a=e.userType,o=e.tenants,r=i.useRouteMatch(),u=r.path,c=r.url,s=Digit.StoreData.getCurrentLanguage();return Digit.Services.useStore({stateCode:n,moduleCode:"Engagement",language:s}).isLoading?l.createElement(t.Loader,null):(Digit.SessionStorage.set("ENGAGEMENT_TENANTS",o),l.createElement("citizen"===a?Qa:Lo,{path:u,url:c,userType:a,tenants:o}))},EngagementCard:function(){var e,i,o,r,u,s,d,m,v,E,f,p,g,h,_=(null===(e=Digit.SessionStorage.get("User"))||void 0===e||null===(i=e.info)||void 0===i?void 0:i.roles).find(function(e){return"EMPLOYEE"===e.code});if(n.useEffect(function(){Digit.SessionStorage.set("CITIZENSURVEY.INBOX",null)},[]),!_)return null;var S=Digit.ULBService.getCurrentTenantId(),y=Digit.Hooks.engagement.useDocSearch({tenantIds:S},{select:function(e){return null==e?void 0:e.totalCount}}),C=y.data,T=y.isLoading,D=Digit.Hooks.events.useInbox(S,{},{status:"ACTIVE,INACTIVE",eventTypes:"BROADCAST"},{select:function(e){return null==e?void 0:e.totalCount}}),b=D.data,N=D.isLoading,A=Digit.Hooks.events.useInbox(S,{},{eventTypes:"EVENTSONGROUND"},{select:function(e){return null==e?void 0:e.totalCount}}),O=A.data,w=A.isLoading,L=Digit.Hooks.survey.useSearch({tenantIds:S},{select:function(e){return null==e?void 0:e.TotalCount}}),I=L.data,R=L.isLoading,x=n.useMemo(function(){return T?"-":C},[T,C]),M=n.useMemo(function(){return w?"-":O},[w,O]),P=n.useMemo(function(){return N?"-":b},[N,b]),F=n.useMemo(function(){return R?"-":I},[R,I]),U=a.useTranslation().t,B=null,k={Icon:l.createElement(t.SurveyIconSolid,null),moduleName:U("CS_COMMON_SURVEYS"),kpis:[{count:F,label:U("TOTAL_SURVEYS"),link:"/"+(null===(o=window)||void 0===o?void 0:o.contextPath)+"/employee/engagement/surveys/inbox"}],links:[{count:F,label:U("ES_TITLE_INBOX"),link:"/"+(null===(r=window)||void 0===r?void 0:r.contextPath)+"/employee/engagement/surveys/inbox"},{label:U("CS_COMMON_NEW_SURVEY"),link:"/"+(null===(u=window)||void 0===u?void 0:u.contextPath)+"/employee/engagement/surveys/create"}]},V={Icon:l.createElement(t.PMBIconSolid,null),moduleName:U("ACTION_TEST_PUBLIC_MESSAGE_BROADCAST"),kpis:[{count:P,label:U("TOTAL_MESSAGES"),link:"/"+(null===(s=window)||void 0===s?void 0:s.contextPath)+"/employee/engagement/messages/inbox"}],links:[{count:P,label:U("ES_TITLE_INBOX"),link:"/"+(null===(d=window)||void 0===d?void 0:d.contextPath)+"/employee/engagement/messages/inbox"},{label:U("NEW_PUBLIC_MESSAGE_BUTTON_LABEL"),link:"/"+(null===(m=window)||void 0===m?void 0:m.contextPath)+"/employee/engagement/messages/create"}]},H={Icon:l.createElement(t.EventsIconSolid,null),moduleName:U("TOTAL_EVENTS"),kpis:[{count:M,label:U("TOTAL_EVENTS"),link:"/"+(null===(v=window)||void 0===v?void 0:v.contextPath)+"/employee/engagement/event/inbox"}],links:[{count:M,label:U("ES_TITLE_INBOX"),link:"/"+(null===(E=window)||void 0===E?void 0:E.contextPath)+"/employee/engagement/event/inbox"},{label:U("ES_TITLE_NEW_EVENTS"),link:"/"+(null===(f=window)||void 0===f?void 0:f.contextPath)+"/employee/engagement/event/new-event"}]},W={Icon:l.createElement(t.DocumentIconSolid,null),moduleName:U("ES_TITLE_DOCS"),kpis:[{count:x,label:U("TOTAL_DOCUMENTS"),link:"/"+(null===(p=window)||void 0===p?void 0:p.contextPath)+"/employee/engagement/documents/inbox"}],links:[{count:x,label:U("ES_TITLE_INBOX"),link:"/"+(null===(g=window)||void 0===g?void 0:g.contextPath)+"/employee/engagement/documents/inbox"},{label:U("NEW_DOCUMENT_TEXT"),link:"/"+(null===(h=window)||void 0===h?void 0:h.contextPath)+"/employee/engagement/documents/new-doc"}]};return _&&(B=l.createElement(n.Fragment,null,[W,H,V,k].map(function(e,n){return l.createElement(t.EmployeeModuleCard,c({key:n,longModuleName:!0},e))}))),B},EngagementDocSelectULB:function(e){var a,i,r=e.t,u=e.setValue,c=e.config,s=e.formData,d=e.errors,m=e.control,v=Digit.SessionStorage.get("ENGAGEMENT_TENANTS"),E=Digit.ULBService.getCurrentTenantId(),f=n.useMemo(function(){return null!=s&&s.defaultTenantId?null==v?void 0:v.find(function(e){return(null==e?void 0:e.code)===(null==s?void 0:s.defaultTenantId)}):E&&v?null==v?void 0:v.filter(function(e){return e.code===E}):1===(null==g?void 0:g.length)?null==g?void 0:g[0]:null},[E,v]),p=Digit.SessionStorage.get("citizen.userRequestObject"),g=v.filter(function(e){var t,n;return null==p||null===(t=p.info)||void 0===t||null===(n=t.roles)||void 0===n?void 0:n.some(function(t){return(null==t?void 0:t.tenantId)===(null==e?void 0:e.code)})}).sort(h),_=Digit.ULBService.getUserUlbs("SUPERUSER").sort(h);return l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,{style:{alignItems:"start"}},l.createElement(t.CardLabel,{style:{fontWeight:"bold"}},r("ES_COMMON_ULB")+" *"),l.createElement("div",{className:"field"},l.createElement(o.Controller,{name:c.key,control:m,defaultValue:null==f?void 0:f[0],rules:{required:!0},render:function(e){return l.createElement(t.Dropdown,{allowMultiselect:!0,optionKey:"i18nKey",option:_,select:function(t){var n,l;e.onChange([].concat((null==s||null===(n=s[null==c?void 0:c.key])||void 0===n||null===(l=n.filter)||void 0===l?void 0:l.call(n,function(e){return t.code!=(null==e?void 0:e.code)}))||[],[t]))},keepNull:!0,selected:e.value,disable:1===(null==v?void 0:v.length),t:r})}}),l.createElement("div",{className:"tag-container"},s&&(null===(a=s[null==c?void 0:c.key])||void 0===a?void 0:a.length)>0&&(null==s||null===(i=s[c.key])||void 0===i?void 0:i.map(function(e,n){return l.createElement(t.RemoveableTag,{key:n,text:r(null==e?void 0:e.i18nKey),onClick:function(){var t;u(c.key,null==s||null===(t=s[c.key])||void 0===t?void 0:t.filter(function(t){return t.i18nKey!=e.i18nKey}))}})}))),d&&d[c.key]&&l.createElement(CardLabelError,null,r("EVENTS_TENANT_ERROR_REQUIRED")))))},EngagementULBDropdown:function(e){var n=e.t,a=e.config,i=e.errors,r=e.control,u=Digit.SessionStorage.get("ENGAGEMENT_TENANTS"),c=Digit.UserService.getUser().info,s=u.filter(function(e){var t;return null==c||null===(t=c.roles)||void 0===t?void 0:t.some(function(t){return(null==t?void 0:t.tenantId)===(null==e?void 0:e.code)})}).sort(h);return l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,{style:{alignItems:"start"}},l.createElement(t.CardLabel,{style:{fontWeight:"bold"}},n("ES_COMMON_ULB")+"*"),l.createElement("div",{className:"field"},l.createElement(o.Controller,{name:a.key,control:r,rules:{required:!0},render:function(e){return l.createElement(t.Dropdown,{option:s,selected:e.value,disable:1===(null==s?void 0:s.length),optionKey:"code",t:n,select:e.onChange})}}),i&&i[null==a?void 0:a.key]&&l.createElement(CardLabelError,null,n("EVENTS_TENANT_ERROR_REQUIRED")))))},EnagementDocName:function(e){var n=e.config,a=e.register;return l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,{style:{marginBottom:"20px"}},l.createElement(t.CardLabel,{style:{fontWeight:"bold"}},(0,e.t)("ES_COMMON_DOC_NAME")+" *"),l.createElement("div",{className:"field"},l.createElement(t.TextInput,{name:n.key,inputRef:a()}))))},EngagementDocCategory:function(e){var a=e.t,i=e.config,r=e.formData,u=e.control,c=Digit.ULBService.getStateId(),s=n.useState(function(){return[]})[1],d=Digit.ULBService.getCurrentUlb()||"pb.amritsar",m=Digit.Hooks.engagement.useMDMS(c,"DocumentUploader",["UlbLevelCategories"],{select:function(e){var t,n,l;return(null==e||null===(t=e.DocumentUploader)||void 0===t||null===(n=t.UlbLevelCategories)||void 0===n||null===(l=n.filter)||void 0===l?void 0:l.call(n,function(e){return e.ulb===d.code}))[0].categoryList.map(function(e){return{name:e}})}}).data;return n.useEffect(function(){var e,t;null!=r&&null!==(e=r.ULB)&&void 0!==e&&e.length&&s(null==r||null===(t=r.ULB)||void 0===t?void 0:t.map(function(e){return null==e?void 0:e.code}))},[null==r?void 0:r.ULB]),l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{style:{fontWeight:"bold"}},a("ES_COMMON_DOC_CATEGORY")+"*"),l.createElement(o.Controller,{name:i.key,control:u,render:function(e){return l.createElement("div",{className:"field"},l.createElement(t.Dropdown,{option:m,select:e.onChange,selected:e.value,t:a,optionKey:"name"}))}})))},EngagementDocDescription:function(e){var n,a,i,o=e.t,r=e.config,u=e.register,c=e.errors;return l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{style:{fontWeight:"bold"}},o("ES_COMMON_DOC_DESCRIPTION")),l.createElement("div",{className:"field"},l.createElement(t.TextArea,{name:r.key,inputRef:u({maxLength:140})}),(null==c||null===(n=c.description)||void 0===n?void 0:n.type)&&l.createElement(t.CardLabelError,null,o("ERROR_"+(null==c||null===(a=c.description)||void 0===a||null===(i=a.type)||void 0===i?void 0:i.toUpperCase())+"_140")))))},EngagementDocUploadDocument:function(e){var a=e.t,r=e.config,u=e.formData,c=e.setError,s=e.control,d=n.useState(function(){var e;return null==u||null===(e=u[r.key])||void 0===e?void 0:e.filestoreId}),v=d[0],E=d[1],f=n.useState(),p=f[0],g=f[1],h=n.useState(""),_=h[0],S=h[1],y=n.useState(),C=y[0],T=y[1],D=n.useState(!1)[1],A=(Digit.ULBService.getCurrentTenantId(),n.useState({})),O=A[0],w=A[1],L=n.useState(!1),I=L[0],R=L[1],x=n.useState(""),M=x[0],P=x[1];n.useEffect(function(){C&&F()},[C]),n.useEffect(function(){var e;v||D(!1),null==O||null===(e=O.onChange)||void 0===e||e.call(O,{fileStoreId:v,fileSize:p,fileType:_})},[v,O]);var F=function(){try{var e=function(e,t){try{var n=m(function(){return R(!0),Promise.resolve(Digit.UploadServices.Filestorage("engagement",C,Digit.ULBService.getStateId())).then(function(e){var t,n,l,i;(null==e||null===(t=e.data)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0?E(null==e||null===(l=e.data)||void 0===l||null===(i=l.files[0])||void 0===i?void 0:i.fileStoreId):c(a("CS_FILE_UPLOAD_ERROR"))})},function(){})}catch(e){return t(!0,e)}return n&&n.then?n.then(t.bind(null,!1),t.bind(null,!0)):t(!1,n)}(0,function(e,t){if(R(!1),e)throw t;return t});return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},U=i.useLocation(),B=n.useMemo(function(){return!!U.pathname.includes("/documents/inbox/update")},[U.pathname]);return l.createElement(l.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{style:{fontWeight:"bold"}},a("ES_COMMON_DOC_DOCUMENT")+"*"),l.createElement("div",{className:"field"},l.createElement(o.Controller,{name:r.key+".filestoreId",control:s,render:function(e){return l.createElement(t.UploadFile,{id:"city-engagement-doc",onUpload:function(t){return function(e,t){var n,l,a,i,o,r;if(T(),g(),S(),P(""),null!==(n=e.target)&&void 0!==n&&null!==(l=n.files)&&void 0!==l&&l.length){var u=null==e||null===(a=e.target)||void 0===a||null===(i=a.files[0])||void 0===i?void 0:i.size,c=null==e||null===(o=e.target)||void 0===o||null===(r=o.files[0])||void 0===r?void 0:r.type;if(!(u&&u/1024/1024>5))return c&&function(e){return!!e&&!!/(.*?)(jpg|jpeg|png|image|pdf|msword|openxmlformats)$/i.test(e)}(c)?(g(u),S(c),w(t),void T(e.target.files[0])):void P("NOT_SUPPORTED_FILE_TYPE");P("FILE_SIZE_EXCEEDED")}}(t,e)},onDelete:function(){E(null),g(100)},accept:"image/*, .pdf, .png, .jpeg, .doc",showHintBelow:!0,hintText:a("DOCUMENTS_ATTACH_RESTRICTIONS_SIZE"),message:I?l.createElement(t.Loader,null):N(a,v,B),textStyles:{width:"100%"},inputStyles:{width:"280px"}})}}),p?""+b(p):null,M?l.createElement(t.CardLabelError,null,a(M)):null)))},NotificationsAndWhatsNew:function(e){var o,r,u=e.variant,s=e.parentRoute,d=a.useTranslation().t,m=i.useLocation(),v=i.useHistory(),E=Digit.ULBService.getCitizenCurrentTenant(),f=Digit.Hooks.useNotificationCount({tenantId:E,config:{enabled:!(null===(o=Digit.UserService)||void 0===o||null===(r=o.getUser())||void 0===r||!r.access_token)}}),p=f.data,g=(void 0===p?{}:p).unreadCount,h=f.refetch,_=Digit.Hooks.useClearNotifications(),S=_.mutate,y=_.isSuccess;n.useEffect(function(){y&&h()},[y]),n.useEffect(function(){return g&&E?S({tenantId:E}):null},[E,g]);var C=Digit.Hooks.useEvents({tenantId:E,variant:u}),T=C.data;if(C.isLoading)return l.createElement(t.Loader,null);if(0===(null==T?void 0:T.length))return l.createElement("div",{className:"CitizenEngagementNotificationWrapper"},l.createElement(t.Header,null,""+d("CS_HEADER_NOTIFICATIONS")),l.createElement("h1",null,"Nothing to show"));function D(e){v.push(s+"/events/details/"+e)}return l.createElement("div",{className:"CitizenEngagementNotificationWrapper"},l.createElement(function(){var e;switch(u){case"notifications":return l.createElement(t.Header,null,d("CS_HEADER_NOTIFICATIONS")+" "+(g?"("+g+")":""));case"whats-new":return l.createElement(t.Header,null,d("CS_HEADER_WHATSNEW"));default:return l.createElement(i.Redirect,{to:{pathname:"/"+(null===(e=window)||void 0===e?void 0:e.contextPath)+"/citizen",state:{from:m.pathname+m.search}}})}},null),null!=T&&T.length?T.map(function(e){return"EVENTSONGROUND"===(null==e?void 0:e.eventType)?l.createElement(t.OnGroundEventCard,c({onClick:D},e)):l.createElement("BROADCAST"===(null==e?void 0:e.eventType)?Fa:t.WhatsNewCard,e)}):l.createElement(t.Card,null,l.createElement(t.CardCaption,null,d("COMMON_INBOX_NO_DATA"))))},EventsListOnGround:function(e){var n,o,r,u,s,d=e.variant,m=e.parentRoute,v=a.useTranslation().t,E=i.useLocation(),f=i.useHistory(),p=Digit.ULBService.getCitizenCurrentTenant(),g=Digit.Hooks.useNotificationCount({tenantId:p,config:{enabled:!(null===(n=Digit.UserService)||void 0===n||null===(o=n.getUser())||void 0===o||!o.access_token)}}).isSuccess,h=Digit.Hooks.useEvents({tenantId:p,variant:d}),_=h.data,S=h.isLoading;if(null===(r=Digit.UserService)||void 0===r||null===(u=r.getUser())||void 0===u||!u.access_token)return localStorage.clear(),sessionStorage.clear(),l.createElement(i.Redirect,{to:{pathname:"/"+(null===(s=window)||void 0===s?void 0:s.contextPath)+"/citizen/login",state:{from:E.pathname+E.search}}});if(S||!g)return l.createElement(t.Loader,null);function y(e){f.push(m+"/events/details/"+e)}return l.createElement("div",{className:"CitizenEngagementNotificationWrapper"},l.createElement(t.Header,null,v("EVENTS_EVENTS_HEADER")+"("+(null==_?void 0:_.length)+")"),_.length?_.map(function(e){return l.createElement(t.OnGroundEventCard,c({onClick:y},e))}):l.createElement(t.Card,null,l.createElement(t.CardCaption,null,v("COMMON_INBOX_NO_DATA"))))},EventDetails:function(){var e,o,r,u,c,s,d,m,v=a.useTranslation().t,E=i.useLocation(),f=(i.useHistory(),i.useParams().id),p=Digit.ULBService.getCitizenCurrentTenant(),g=Digit.Hooks.useEvents({tenantId:p,variant:"events"}),h=g.data,_=g.isLoading;if(null===(e=Digit.UserService)||void 0===e||null===(o=e.getUser())||void 0===o||!o.access_token)return localStorage.clear(),sessionStorage.clear(),l.createElement(i.Redirect,{to:{pathname:"/"+(null===(m=window)||void 0===m?void 0:m.contextPath)+"/citizen/login",state:{from:E.pathname+E.search}}});var S,y,C,T,D,b=n.useMemo(function(){return _?null:null==h?void 0:h.filter(function(e){return e.id===f})[0]},[_,h]);return _?l.createElement(t.Loader,null):l.createElement("div",{className:"CitizenEngagementNotificationWrapper"},l.createElement(t.Header,null,v("ES_TITLE_APPLICATION_DETAILS")),l.createElement(t.OnGroundEventCard,(y=(S=b).name,C=S.onGroundEventDate,T=S.onGroundEventMonth,D=S.onGroundEventTimeRange,{eventCategory:v(S.eventCategory),showEventCatergory:!0,name:y,onGroundEventDate:C,onGroundEventMonth:T,onGroundEventTimeRange:D})),l.createElement("div",{className:"OnGroundEventDetailsCard"},l.createElement("p",{className:"cardCaptionBodyS"},null==b?void 0:b.description),l.createElement("div",{className:"eventAddressAndDirection"},l.createElement("span",null,l.createElement(t.MapMarker,null),l.createElement("div",null,l.createElement("p",null,null==b||null===(r=b.eventDetails)||void 0===r?void 0:r.address),null!=b&&null!==(u=b.eventDetails)&&void 0!==u&&u.latitude&&null!=b&&null!==(c=b.eventDetails)&&void 0!==c&&c.longitude?l.createElement("a",{className:"direction",target:"_blank",href:"https://www.google.com/maps/search/?api=1&query="+(null==b||null===(s=b.eventDetails)||void 0===s?void 0:s.latitude)+"%2C"+(null==b||null===(d=b.eventDetails)||void 0===d?void 0:d.longitude)},v("CS_COMMON_GET_DIRECTIONS")):null))),l.createElement("div",{className:"eventTimeRange"},l.createElement(t.Clock,null),l.createElement("p",null,null==b?void 0:b.onGroundEventTimeRange))))},EventForm:function(e){var r,u,c,s,d=e.formData,m=e.control,v=e.errors,E=a.useTranslation().t,f=Digit.ULBService.getCurrentTenantId(),p=null==f?void 0:f.split(".")[0],g=Digit.SessionStorage.get("ENGAGEMENT_TENANTS"),_=Digit.UserService.getUser().info,S=g.filter(function(e){var t;return null==_||null===(t=_.roles)||void 0===t?void 0:t.some(function(t){return(null==t?void 0:t.tenantId)===(null==e?void 0:e.code)})}).sort(h),y=Digit.Hooks.useCommonMDMS(p,"mseva",["EventCategories"]),C=y.isLoading,T=y.data,D=i.useLocation(),b=n.useMemo(function(){return!!D.pathname.includes("/engagement/event/edit-event")},[D.pathname]);return C?l.createElement(t.Loader,null):l.createElement(n.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},E("EVENTS_ULB_LABEL")+" *"),l.createElement("div",{className:"field"},l.createElement(o.Controller,{control:m,defaultValue:null!=d&&d.defaultTenantId?null==g?void 0:g.find(function(e){return(null==e?void 0:e.code)===(null==d?void 0:d.defaultTenantId)}):f?null==g?void 0:g.find(function(e){return(null==e?void 0:e.code)===f}):1===(null==S?void 0:S.length)?null==S?void 0:S[0]:null,name:"tenantId",rules:{required:!0},render:function(e){return l.createElement(t.Dropdown,{option:S,selected:e.value,disable:!!b||1===(null==S?void 0:S.length),optionKey:"code",t:E,select:e.onChange})}}),v&&v.tenantId&&l.createElement(t.CardLabelError,null,E("EVENTS_TENANT_ERROR_REQUIRED")))),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},E("EVENTS_NAME_LABEL")+" *"),l.createElement("div",{className:"field"},l.createElement(o.Controller,{defaultValue:null==d?void 0:d.name,render:function(e){return l.createElement(t.TextInput,{value:e.value,type:"text",name:"name",onChange:e.onChange,inputRef:e.ref})},name:"name",rules:{required:!0,maxLength:66},control:m}),v&&(null==v?void 0:v.name)&&"required"===(null==v||null===(r=v.name)||void 0===r?void 0:r.type)&&l.createElement(t.CardLabelError,null,E("EVENTS_COMMENTS_ERROR_REQUIRED")),v&&(null==v?void 0:v.name)&&"maxLength"===(null==v||null===(u=v.name)||void 0===u?void 0:u.type)&&l.createElement(t.CardLabelError,null,E("EVENTS_MAXLENGTH_66_CHARS_REACHED")))),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},E("EVENTS_CATEGORY_LABEL")+" *"),l.createElement("div",{className:"field"},l.createElement(o.Controller,{name:"eventCategory",control:m,defaultValue:null!=d&&d.category?null==T||null===(c=T.mseva)||void 0===c||null===(s=c.EventCategories.filter(function(e){return e.code===(null==d?void 0:d.category)}))||void 0===s?void 0:s[0]:null,rules:{required:!0},render:function(e){var n;return l.createElement(t.Dropdown,{inputRef:e.ref,option:null==T||null===(n=T.mseva)||void 0===n?void 0:n.EventCategories,optionKey:"code",t:E,select:e.onChange,selected:e.value})}}),v&&v.eventCategory&&l.createElement(t.CardLabelError,null,E("EVENTS_CATEGORY_ERROR_REQUIRED")))))},MessageForm:function(e){var i,r,u,c,s,d,m,v,E,f,p=e.formData,g=e.control,h=e.errors,_=e.setError,S=a.useTranslation().t,y=Digit.ULBService.getCurrentTenantId(),C=null==y?void 0:y.split(".")[0],T=Digit.SessionStorage.get("ENGAGEMENT_TENANTS"),D=Digit.Hooks.useCommonMDMS(C,"mseva",["EventCategories"]),b=D.isLoading,N=D.data,A=Digit.ULBService.getStateId(),w=T.filter(function(e){return(null==e?void 0:e.code)===y});return b?l.createElement(t.Loader,null):l.createElement(n.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},S("EVENTS_ULB_LABEL")+" *"),l.createElement("div",{className:"field"},l.createElement(o.Controller,{control:g,defaultValue:1===(null==w?void 0:w.length)?null==w?void 0:w[0]:null,name:"tenantId",rules:{required:!0},render:function(e){return l.createElement(t.Dropdown,{option:w,selected:e.value,disable:1===(null==w?void 0:w.length),optionKey:"code",t:S,select:e.onChange})}}),h&&h.tenantId&&l.createElement(t.CardLabelError,null,S("EVENTS_TENANT_ERROR_REQUIRED")))),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},S("PUBLIC_BRDCST_TITLE_LABEL")+" *"),l.createElement("div",{className:"field"},l.createElement(o.Controller,{defaultValue:null==p?void 0:p.name,render:function(e){return l.createElement(t.TextInput,{value:e.value,type:"text",name:"name",onChange:e.onChange,inputRef:e.ref})},name:"name",rules:{required:!0,maxLength:66},control:g}),h&&(null==h?void 0:h.name)&&"required"===(null==h||null===(i=h.name)||void 0===i?void 0:i.type)&&l.createElement(t.CardLabelError,null,S("EVENTS_COMMENTS_ERROR_REQUIRED")),h&&(null==h?void 0:h.name)&&"maxLength"===(null==h||null===(r=h.name)||void 0===r?void 0:r.type)&&l.createElement(t.CardLabelError,null,S("EVENTS_MAXLENGTH_66_CHARS_REACHED")))),l.createElement(t.LabelFieldPair,{style:{marginBottom:"24px"}},l.createElement(t.CardLabel,{className:"card-label-smaller"},S("EVENTS_COMMENTS_LABEL")+" *"),l.createElement("div",{className:"field"},l.createElement(o.Controller,{name:"description",control:g,defaultValue:null!=p&&p.category?null==N||null===(u=N.mseva)||void 0===u||null===(c=u.EventCategories.filter(function(e){return e.code===(null==p?void 0:p.category)}))||void 0===c?void 0:c[0]:null,rules:{required:!0,maxLength:500},render:function(e){return l.createElement(t.TextArea,{inputRef:e.ref,value:e.value,name:"description",onChange:e.onChange,hintText:S("PUBLIC_BRDCST_MSG_LENGTH")})}}),h&&(null==h?void 0:h.description)&&"required"===(null==h||null===(s=h.description)||void 0===s?void 0:s.type)&&l.createElement(t.CardLabelError,null,S("EVENTS_COMMENTS_ERROR_REQUIRED")),h&&(null==h?void 0:h.description)&&"maxLength"===(null==h||null===(d=h.description)||void 0===d?void 0:d.type)&&l.createElement(t.CardLabelError,null,S("EVENTS_MAXLENGTH_REACHED")))),l.createElement(t.LabelFieldPair,{style:{marginBottom:"24px"}},l.createElement(t.CardLabel,{className:"card-label-smaller"},""+S("EVENTS_ATTACHMENT_LABEL")),l.createElement("div",{className:"field"},l.createElement(o.Controller,{name:"documents",control:g,rules:{required:!1},render:function(e){var n=e.onChange,a=e.value;return l.createElement(t.MultiUploadWrapper,{t:S,module:"engagement",tenantId:A,getFormState:function(e){var t=[];e.length>0&&e.forEach(function(e){var n,l,a,i;t.push({fileName:null==e?void 0:e[0],fileStoreId:null==e||null===(n=e[1])||void 0===n||null===(l=n.fileStoreId)||void 0===l?void 0:l.fileStoreId,documentType:null==e||null===(a=e[1])||void 0===a||null===(i=a.file)||void 0===i?void 0:i.type})}),n(t)},showHintBelow:!0,setuploadedstate:void 0===a?[]:a,allowedFileTypesRegex:Ma,allowedMaxSizeInMB:5,hintText:S("DOCUMENTS_ATTACH_RESTRICTIONS_SIZE")})}}))),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},S("PUBLIC_BRDCST_FROM_DATE_LABEL")+" *"),l.createElement("div",{className:"field"},l.createElement(o.Controller,{control:g,name:"fromDate",defaultValue:null==p?void 0:p.fromDate,rules:{required:!0,validate:{isValidFromDate:function(e){var t=O(new Date(""+(null==p?void 0:p.fromDate))),n=new Date;return!(!F(t)||t.getTime()<n.getTime()&&(_("fromDate",{type:"isValidFromDate"},{shouldFocus:!0}),1))}}},render:function(e){return l.createElement(t.TextInput,{type:"date",isRequired:!0,onChange:e.onChange,defaultValue:e.value})}}),h&&(null==h?void 0:h.fromDate)&&"required"===(null==h||null===(m=h.fromDate)||void 0===m?void 0:m.type)&&l.createElement(t.CardLabelError,null,S("EVENTS_FROM_DATE_ERROR_REQUIRED")),h&&(null==h?void 0:h.fromDate)&&"isValidFromDate"===(null==h||null===(v=h.fromDate)||void 0===v?void 0:v.type)&&l.createElement(t.CardLabelError,null,S("EVENTS_FROM_DATE_ERROR_INVALID")))),l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},S("PUBLIC_BRDCST_TO_DATE_LABEL")+" *"),l.createElement("div",{className:"field"},l.createElement(o.Controller,{control:g,name:"toDate",defaultValue:null==p?void 0:p.toDate,rules:{required:!0,validate:{isValidToDate:function(e){var t=O(new Date(""+(null==p?void 0:p.fromDate))),n=O(new Date(""+(null==p?void 0:p.toDate))),l=new Date;return!(!F(n)||(n.getTime()<l.getTime()||n.getTime()<t.getTime())&&(_("toDate",{type:"isValidToDate"},{shouldFocus:!0}),1))}}},render:function(e){return l.createElement(t.TextInput,{type:"date",isRequired:!0,onChange:e.onChange,defaultValue:e.value})}}),h&&(null==h?void 0:h.toDate)&&"required"===(null==h||null===(E=h.toDate)||void 0===E?void 0:E.type)&&l.createElement(t.CardLabelError,null,S("EVENTS_TO_DATE_ERROR_REQUIRED")),h&&(null==h?void 0:h.toDate)&&"isValidToDate"===(null==h||null===(f=h.toDate)||void 0===f?void 0:f.type)&&l.createElement(t.CardLabelError,null,S("EVENTS_TO_DATE_ERROR_INVALID")))))},DocumentList:function(e){var i=e.match,o=a.useTranslation().t,r=i.params,u=r.category,c=r.count,s=Digit.ULBService.getCitizenCurrentTenant(),d=n.useState(20)[0],m=(n.useState(0),n.useState()),v=m[0],E=m[1],f=Wa(v,700),p=Digit.Hooks.engagement.useDocSearch({name:f,category:u,tenantIds:s,limit:d},{select:function(e){var t;return null==e||null===(t=e.Documents)||void 0===t?void 0:t.map(function(e){var t=e.auditDetails;return{docId:e.uuid,name:e.name,category:e.category,description:e.description,documentLink:e.documentLink,createdTime:null==t?void 0:t.createdTime,fileSize:e.fileSize,filestoreId:e.filestoreId}})}}),g=p.data,h=p.isLoading;return l.createElement(t.AppContainer,null,l.createElement(t.Header,null,o(""+u)+" ("+(c||"-")+")"),l.createElement("div",{className:"documentContainerPadding"},l.createElement("div",null,l.createElement(Ha,{searchValue:v,handleKeyPress:function(e){try{return"Enter"===e.key&&v.length&&E(""),Promise.resolve()}catch(e){return Promise.reject(e)}},handleSearch:function(e){try{return v.length&&E(""),Promise.resolve()}catch(e){return Promise.reject(e)}},onChange:E,t:o})),h?l.createElement(t.Loader,null):g&&g.length?za(g,o):l.createElement(t.Card,null,l.createElement(t.CardCaption,null,o("COMMON_INBOX_NO_DATA")))))},SelectEventGeolocation:function(e){var i,o,r=e.onSelect,u=e.config,c=e.formData,s=a.useTranslation();return l.createElement(n.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},""+(0,s.t)("EVENTS_GEOLOCATION_LABEL")),l.createElement("div",{className:"field"},l.createElement(t.LocationSearch,{position:{latitude:null==c||null===(i=c.geoLocation)||void 0===i?void 0:i.latitude,longitude:null==c||null===(o=c.geoLocation)||void 0===o?void 0:o.longitude},onChange:function(e,t){r(null==u?void 0:u.key,t)}}))))},SelectToDate:function(e){var i,r,u=e.formData,c=e.control,s=e.errors,d=e.setError,m=a.useTranslation().t;return l.createElement(n.Fragment,null,l.createElement(t.LabelFieldPair,null,l.createElement(t.CardLabel,{className:"card-label-smaller"},m("EVENTS_TO_DATE_LABEL")+" *"),l.createElement("div",{className:"field"},l.createElement(o.Controller,{control:c,name:"toDate",defaultValue:null==u?void 0:u.toDate,rules:{required:!0,validate:{isValidDate:function(e){return!(!F(new Date(null==u?void 0:u.fromDate))||!F(new Date(e))||(new Date((null==u?void 0:u.fromDate)+" "+(null==u?void 0:u.fromTime))<new Date?(d("fromDate",{type:"isValidFromDate"},{shouldFocus:!0}),1):new Date(e+" "+(null==u?void 0:u.toTime))<new Date||!(new Date((null==u?void 0:u.fromDate)+" "+(null==u?void 0:u.fromTime))<=new Date(e+" "+(null==u?void 0:u.toTime)))))}}},render:function(e){return l.createElement(t.TextInput,{type:"date",isRequired:!0,onChange:e.onChange,defaultValue:e.value})}}),s&&(null==s?void 0:s.toDate)&&"required"===(null==s||null===(i=s.toDate)||void 0===i?void 0:i.type)&&l.createElement(t.CardLabelError,null,m("EVENTS_TO_DATE_ERROR_REQUIRED")),s&&(null==s?void 0:s.toDate)&&"isValidDate"===(null==s||null===(r=s.toDate)||void 0===r?void 0:r.type)&&l.createElement(t.CardLabelError,null,m("EVENTS_TO_DATE_ERROR_INVALID")))))},SurveyList:function(){var e=a.useTranslation().t,n=i.useHistory(),o=Digit.ULBService.getCitizenCurrentTenant(),r=Digit.Hooks.survey.useSearch({tenantIds:o},{select:function(e){for(var t,n=[],l=[],a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return d(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,void 0):void 0}}(e))){n&&(e=n);var l=0;return function(){return l>=e.length?{done:!0}:{done:!1,value:e[l++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e.Surveys.map(function(e){var t=pi(e.startDate,e.endDate);return c({hasResponded:!1,responseStatus:t&&e.hasResponded?"CS_SURVEY_RESPONDED":t?"CS_SURVEY_YT_TO_RESPOND":"CANNOT_RESPOND_MSG"},e)}));!(t=a()).done;){var i=t.value;"ACTIVE"===i.status&&pi(i.startDate,i.endDate)?n.push(i):l.push(i)}return{activeSurveysList:n,inactiveSurveysList:l}}}),u=r.data;return r.isLoading?l.createElement(t.Loader,null):l.createElement("div",{className:"survey-list-container"},l.createElement(t.Header,null,e("CS_COMMON_SURVEYS")+" ("+(null==u?void 0:u.activeSurveysList.length)+")"),null!=u&&u.activeSurveysList&&u.activeSurveysList.length?u.activeSurveysList.map(function(e,t){return l.createElement("div",{className:"surveyListCardMargin"},l.createElement(fi,{header:e.title,about:e.description,activeTime:e.endDate,postedAt:e.auditDetails.createdTime,responseStatus:e.responseStatus,hasResponsed:e.status,key:t,onCardClick:function(){var t,l,a;n.push((t=e).hasResponded?"/"+(null===(l=window)||void 0===l?void 0:l.contextPath)+"/citizen/engagement/surveys/show-survey":"/"+(null===(a=window)||void 0===a?void 0:a.contextPath)+"/citizen/engagement/surveys/fill-survey?applicationNumber="+(null==t?void 0:t.uuid)+"&tenantId="+(null==t?void 0:t.tenantId),t)}}))}):l.createElement("div",{className:"centered-message"},l.createElement("p",null,e("CS_NO_ACTIVE_SURVEYS"))),l.createElement(t.Header,null,e("CS_COMMON_INACTIVE_SURVEYS")+" ("+u.inactiveSurveysList.length+")"),null!=u&&u.inactiveSurveysList&&u.inactiveSurveysList.length?u.inactiveSurveysList.map(function(e,t){return l.createElement("div",{className:"surveyListCardMargin"},l.createElement(fi,{header:e.title,about:e.description,activeTime:e.endDate,postedAt:e.auditDetails.createdTime,responseStatus:e.responseStatus,hasResponsed:e.status,key:t}))}):l.createElement("div",{className:"centered-message"},l.createElement("p",null,e("CS_NO_INACTIVE_SURVEYS"))))},FillSurvey:function(e){var t,n,a=Digit.Hooks.useQueryParams(),o=Digit.Hooks.survey.useSearch({uuid:a.applicationNumber,tenantId:a.tenantId},{}),r=o.data,u=o.isLoading,c=null==r||null===(t=r.Surveys)||void 0===t?void 0:t[0];null==c||null===(n=c.questions)||void 0===n||n.sort(function(e,t){return e.qorder-t.qorder});var s=i.useHistory();return l.createElement(vo,{surveyData:c,isLoading:u,onFormSubmit:function(e){var t,n={AnswerEntity:{surveyId:c.uuid,answers:Oo(e),surveyTitle:c.title,hasResponded:c.hasResponded}};s.push("/"+(null===(t=window)||void 0===t?void 0:t.contextPath)+"/citizen/engagement/surveys/submit-response",n)},formDisabled:!1})},CitizenSurveyForm:vo,ShowSurvey:function(e){var a,i=e.location,o=null==i?void 0:i.state,u=(Digit.ULBService.getCitizenCurrentTenant(),Digit.Hooks.survey.useShowResults()),c=r.useQueryClient();if(n.useEffect(function(){u.mutate({surveyId:o.uuid},{onSuccess:function(){c.clear()}})},[]),u.isLoading&&!u.isIdle)return l.createElement(t.Loader,null);if(u.isError)return l.createElement("div",null,"An error occured...");var s=null==u||null===(a=u.data)||void 0===a?void 0:a.answers,d={};return null==s||s.map(function(e){d[null==e?void 0:e.questionId]=1===(null==e?void 0:e.answer.length)?null==e?void 0:e.answer[0]:null==e?void 0:e.answer}),l.createElement(vo,{surveyData:o,submitDisabled:!0,formDisabled:!0,formDefaultValues:d})},SurveyResults:No};exports.initEngagementComponents=function(){Object.entries(Io).forEach(function(e){Digit.ComponentRegistryService.setComponent(e[0],e[1])})};
