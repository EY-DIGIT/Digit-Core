var e,t=require("@egovernments/digit-ui-react-components"),n=require("react"),o=(e=n)&&"object"==typeof e&&"default"in e?e.default:e,a=require("react-router-dom"),r=require("react-i18next"),i=function(){var e=r.useTranslation().t,i=a.useHistory(),l=a.useParams(),u=l.moduleName,s=l.masterName,c=n.useState(null),m=c[0],d=c[1],p=Digit.ULBService.getStateId(),v=Digit.Hooks.useCustomMDMS(p,u,[{name:s}],{select:function(e){var t,n;return null==e||null===(t=e[u])||void 0===t||null===(n=t[s])||void 0===n?void 0:n[0]}}),f=v.isLoading,g=v.data,E=g||{},h=n.useMemo(function(){return Digit.Utils.preProcessMDMSConfigInboxSearch(e,m,"sections.search.uiConfig.fields",{})},[g,m]);return n.useEffect(function(){d(_.cloneDeep(E))},[g]),f||!m?o.createElement(t.Loader,null):o.createElement(o.Fragment,null,o.createElement("div",{className:"jk-header-btn-wrapper"},o.createElement(t.Header,{styles:{fontSize:"32px"}},e(null==h?void 0:h.label)),Digit.Utils.didEmployeeHasRole(null==h?void 0:h.actionRole)&&o.createElement(t.Button,{label:e(null==h?void 0:h.actionLabel),variation:"secondary",icon:o.createElement(t.AddFilled,{style:{height:"20px",width:"20px"}}),onButtonClick:function(){var e;i.push("/"+(null===(e=window)||void 0===e?void 0:e.contextPath)+"/employee/"+(null==h?void 0:h.actionLink))},type:"button"})),o.createElement("div",{className:"inbox-search-wrapper"},o.createElement(t.InboxSearchComposer,{configs:h})))},l=function(e){var i=e.stateCode,l=a.useParams(),u=l.moduleName,s=l.pageName,c=r.useTranslation().t,m=n.useState(""),d=m[0],p=m[1],v=n.useState(""),f=v[0],g=v[1],E=Digit.Hooks.dss.useMDMS(i,"common-masters",["uiCommonConstants"],{select:function(e){var t,n;return(null==e||null===(t=e["common-masters"])||void 0===t||null===(n=t.uiCommonConstants)||void 0===n?void 0:n[0])||{}},enabled:!0}),h=E.data,C=E.isLoading;return n.useEffect(function(){var e,t,n=(null==h||null===(e=h[u])||void 0===e||null===(t=e["iframe-routes"])||void 0===t?void 0:t[s])||{},o=(null==n?void 0:n.isOrigin)?"development"===process.env.NODE_ENV?"https://qa.digit.org":document.location.origin:null==n?void 0:n.domain,a=(null==n?void 0:n.title)||"";p(""+o+((null==n?void 0:n.routePath)||"")),g(a)},[h,u,s]),C?o.createElement(t.Loader,null):d?o.createElement(o.Fragment,null,o.createElement(t.Header,null,c(f)),o.createElement("div",{className:"app-iframe-wrapper"},o.createElement("iframe",{src:d,title:f,className:"app-iframe"}))):o.createElement("div",null,"No Iframe To Load")},u=function(e){var n=Digit.Hooks.useQueryParams(),a=n.tenantId,r=n.businessService,i=n.applicationNo,l=n.moduleCode;return o.createElement(t.Card,null,o.createElement(t.WorkflowTimeline,{businessService:r,applicationNo:i,tenantId:a}),o.createElement(t.WorkflowActions,{forcedActionPrefix:"ACTIONS",ActionBarStyle:{},MenuStyle:{},businessService:r,applicationNo:i,tenantId:a,saveAttendanceState:{displaySave:!1,updatePayload:[]},moduleCode:l}))},s=function(e){var n,a,i=e.location,l=r.useTranslation().t,u=[{path:"/"+(null===(n=window)||void 0===n?void 0:n.contextPath)+"/employee",content:l("HOME"),show:!0},{path:"/"+(null===(a=window)||void 0===a?void 0:a.contextPath)+"/employee",content:l(i.pathname.split("/").pop()),show:!0}];return o.createElement(t.BreadCrumb,{crumbs:u,spanStyle:{maxWidth:"min-content"}})},c=function(e){var n=e.path,r={stateCode:e.stateCode,userType:e.userType,tenants:e.tenants,path:n};return o.createElement(a.Switch,null,o.createElement(t.AppContainer,{className:"ground-container"},o.createElement(o.Fragment,null,o.createElement(s,{location:location})),o.createElement(a.Route,{path:n+"/search/:moduleName/:masterName",component:function(){return o.createElement(i,{parentRoute:n})}}),o.createElement(a.Route,{path:n+"/create/:moduleName/:masterName",component:function(){return o.createElement(DynamicCreateComponent,{parentRoute:n})}}),o.createElement(a.Route,{path:n+"/iframe/:moduleName/:pageName"},o.createElement(l,r)),o.createElement(a.Route,{path:n+"/workflow",component:function(){return o.createElement(u,{parentRoute:n})}})))},m=function(e){var n=e.stateCode,r=e.userType,i=e.tenants,l=a.useRouteMatch().path,u=["utilities","common-masters",Digit.ULBService.getCurrentTenantId()],s=Digit.StoreData.getCurrentLanguage();return Digit.Services.useStore({stateCode:n,moduleCode:u,language:s}).isLoading?o.createElement(t.Loader,null):o.createElement(c,{path:l,stateCode:n,userType:r,tenants:i})},d={UtilitiesModule:m};Object.defineProperty(exports,"FormComposerV2",{enumerable:!0,get:function(){return t.FormComposerV2}}),Object.defineProperty(exports,"InboxSearchComposer",{enumerable:!0,get:function(){return t.InboxSearchComposer}}),exports.UtilitiesModule=m,exports.initUtilitiesComponents=function(){Object.entries(d).forEach(function(e){Digit.ComponentRegistryService.setComponent(e[0],e[1])})};
